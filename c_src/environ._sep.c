/* This C file is generated by NIT to compile module environ. */
#include "environ._sep.h"
val_t environ___Symbol___environ(val_t  self) {
  struct trace_t trace = {NULL, NULL, 19, LOCATE_environ___Symbol___environ};
  static val_t once_value_1; static int once_bool_1; /* Once value for variable[4]*/
  val_t variable[11];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_environ;
  variable[0] =  self;
  variable[3] = variable[0];
  variable[3] = CALL_string___Object___to_s(variable[3])(variable[3]) /*Symbol::to_s*/;
  variable[3] = CALL_string___String___to_cstring(variable[3])(variable[3]) /*String::to_cstring*/;
  variable[3] = CALL_environ___NativeString___get_environ(variable[3])(variable[3]) /*NativeString::get_environ*/;
  variable[2] = variable[3];
  if (once_bool_1) variable[4] = once_value_1;
  else {
    variable[4] = NEW_String_string___String___with_native(BOX_NativeString(""), TAG_Int(0)); /*new String*/
    variable[4] = CALL_string___String___to_cstring(variable[4])(variable[4]) /*String::to_cstring*/;
    variable[4] = CALL_environ___NativeString___get_environ(variable[4])(variable[4]) /*NativeString::get_environ*/;
    once_value_1 = variable[4];
    once_bool_1 = true;
  }
  variable[3] = variable[4];
  variable[4] = TAG_Bool(!UNTAG_Bool(TAG_Bool(( variable[2] /*res*/ ==  variable[3] /*nulstr*/) || (( variable[2] /*res*/ != NIT_NULL) && ((CALL_kernel___Object_____eqeq( variable[2] /*res*/)==kernel___Object_____eqeq)?(IS_EQUAL_NN( variable[2] /*res*/, variable[3] /*nulstr*/)):(UNTAG_Bool(CALL_kernel___Object_____eqeq( variable[2] /*res*/)( variable[2] /*res*/,  variable[3] /*nulstr*/) /*Object::==*/)))))));
  if (UNTAG_Bool(variable[4])) { /*if*/
    variable[4] = NEW_Array_array___Array___with_capacity(TAG_Int(3)); /*new Array[String]*/
    variable[5] = NEW_String_string___String___with_native(BOX_NativeString("env "), TAG_Int(4)); /*new String*/
    variable[6] = variable[5];
    CALL_abstract_collection___SimpleCollection___add(variable[4])(variable[4], variable[6]) /*AbstractArray::add*/;
    variable[7] = variable[0];
    variable[8] = variable[7];
    variable[8] = CALL_string___Object___to_s(variable[8])(variable[8]) /*Object::to_s*/;
    CALL_abstract_collection___SimpleCollection___add(variable[4])(variable[4], variable[8]) /*AbstractArray::add*/;
    variable[9] = NEW_String_string___String___with_native(BOX_NativeString("="), TAG_Int(1)); /*new String*/
    variable[10] = variable[9];
    CALL_abstract_collection___SimpleCollection___add(variable[4])(variable[4], variable[10]) /*AbstractArray::add*/;
    variable[4] = CALL_string___Object___to_s(variable[4])(variable[4]) /*Object::to_s*/;
    CALL_kernel___Object___output(variable[4])(variable[4]) /*String::output*/;
    CALL_kernel___Object___output( variable[2] /*res*/)( variable[2] /*res*/) /*Object::output*/;
    variable[4] = NEW_String_string___String___from_cstring( variable[2] /*res*/); /*new String*/
    variable[1] = variable[4];
    goto return_label0;
  } else { /*if*/
    variable[4] = NEW_String_string___String___with_native(BOX_NativeString(""), TAG_Int(0)); /*new String*/
    variable[1] = variable[4];
    goto return_label0;
  }
  return_label0: while(false);
  tracehead = trace.prev;
  return variable[1];
}
val_t environ___NativeString___get_environ(val_t  self) {
  struct trace_t trace = {NULL, NULL, 36, LOCATE_environ___NativeString___get_environ};
  val_t *variable = NULL;
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_environ;
  tracehead = trace.prev;
  return BOX_NativeString(string_NativeString_NativeString_get_environ_0(UNBOX_NativeString( self)));
}
