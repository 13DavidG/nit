/* This C file is generated by NIT to compile module stream. */
#include "stream._sep.h"
void stream___IOS___close(val_t  self) {
  struct trace_t trace = {NULL, NULL, 20, LOCATE_stream___IOS___close};
  val_t *variable = NULL;
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  fprintf(stderr, "Deferred method called");
  fprintf(stderr, " (%s:%d)\n", LOCATE_stream, 20);
  nit_exit(1);
  tracehead = trace.prev;
  return;
}
void stream___IOS___init(val_t  self, int* init_table) {
  struct trace_t trace = {NULL, NULL, 0, LOCATE_stream___IOS___init};
  val_t *variable = NULL;
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  tracehead = trace.prev;
  return;
}
val_t stream___IStream___read_char(val_t  self) {
  struct trace_t trace = {NULL, NULL, 27, LOCATE_stream___IStream___read_char};
  val_t *variable = NULL;
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  fprintf(stderr, "Deferred method called");
  fprintf(stderr, " (%s:%d)\n", LOCATE_stream, 27);
  nit_exit(1);
  tracehead = trace.prev;
  return NIT_NULL;
}
val_t stream___IStream___read(val_t  self, val_t  param0) {
  struct trace_t trace = {NULL, NULL, 30, LOCATE_stream___IStream___read};
  val_t variable[6];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[1] =  param0;
  variable[4] = NEW_String_string___String___with_capacity( variable[1] /*i*/); /*new String*/
  variable[3] = variable[4];
  while (true) { /*while*/
    variable[4] = TAG_Bool(UNTAG_Int( variable[1] /*i*/)>UNTAG_Int( TAG_Int(0)));
    variable[5] = variable[4];
    if (UNTAG_Bool(variable[5])) { /* and */
      variable[5] = variable[0];
      variable[5] = ((stream___IStream___eof_t)CALL(variable[5],COLOR_stream___IStream___eof))(variable[5]) /*IStream::eof*/;
      variable[5] =  TAG_Bool(!UNTAG_Bool(variable[5]));
    }
    variable[4] = variable[5];
    if (!UNTAG_Bool(variable[4])) break; /* while*/
    variable[5] = variable[0];
    variable[5] = ((stream___IStream___read_char_t)CALL(variable[5],COLOR_stream___IStream___read_char))(variable[5]) /*IStream::read_char*/;
    variable[4] = variable[5];
    variable[5] = TAG_Bool(UNTAG_Int( variable[4] /*c*/)>=UNTAG_Int( TAG_Int(0)));
    if (UNTAG_Bool(variable[5])) { /*if*/
      variable[5] = TAG_Char(UNTAG_Int( variable[4] /*c*/));
      ((string___String___add_t)CALL( variable[3] /*s*/,COLOR_abstract_collection___SimpleCollection___add))( variable[3] /*s*/, variable[5]) /*String::add*/;
      variable[1] = TAG_Int(UNTAG_Int(variable[1])-UNTAG_Int( TAG_Int(1))) /*i*/;
    }
    continue_1: while(0);
  }
  break_1: while(0);
  variable[2] =  variable[3] /*s*/;
  goto return_label0;
  return_label0: while(false);
  tracehead = trace.prev;
  return variable[2];
}
val_t stream___IStream___read_line(val_t  self) {
  struct trace_t trace = {NULL, NULL, 44, LOCATE_stream___IStream___read_line};
  val_t variable[4];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[2] = variable[0];
  variable[2] = ((stream___IStream___eof_t)CALL(variable[2],COLOR_stream___IStream___eof))(variable[2]) /*IStream::eof*/;
  if (!UNTAG_Bool( TAG_Bool(!UNTAG_Bool(variable[2])))) { fprintf(stderr, "Assert%s failed", ""); fprintf(stderr, " in %s (%s:%d)\n", LOCATE_stream___IStream___read_line, LOCATE_stream, 47); nit_exit(1);}
  variable[3] = NEW_String_string___String___init(); /*new String*/
  variable[2] = variable[3];
  variable[3] = variable[0];
  ((stream___IStream___append_line_to_t)CALL(variable[3],COLOR_stream___IStream___append_line_to))(variable[3],  variable[2] /*s*/) /*IStream::append_line_to*/;
  variable[1] =  variable[2] /*s*/;
  goto return_label2;
  return_label2: while(false);
  tracehead = trace.prev;
  return variable[1];
}
val_t stream___IStream___read_all(val_t  self) {
  struct trace_t trace = {NULL, NULL, 53, LOCATE_stream___IStream___read_all};
  val_t variable[5];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[3] = NEW_String_string___String___with_native(BOX_NativeString(""), TAG_Int(0)); /*new String*/
  variable[2] = variable[3];
  while (true) { /*while*/
    variable[3] = variable[0];
    variable[3] = ((stream___IStream___eof_t)CALL(variable[3],COLOR_stream___IStream___eof))(variable[3]) /*IStream::eof*/;
    if (!UNTAG_Bool( TAG_Bool(!UNTAG_Bool(variable[3])))) break; /* while*/
    variable[4] = variable[0];
    variable[4] = ((stream___IStream___read_char_t)CALL(variable[4],COLOR_stream___IStream___read_char))(variable[4]) /*IStream::read_char*/;
    variable[3] = variable[4];
    variable[4] = TAG_Bool(UNTAG_Int( variable[3] /*c*/)>=UNTAG_Int( TAG_Int(0)));
    if (UNTAG_Bool(variable[4])) { /*if*/
      variable[4] = TAG_Char(UNTAG_Int( variable[3] /*c*/));
      ((string___String___add_t)CALL( variable[2] /*s*/,COLOR_abstract_collection___SimpleCollection___add))( variable[2] /*s*/, variable[4]) /*String::add*/;
    }
    continue_4: while(0);
  }
  break_4: while(0);
  variable[1] =  variable[2] /*s*/;
  goto return_label3;
  return_label3: while(false);
  tracehead = trace.prev;
  return variable[1];
}
void stream___IStream___append_line_to(val_t  self, val_t  param0) {
  struct trace_t trace = {NULL, NULL, 64, LOCATE_stream___IStream___append_line_to};
  val_t variable[6];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[1] =  param0;
  while (true) { /*while*/
    if (!UNTAG_Bool( TAG_Bool(true))) break; /* while*/
    variable[4] = variable[0];
    variable[4] = ((stream___IStream___read_char_t)CALL(variable[4],COLOR_stream___IStream___read_char))(variable[4]) /*IStream::read_char*/;
    variable[3] = variable[4];
    variable[4] = TAG_Int(-UNTAG_Int( TAG_Int(1)));
    variable[4] = TAG_Bool(( variable[3] /*x*/)==(variable[4]));
    if (UNTAG_Bool(variable[4])) { /*if*/
      variable[4] = variable[0];
      variable[4] = ((stream___IStream___eof_t)CALL(variable[4],COLOR_stream___IStream___eof))(variable[4]) /*IStream::eof*/;
      if (UNTAG_Bool(variable[4])) { /*if*/
        goto return_label5;
      }
    } else { /*if*/
      variable[5] = TAG_Char(UNTAG_Int( variable[3] /*x*/));
      variable[4] = variable[5];
      ((array___AbstractArray___push_t)CALL( variable[1] /*s*/,COLOR_abstract_collection___IndexedCollection___push))( variable[1] /*s*/,  variable[4] /*c*/) /*AbstractArray::push*/;
      variable[5] = TAG_Bool(( variable[4] /*c*/)==( TAG_Char('\n')));
      if (UNTAG_Bool(variable[5])) { /*if*/
        goto return_label5;
      }
    }
    continue_6: while(0);
  }
  break_6: while(0);
  return_label5: while(false);
  tracehead = trace.prev;
  return;
}
val_t stream___IStream___eof(val_t  self) {
  struct trace_t trace = {NULL, NULL, 79, LOCATE_stream___IStream___eof};
  val_t *variable = NULL;
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  fprintf(stderr, "Deferred method called");
  fprintf(stderr, " (%s:%d)\n", LOCATE_stream, 79);
  nit_exit(1);
  tracehead = trace.prev;
  return NIT_NULL;
}
void stream___OStream___write(val_t  self, val_t  param0) {
  struct trace_t trace = {NULL, NULL, 86, LOCATE_stream___OStream___write};
  val_t *variable = NULL;
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  fprintf(stderr, "Deferred method called");
  fprintf(stderr, " (%s:%d)\n", LOCATE_stream, 86);
  nit_exit(1);
  tracehead = trace.prev;
  return;
}
val_t stream___OStream___is_writable(val_t  self) {
  struct trace_t trace = {NULL, NULL, 89, LOCATE_stream___OStream___is_writable};
  val_t *variable = NULL;
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  fprintf(stderr, "Deferred method called");
  fprintf(stderr, " (%s:%d)\n", LOCATE_stream, 89);
  nit_exit(1);
  tracehead = trace.prev;
  return NIT_NULL;
}
val_t stream___BufferedIStream___read_char(val_t  self) {
  struct trace_t trace = {NULL, NULL, 96, LOCATE_stream___BufferedIStream___read_char};
  val_t variable[5];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[2] = variable[0];
  variable[2] = ((stream___BufferedIStream___eof_t)CALL(variable[2],COLOR_stream___IStream___eof))(variable[2]) /*BufferedIStream::eof*/;
  if (!UNTAG_Bool( TAG_Bool(!UNTAG_Bool(variable[2])))) { fprintf(stderr, "Assert%s failed", ""); fprintf(stderr, " in %s (%s:%d)\n", LOCATE_stream___BufferedIStream___read_char, LOCATE_stream, 98); nit_exit(1);}
  variable[2] = variable[0];
  variable[2] = ATTR_stream___BufferedIStream____buffer_pos(variable[2]) /*BufferedIStream::_buffer_pos*/;
  variable[3] = variable[0];
  variable[3] = ATTR_stream___BufferedIStream____buffer(variable[3]) /*BufferedIStream::_buffer*/;
  variable[3] = ((array___AbstractArray___length_t)CALL(variable[3],COLOR_abstract_collection___Collection___length))(variable[3]) /*AbstractArray::length*/;
  variable[2] = TAG_Bool(UNTAG_Int(variable[2])>=UNTAG_Int(variable[3]));
  if (UNTAG_Bool(variable[2])) { /*if*/
    variable[2] = variable[0];
    ((stream___BufferedIStream___fill_buffer_t)CALL(variable[2],COLOR_stream___BufferedIStream___fill_buffer))(variable[2]) /*BufferedIStream::fill_buffer*/;
  }
  variable[2] = variable[0];
  variable[2] = ATTR_stream___BufferedIStream____buffer_pos(variable[2]) /*BufferedIStream::_buffer_pos*/;
  variable[3] = variable[0];
  variable[3] = ATTR_stream___BufferedIStream____buffer(variable[3]) /*BufferedIStream::_buffer*/;
  variable[3] = ((array___AbstractArray___length_t)CALL(variable[3],COLOR_abstract_collection___Collection___length))(variable[3]) /*AbstractArray::length*/;
  variable[2] = TAG_Bool(UNTAG_Int(variable[2])>=UNTAG_Int(variable[3]));
  if (UNTAG_Bool(variable[2])) { /*if*/
    variable[2] = TAG_Int(-UNTAG_Int( TAG_Int(1)));
    variable[1] = variable[2];
    goto return_label7;
  }
  variable[3] = variable[0];
  variable[3] = ATTR_stream___BufferedIStream____buffer(variable[3]) /*BufferedIStream::_buffer*/;
  variable[4] = variable[0];
  variable[4] = ATTR_stream___BufferedIStream____buffer_pos(variable[4]) /*BufferedIStream::_buffer_pos*/;
  variable[3] = ((string___String_____bra_t)CALL(variable[3],COLOR_abstract_collection___Map_____bra))(variable[3], variable[4]) /*String::[]*/;
  variable[2] = variable[3];
  variable[3] = variable[0];
  ATTR_stream___BufferedIStream____buffer_pos(variable[3]) /*BufferedIStream::_buffer_pos*/ = TAG_Int(UNTAG_Int(ATTR_stream___BufferedIStream____buffer_pos(variable[3]) /*BufferedIStream::_buffer_pos*/)+UNTAG_Int( TAG_Int(1)));
  variable[3] = TAG_Int((unsigned char)UNTAG_Char( variable[2] /*c*/));
  variable[1] = variable[3];
  goto return_label7;
  return_label7: while(false);
  tracehead = trace.prev;
  return variable[1];
}
val_t stream___BufferedIStream___read(val_t  self, val_t  param0) {
  struct trace_t trace = {NULL, NULL, 110, LOCATE_stream___BufferedIStream___read};
  val_t variable[8];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[1] =  param0;
  variable[4] = NEW_String_string___String___with_capacity( variable[1] /*i*/); /*new String*/
  variable[3] = variable[4];
  variable[5] = variable[0];
  variable[5] = ATTR_stream___BufferedIStream____buffer_pos(variable[5]) /*BufferedIStream::_buffer_pos*/;
  variable[4] = variable[5];
  variable[6] = variable[0];
  variable[6] = ATTR_stream___BufferedIStream____buffer(variable[6]) /*BufferedIStream::_buffer*/;
  variable[6] = ((array___AbstractArray___length_t)CALL(variable[6],COLOR_abstract_collection___Collection___length))(variable[6]) /*AbstractArray::length*/;
  variable[5] = variable[6];
  while (true) { /*while*/
    variable[6] = TAG_Bool(UNTAG_Int( variable[1] /*i*/)>UNTAG_Int( TAG_Int(0)));
    if (!UNTAG_Bool(variable[6])) break; /* while*/
    variable[6] = TAG_Bool(UNTAG_Int( variable[4] /*j*/)>=UNTAG_Int( variable[5] /*k*/));
    if (UNTAG_Bool(variable[6])) { /*if*/
      variable[6] = variable[0];
      ((stream___BufferedIStream___fill_buffer_t)CALL(variable[6],COLOR_stream___BufferedIStream___fill_buffer))(variable[6]) /*BufferedIStream::fill_buffer*/;
      variable[6] = variable[0];
      variable[6] = ((stream___BufferedIStream___eof_t)CALL(variable[6],COLOR_stream___IStream___eof))(variable[6]) /*BufferedIStream::eof*/;
      if (UNTAG_Bool(variable[6])) { /*if*/
        variable[2] =  variable[3] /*s*/;
        goto return_label8;
      }
      variable[6] = variable[0];
      variable[6] = ATTR_stream___BufferedIStream____buffer_pos(variable[6]) /*BufferedIStream::_buffer_pos*/;
      variable[4] = variable[6] /*j=*/;
      variable[6] = variable[0];
      variable[6] = ATTR_stream___BufferedIStream____buffer(variable[6]) /*BufferedIStream::_buffer*/;
      variable[6] = ((array___AbstractArray___length_t)CALL(variable[6],COLOR_abstract_collection___Collection___length))(variable[6]) /*AbstractArray::length*/;
      variable[5] = variable[6] /*k=*/;
    }
    while (true) { /*while*/
      variable[6] = TAG_Bool(UNTAG_Int( variable[4] /*j*/)<UNTAG_Int( variable[5] /*k*/));
      variable[7] = variable[6];
      if (UNTAG_Bool(variable[7])) { /* and */
        variable[7] = TAG_Bool(UNTAG_Int( variable[1] /*i*/)>UNTAG_Int( TAG_Int(0)));
      }
      variable[6] = variable[7];
      if (!UNTAG_Bool(variable[6])) break; /* while*/
      variable[6] = variable[0];
      variable[6] = ATTR_stream___BufferedIStream____buffer(variable[6]) /*BufferedIStream::_buffer*/;
      variable[6] = ((string___String_____bra_t)CALL(variable[6],COLOR_abstract_collection___Map_____bra))(variable[6],  variable[4] /*j*/) /*String::[]*/;
      ((string___String___add_t)CALL( variable[3] /*s*/,COLOR_abstract_collection___SimpleCollection___add))( variable[3] /*s*/, variable[6]) /*String::add*/;
      variable[4] = TAG_Int(UNTAG_Int(variable[4])+UNTAG_Int( TAG_Int(1))) /*j*/;
      variable[1] = TAG_Int(UNTAG_Int(variable[1])-UNTAG_Int( TAG_Int(1))) /*i*/;
      continue_10: while(0);
    }
    break_10: while(0);
    continue_9: while(0);
  }
  break_9: while(0);
  variable[6] = variable[0];
  ATTR_stream___BufferedIStream____buffer_pos(variable[6]) /*BufferedIStream::_buffer_pos*/ =  variable[4] /*j*/;
  variable[2] =  variable[3] /*s*/;
  goto return_label8;
  return_label8: while(false);
  tracehead = trace.prev;
  return variable[2];
}
val_t stream___BufferedIStream___read_all(val_t  self) {
  struct trace_t trace = {NULL, NULL, 132, LOCATE_stream___BufferedIStream___read_all};
  val_t variable[6];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[3] = NEW_String_string___String___with_native(BOX_NativeString(""), TAG_Int(0)); /*new String*/
  variable[2] = variable[3];
  while (true) { /*while*/
    variable[3] = variable[0];
    variable[3] = ((stream___BufferedIStream___eof_t)CALL(variable[3],COLOR_stream___IStream___eof))(variable[3]) /*BufferedIStream::eof*/;
    if (!UNTAG_Bool( TAG_Bool(!UNTAG_Bool(variable[3])))) break; /* while*/
    variable[4] = variable[0];
    variable[4] = ATTR_stream___BufferedIStream____buffer_pos(variable[4]) /*BufferedIStream::_buffer_pos*/;
    variable[3] = variable[4];
    variable[5] = variable[0];
    variable[5] = ATTR_stream___BufferedIStream____buffer(variable[5]) /*BufferedIStream::_buffer*/;
    variable[5] = ((array___AbstractArray___length_t)CALL(variable[5],COLOR_abstract_collection___Collection___length))(variable[5]) /*AbstractArray::length*/;
    variable[4] = variable[5];
    while (true) { /*while*/
      variable[5] = TAG_Bool(UNTAG_Int( variable[3] /*j*/)<UNTAG_Int( variable[4] /*k*/));
      if (!UNTAG_Bool(variable[5])) break; /* while*/
      variable[5] = variable[0];
      variable[5] = ATTR_stream___BufferedIStream____buffer(variable[5]) /*BufferedIStream::_buffer*/;
      variable[5] = ((string___String_____bra_t)CALL(variable[5],COLOR_abstract_collection___Map_____bra))(variable[5],  variable[3] /*j*/) /*String::[]*/;
      ((string___String___add_t)CALL( variable[2] /*s*/,COLOR_abstract_collection___SimpleCollection___add))( variable[2] /*s*/, variable[5]) /*String::add*/;
      variable[3] = TAG_Int(UNTAG_Int(variable[3])+UNTAG_Int( TAG_Int(1))) /*j*/;
      continue_13: while(0);
    }
    break_13: while(0);
    variable[5] = variable[0];
    ATTR_stream___BufferedIStream____buffer_pos(variable[5]) /*BufferedIStream::_buffer_pos*/ =  variable[3] /*j*/;
    variable[5] = variable[0];
    ((stream___BufferedIStream___fill_buffer_t)CALL(variable[5],COLOR_stream___BufferedIStream___fill_buffer))(variable[5]) /*BufferedIStream::fill_buffer*/;
    continue_12: while(0);
  }
  break_12: while(0);
  variable[1] =  variable[2] /*s*/;
  goto return_label11;
  return_label11: while(false);
  tracehead = trace.prev;
  return variable[1];
}
void stream___BufferedIStream___append_line_to(val_t  self, val_t  param0) {
  struct trace_t trace = {NULL, NULL, 148, LOCATE_stream___BufferedIStream___append_line_to};
  val_t variable[6];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[1] =  param0;
  while (true) { /*while*/
    if (!UNTAG_Bool( TAG_Bool(true))) break; /* while*/
    variable[4] = variable[0];
    variable[4] = ATTR_stream___BufferedIStream____buffer_pos(variable[4]) /*BufferedIStream::_buffer_pos*/;
    variable[3] = variable[4];
    while (true) { /*while*/
      variable[4] = variable[0];
      variable[4] = ATTR_stream___BufferedIStream____buffer(variable[4]) /*BufferedIStream::_buffer*/;
      variable[4] = ((array___AbstractArray___length_t)CALL(variable[4],COLOR_abstract_collection___Collection___length))(variable[4]) /*AbstractArray::length*/;
      variable[4] = TAG_Bool(UNTAG_Int( variable[3] /*i*/)<UNTAG_Int(variable[4]));
      variable[5] = variable[4];
      if (UNTAG_Bool(variable[5])) { /* and */
        variable[5] = variable[0];
        variable[5] = ATTR_stream___BufferedIStream____buffer(variable[5]) /*BufferedIStream::_buffer*/;
        variable[5] = ((string___String_____bra_t)CALL(variable[5],COLOR_abstract_collection___Map_____bra))(variable[5],  variable[3] /*i*/) /*String::[]*/;
        variable[5] = TAG_Bool((variable[5])!=( TAG_Char('\n')));
      }
      variable[4] = variable[5];
      if (!UNTAG_Bool(variable[4])) break; /* while*/
      variable[3] = TAG_Int(UNTAG_Int(variable[3])+UNTAG_Int( TAG_Int(1))) /*i*/;
      continue_16: while(0);
    }
    break_16: while(0);
    variable[4] = variable[0];
    variable[4] = ATTR_stream___BufferedIStream____buffer_pos(variable[4]) /*BufferedIStream::_buffer_pos*/;
    variable[4] = TAG_Bool(UNTAG_Int( variable[3] /*i*/)>UNTAG_Int(variable[4]));
    if (UNTAG_Bool(variable[4])) { /*if*/
      variable[4] = ((array___AbstractArray___length_t)CALL( variable[1] /*s*/,COLOR_abstract_collection___Collection___length))( variable[1] /*s*/) /*AbstractArray::length*/;
      variable[4] = TAG_Int(UNTAG_Int(variable[4])+UNTAG_Int( variable[3] /*i*/));
      variable[5] = variable[0];
      variable[5] = ATTR_stream___BufferedIStream____buffer_pos(variable[5]) /*BufferedIStream::_buffer_pos*/;
      variable[4] = TAG_Int(UNTAG_Int(variable[4])-UNTAG_Int(variable[5]));
      ((string___String___enlarge_t)CALL( variable[1] /*s*/,COLOR_array___AbstractArray___enlarge))( variable[1] /*s*/, variable[4]) /*String::enlarge*/;
      variable[5] = variable[0];
      variable[5] = ATTR_stream___BufferedIStream____buffer_pos(variable[5]) /*BufferedIStream::_buffer_pos*/;
      variable[4] = variable[5];
      while (true) { /*while*/
        variable[5] = TAG_Bool(UNTAG_Int( variable[4] /*j*/)<UNTAG_Int( variable[3] /*i*/));
        if (!UNTAG_Bool(variable[5])) break; /* while*/
        variable[5] = variable[0];
        variable[5] = ATTR_stream___BufferedIStream____buffer(variable[5]) /*BufferedIStream::_buffer*/;
        variable[5] = ((string___String_____bra_t)CALL(variable[5],COLOR_abstract_collection___Map_____bra))(variable[5],  variable[4] /*j*/) /*String::[]*/;
        ((string___String___add_t)CALL( variable[1] /*s*/,COLOR_abstract_collection___SimpleCollection___add))( variable[1] /*s*/, variable[5]) /*String::add*/;
        variable[4] = TAG_Int(UNTAG_Int(variable[4])+UNTAG_Int( TAG_Int(1))) /*j*/;
        continue_17: while(0);
      }
      break_17: while(0);
    }
    variable[4] = variable[0];
    variable[4] = ATTR_stream___BufferedIStream____buffer(variable[4]) /*BufferedIStream::_buffer*/;
    variable[4] = ((array___AbstractArray___length_t)CALL(variable[4],COLOR_abstract_collection___Collection___length))(variable[4]) /*AbstractArray::length*/;
    variable[4] = TAG_Bool(UNTAG_Int( variable[3] /*i*/)<UNTAG_Int(variable[4]));
    if (UNTAG_Bool(variable[4])) { /*if*/
      variable[4] = variable[0];
      variable[5] = TAG_Int(UNTAG_Int( variable[3] /*i*/)+UNTAG_Int( TAG_Int(1)));
      ATTR_stream___BufferedIStream____buffer_pos(variable[4]) /*BufferedIStream::_buffer_pos*/ = variable[5];
      goto return_label14;
    } else { /*if*/
      variable[4] = variable[0];
      ATTR_stream___BufferedIStream____buffer_pos(variable[4]) /*BufferedIStream::_buffer_pos*/ =  variable[3] /*i*/;
      variable[4] = variable[0];
      variable[4] = ((stream___BufferedIStream___end_reached_t)CALL(variable[4],COLOR_stream___BufferedIStream___end_reached))(variable[4]) /*BufferedIStream::end_reached*/;
      if (UNTAG_Bool(variable[4])) { /*if*/
        goto return_label14;
      } else { /*if*/
        variable[4] = variable[0];
        ((stream___BufferedIStream___fill_buffer_t)CALL(variable[4],COLOR_stream___BufferedIStream___fill_buffer))(variable[4]) /*BufferedIStream::fill_buffer*/;
      }
    }
    continue_15: while(0);
  }
  break_15: while(0);
  return_label14: while(false);
  tracehead = trace.prev;
  return;
}
val_t stream___BufferedIStream___eof(val_t  self) {
  struct trace_t trace = {NULL, NULL, 184, LOCATE_stream___BufferedIStream___eof};
  val_t variable[4];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[2] = variable[0];
  variable[2] = ATTR_stream___BufferedIStream____buffer_pos(variable[2]) /*BufferedIStream::_buffer_pos*/;
  variable[3] = variable[0];
  variable[3] = ATTR_stream___BufferedIStream____buffer(variable[3]) /*BufferedIStream::_buffer*/;
  variable[3] = ((array___AbstractArray___length_t)CALL(variable[3],COLOR_abstract_collection___Collection___length))(variable[3]) /*AbstractArray::length*/;
  variable[2] = TAG_Bool(UNTAG_Int(variable[2])>=UNTAG_Int(variable[3]));
  variable[3] = variable[2];
  if (UNTAG_Bool(variable[3])) { /* and */
    variable[3] = variable[0];
    variable[3] = ((stream___BufferedIStream___end_reached_t)CALL(variable[3],COLOR_stream___BufferedIStream___end_reached))(variable[3]) /*BufferedIStream::end_reached*/;
  }
  variable[2] = variable[3];
  variable[1] = variable[2];
  goto return_label18;
  return_label18: while(false);
  tracehead = trace.prev;
  return variable[1];
}
void stream___BufferedIStream___fill_buffer(val_t  self) {
  struct trace_t trace = {NULL, NULL, 192, LOCATE_stream___BufferedIStream___fill_buffer};
  val_t *variable = NULL;
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  fprintf(stderr, "Deferred method called");
  fprintf(stderr, " (%s:%d)\n", LOCATE_stream, 192);
  nit_exit(1);
  tracehead = trace.prev;
  return;
}
val_t stream___BufferedIStream___end_reached(val_t  self) {
  struct trace_t trace = {NULL, NULL, 195, LOCATE_stream___BufferedIStream___end_reached};
  val_t *variable = NULL;
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  fprintf(stderr, "Deferred method called");
  fprintf(stderr, " (%s:%d)\n", LOCATE_stream, 195);
  nit_exit(1);
  tracehead = trace.prev;
  return NIT_NULL;
}
void stream___BufferedIStream___prepare_buffer(val_t  self, val_t  param0) {
  struct trace_t trace = {NULL, NULL, 198, LOCATE_stream___BufferedIStream___prepare_buffer};
  val_t variable[5];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[1] =  param0;
  variable[3] = variable[0];
  variable[4] = NEW_String_string___String___with_capacity( variable[1] /*capacity*/); /*new String*/
  ATTR_stream___BufferedIStream____buffer(variable[3]) /*BufferedIStream::_buffer*/ = variable[4];
  variable[3] = variable[0];
  ATTR_stream___BufferedIStream____buffer_pos(variable[3]) /*BufferedIStream::_buffer_pos*/ =  TAG_Int(0);
  return_label19: while(false);
  tracehead = trace.prev;
  return;
}
void stream___FDStream___close(val_t  self) {
  struct trace_t trace = {NULL, NULL, 218, LOCATE_stream___FDStream___close};
  val_t variable[4];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[2] = variable[0];
  variable[3] = variable[0];
  variable[3] = ATTR_stream___FDStream____fd(variable[3]) /*FDStream::_fd*/;
  ((stream___FDStream___native_close_t)CALL(variable[2],COLOR_stream___FDStream___native_close))(variable[2], variable[3]) /*FDStream::native_close*/;
  return_label20: while(false);
  tracehead = trace.prev;
  return;
}
val_t stream___FDStream___native_close(val_t  self, val_t  param0) {
  struct trace_t trace = {NULL, NULL, 220, LOCATE_stream___FDStream___native_close};
  val_t *variable = NULL;
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  tracehead = trace.prev;
  return TAG_Int(stream_FDStream_FDStream_native_close_1( self, UNTAG_Int( param0)));
}
val_t stream___FDStream___native_read_char(val_t  self, val_t  param0) {
  struct trace_t trace = {NULL, NULL, 221, LOCATE_stream___FDStream___native_read_char};
  val_t *variable = NULL;
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  tracehead = trace.prev;
  return TAG_Int(stream_FDStream_FDStream_native_read_char_1( self, UNTAG_Int( param0)));
}
val_t stream___FDStream___native_read(val_t  self, val_t  param0, val_t  param1, val_t  param2) {
  struct trace_t trace = {NULL, NULL, 222, LOCATE_stream___FDStream___native_read};
  val_t *variable = NULL;
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  tracehead = trace.prev;
  return TAG_Int(stream_FDStream_FDStream_native_read_3( self, UNTAG_Int( param0), UNBOX_NativeString( param1), UNTAG_Int( param2)));
}
val_t stream___FDStream___native_write(val_t  self, val_t  param0, val_t  param1, val_t  param2) {
  struct trace_t trace = {NULL, NULL, 223, LOCATE_stream___FDStream___native_write};
  val_t *variable = NULL;
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  tracehead = trace.prev;
  return TAG_Int(stream_FDStream_FDStream_native_write_3( self, UNTAG_Int( param0), UNBOX_NativeString( param1), UNTAG_Int( param2)));
}
void stream___FDStream___init(val_t  self, val_t  param0, int* init_table) {
  struct trace_t trace = {NULL, NULL, 225, LOCATE_stream___FDStream___init};
  val_t variable[4];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[1] =  param0;
  if (init_table[VAL2OBJ(variable[0])->vft[INIT_TABLE_POS_FDStream].i]) return;
  variable[3] = variable[0];
  ATTR_stream___FDStream____fd(variable[3]) /*FDStream::_fd*/ =  variable[1] /*fd*/;
  return_label21: while(false);
  init_table[VAL2OBJ(variable[0])->vft[INIT_TABLE_POS_FDStream].i] = 1;
  tracehead = trace.prev;
  return;
}
val_t stream___FDIStream___read_char(val_t  self) {
  struct trace_t trace = {NULL, NULL, 233, LOCATE_stream___FDIStream___read_char};
  val_t variable[5];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[3] = variable[0];
  variable[4] = variable[0];
  variable[4] = ATTR_stream___FDStream____fd(variable[4]) /*FDStream::_fd*/;
  variable[3] = ((stream___FDStream___native_read_char_t)CALL(variable[3],COLOR_stream___FDStream___native_read_char))(variable[3], variable[4]) /*FDStream::native_read_char*/;
  variable[2] = variable[3];
  variable[3] = TAG_Int(-UNTAG_Int( TAG_Int(1)));
  variable[3] = TAG_Bool(( variable[2] /*nb*/)==(variable[3]));
  if (UNTAG_Bool(variable[3])) { /*if*/
    variable[3] = variable[0];
    ATTR_stream___FDIStream____eof(variable[3]) /*FDIStream::_eof*/ =  TAG_Bool(true);
  }
  variable[1] =  variable[2] /*nb*/;
  goto return_label22;
  return_label22: while(false);
  tracehead = trace.prev;
  return variable[1];
}
val_t stream___FDIStream___eof(val_t  self) {
  struct trace_t trace = {NULL, NULL, 231, LOCATE_stream___FDIStream___eof};
  val_t *variable = NULL;
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  tracehead = trace.prev;
  return ATTR_stream___FDIStream____eof( self) /*FDIStream::_eof*/;
}
void stream___FDIStream___init(val_t  self, val_t  param0, int* init_table) {
  struct trace_t trace = {NULL, NULL, 240, LOCATE_stream___FDIStream___init};
  val_t variable[3];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[1] =  param0;
  if (init_table[VAL2OBJ(variable[0])->vft[INIT_TABLE_POS_FDIStream].i]) return;
  ((stream___FDStream___init_t)CALL(variable[0],COLOR_stream___FDStream___init))(variable[0], variable[1], init_table /*YYY*/) /*FDStream::init*/;
  return_label23: while(false);
  init_table[VAL2OBJ(variable[0])->vft[INIT_TABLE_POS_FDIStream].i] = 1;
  tracehead = trace.prev;
  return;
}
void stream___FDOStream___write(val_t  self, val_t  param0) {
  struct trace_t trace = {NULL, NULL, 248, LOCATE_stream___FDOStream___write};
  val_t variable[8];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[1] =  param0;
  variable[4] = variable[0];
  variable[5] = variable[0];
  variable[5] = ATTR_stream___FDStream____fd(variable[5]) /*FDStream::_fd*/;
  variable[6] = ((string___String___to_cstring_t)CALL( variable[1] /*s*/,COLOR_string___String___to_cstring))( variable[1] /*s*/) /*String::to_cstring*/;
  variable[7] = ((array___AbstractArray___length_t)CALL( variable[1] /*s*/,COLOR_abstract_collection___Collection___length))( variable[1] /*s*/) /*AbstractArray::length*/;
  variable[4] = ((stream___FDStream___native_write_t)CALL(variable[4],COLOR_stream___FDStream___native_write))(variable[4], variable[5], variable[6], variable[7]) /*FDStream::native_write*/;
  variable[3] = variable[4];
  variable[4] = ((array___AbstractArray___length_t)CALL( variable[1] /*s*/,COLOR_abstract_collection___Collection___length))( variable[1] /*s*/) /*AbstractArray::length*/;
  variable[4] = TAG_Bool(UNTAG_Int( variable[3] /*nb*/)<UNTAG_Int(variable[4]));
  if (UNTAG_Bool(variable[4])) { /*if*/
    variable[4] = variable[0];
    ATTR_stream___FDOStream____is_writable(variable[4]) /*FDOStream::_is_writable*/ =  TAG_Bool(false);
  }
  return_label24: while(false);
  tracehead = trace.prev;
  return;
}
val_t stream___FDOStream___is_writable(val_t  self) {
  struct trace_t trace = {NULL, NULL, 246, LOCATE_stream___FDOStream___is_writable};
  val_t *variable = NULL;
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  tracehead = trace.prev;
  return ATTR_stream___FDOStream____is_writable( self) /*FDOStream::_is_writable*/;
}
void stream___FDOStream___init(val_t  self, val_t  param0, int* init_table) {
  struct trace_t trace = {NULL, NULL, 254, LOCATE_stream___FDOStream___init};
  val_t variable[4];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[1] =  param0;
  if (init_table[VAL2OBJ(variable[0])->vft[INIT_TABLE_POS_FDOStream].i]) return;
  ((stream___FDStream___init_t)CALL(variable[0],COLOR_stream___FDStream___init))(variable[0], variable[1], init_table /*YYY*/) /*FDStream::init*/;
  variable[3] = variable[0];
  ATTR_stream___FDOStream____is_writable(variable[3]) /*FDOStream::_is_writable*/ =  TAG_Bool(true);
  return_label25: while(false);
  init_table[VAL2OBJ(variable[0])->vft[INIT_TABLE_POS_FDOStream].i] = 1;
  tracehead = trace.prev;
  return;
}
void stream___FDIOStream___init(val_t  self, val_t  param0, int* init_table) {
  struct trace_t trace = {NULL, NULL, 264, LOCATE_stream___FDIOStream___init};
  val_t variable[4];
  void **closurevariable = NULL;
  trace.prev = tracehead; tracehead = &trace;
  trace.file = LOCATE_stream;
  variable[0] =  self;
  variable[1] =  param0;
  if (init_table[VAL2OBJ(variable[0])->vft[INIT_TABLE_POS_FDIOStream].i]) return;
  ((stream___FDIStream___init_t)CALL(variable[0],COLOR_stream___FDIStream___init))(variable[0], variable[1], init_table /*YYY*/) /*FDIStream::init*/;
  ((stream___FDOStream___init_t)CALL(variable[0],COLOR_stream___FDOStream___init))(variable[0], variable[1], init_table /*YYY*/) /*FDOStream::init*/;
  variable[3] = variable[0];
  ATTR_stream___FDStream____fd(variable[3]) /*FDStream::_fd*/ =  variable[1] /*fd*/;
  variable[3] = variable[0];
  ATTR_stream___FDOStream____is_writable(variable[3]) /*FDOStream::_is_writable*/ =  TAG_Bool(true);
  return_label26: while(false);
  init_table[VAL2OBJ(variable[0])->vft[INIT_TABLE_POS_FDIOStream].i] = 1;
  tracehead = trace.prev;
  return;
}
