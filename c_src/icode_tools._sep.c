/* This C file is generated by NIT to compile module icode_tools. */
#include "icode_tools._sep.h"
void icode_tools___ICodeVisitor___visit_iregister_read(val_t p0, val_t p1, val_t p2){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 22;
  fra.me.meth = LOCATE_icode_tools___ICodeVisitor___visit_iregister_read;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = p2;
  /* ./icode//icode_tools.nit:22 */
  stack_frame_head = fra.me.prev;
  return;
}
void icode_tools___ICodeVisitor___visit_iregister_write(val_t p0, val_t p1, val_t p2){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 25;
  fra.me.meth = LOCATE_icode_tools___ICodeVisitor___visit_iregister_write;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = p2;
  /* ./icode//icode_tools.nit:25 */
  stack_frame_head = fra.me.prev;
  return;
}
val_t icode_tools___ICodeVisitor___current_icode(val_t p0){
  struct {struct stack_frame_t me;} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 28;
  fra.me.meth = LOCATE_icode_tools___ICodeVisitor___current_icode;
  fra.me.has_broke = 0;
  fra.me.REG_size = 1;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[0] = ATTR_icode_tools___ICodeVisitor____current_icode(fra.me.REG[0]);
  /* ./icode//icode_tools.nit:28 */
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
void icode_tools___ICodeVisitor___visit_icode(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[4];} fra;
  val_t REGB0;
  val_t REGB1;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 32;
  fra.me.meth = LOCATE_icode_tools___ICodeVisitor___visit_icode;
  fra.me.has_broke = 0;
  fra.me.REG_size = 5;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[3] = NIT_NULL;
  fra.me.REG[4] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  REGB0 = TAG_Bool(fra.me.REG[1]==NIT_NULL);
  /* ./icode//icode_tools.nit:36 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    REGB1 = TAG_Bool(fra.me.REG[1]==NIT_NULL);
    if (UNTAG_Bool(REGB1)) {
      REGB1 = TAG_Bool(false);
      REGB0 = REGB1;
    } else {
      REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[1])(fra.me.REG[1], NIT_NULL);
      REGB0 = REGB1;
    }
  }
  if (UNTAG_Bool(REGB0)) {
    goto label1;
  }
  REGB0 = TAG_Bool((fra.me.REG[1]!=NIT_NULL) && VAL_ISA(fra.me.REG[1], COLOR_ISeq, ID_ISeq)) /*cast ISeq*/;
  /* ./icode//icode_tools.nit:37 */
  if (UNTAG_Bool(REGB0)) {
    fra.me.REG[2] = ATTR_icode_tools___ICodeVisitor____current_icode(fra.me.REG[0]);
    REGB0 = TAG_Bool(fra.me.REG[1]==NIT_NULL);
    /* ./icode//icode_tools.nit:39 */
    if (UNTAG_Bool(REGB0)) {
      fprintf(stderr, "Reciever is null");
      fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 39);
      nit_exit(1);
    }
    fra.me.REG[3] = CALL_icode_base___ISeq___icodes(fra.me.REG[1])(fra.me.REG[1]);
    fra.me.REG[3] = CALL_abstract_collection___Collection___iterator(fra.me.REG[3])(fra.me.REG[3]);
    /* ./icode//icode_tools.nit:40 */
    while(1) {
      REGB0 = CALL_abstract_collection___Iterator___is_ok(fra.me.REG[3])(fra.me.REG[3]);
      if (UNTAG_Bool(REGB0)) {
        /* ./icode//icode_tools.nit:41 */
        ATTR_icode_tools___ICodeVisitor____current_icode(fra.me.REG[0]) = fra.me.REG[3];
        fra.me.REG[4] = CALL_abstract_collection___Iterator___item(fra.me.REG[3])(fra.me.REG[3]);
        /* ./icode//icode_tools.nit:43 */
        CALL_icode_tools___ICodeVisitor___visit_icode(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[4]);
        /* ./icode//icode_tools.nit:44 */
        CALL_abstract_collection___Iterator___next(fra.me.REG[3])(fra.me.REG[3]);
      } else {
        /* ./icode//icode_tools.nit:40 */
        goto label2;
      }
    }
    label2: while(0);
    /* ./icode//icode_tools.nit:46 */
    ATTR_icode_tools___ICodeVisitor____current_icode(fra.me.REG[0]) = fra.me.REG[2];
  } else {
    REGB0 = TAG_Bool((fra.me.REG[1]!=NIT_NULL) && VAL_ISA(fra.me.REG[1], COLOR_IIf, ID_IIf)) /*cast IIf*/;
    /* ./icode//icode_tools.nit:47 */
    if (UNTAG_Bool(REGB0)) {
      REGB0 = TAG_Bool(fra.me.REG[1]==NIT_NULL);
      /* ./icode//icode_tools.nit:48 */
      if (UNTAG_Bool(REGB0)) {
        fprintf(stderr, "Reciever is null");
        fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 48);
        nit_exit(1);
      }
      fra.me.REG[2] = CALL_icode_base___ICode1___expr(fra.me.REG[1])(fra.me.REG[1]);
      CALL_icode_tools___ICodeVisitor___visit_iregister_read(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1], fra.me.REG[2]);
      REGB0 = TAG_Bool(fra.me.REG[1]==NIT_NULL);
      /* ./icode//icode_tools.nit:49 */
      if (UNTAG_Bool(REGB0)) {
        fprintf(stderr, "Reciever is null");
        fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 49);
        nit_exit(1);
      }
      fra.me.REG[2] = CALL_icode_base___IIf___then_seq(fra.me.REG[1])(fra.me.REG[1]);
      CALL_icode_tools___ICodeVisitor___visit_icode(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[2]);
      REGB0 = TAG_Bool(fra.me.REG[1]==NIT_NULL);
      /* ./icode//icode_tools.nit:50 */
      if (UNTAG_Bool(REGB0)) {
        fprintf(stderr, "Reciever is null");
        fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 50);
        nit_exit(1);
      }
      fra.me.REG[2] = CALL_icode_base___IIf___else_seq(fra.me.REG[1])(fra.me.REG[1]);
      CALL_icode_tools___ICodeVisitor___visit_icode(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[2]);
    } else {
      REGB0 = TAG_Bool((fra.me.REG[1]!=NIT_NULL) && VAL_ISA(fra.me.REG[1], COLOR_IOnce, ID_IOnce)) /*cast IOnce*/;
      /* ./icode//icode_tools.nit:51 */
      if (UNTAG_Bool(REGB0)) {
        REGB0 = TAG_Bool(fra.me.REG[1]==NIT_NULL);
        /* ./icode//icode_tools.nit:52 */
        if (UNTAG_Bool(REGB0)) {
          fprintf(stderr, "Reciever is null");
          fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 52);
          nit_exit(1);
        }
        fra.me.REG[2] = CALL_icode_base___IOnce___body(fra.me.REG[1])(fra.me.REG[1]);
        CALL_icode_tools___ICodeVisitor___visit_icode(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[2]);
      } else {
        REGB0 = TAG_Bool((fra.me.REG[1]!=NIT_NULL) && VAL_ISA(fra.me.REG[1], COLOR_ICode1, ID_ICode1)) /*cast ICode1*/;
        /* ./icode//icode_tools.nit:53 */
        if (UNTAG_Bool(REGB0)) {
          REGB0 = TAG_Bool(fra.me.REG[1]==NIT_NULL);
          /* ./icode//icode_tools.nit:54 */
          if (UNTAG_Bool(REGB0)) {
            fprintf(stderr, "Reciever is null");
            fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 54);
            nit_exit(1);
          }
          fra.me.REG[2] = CALL_icode_base___ICode1___expr(fra.me.REG[1])(fra.me.REG[1]);
          CALL_icode_tools___ICodeVisitor___visit_iregister_read(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1], fra.me.REG[2]);
        } else {
          REGB0 = TAG_Bool((fra.me.REG[1]!=NIT_NULL) && VAL_ISA(fra.me.REG[1], COLOR_ICode2, ID_ICode2)) /*cast ICode2*/;
          /* ./icode//icode_tools.nit:55 */
          if (UNTAG_Bool(REGB0)) {
            REGB0 = TAG_Bool(fra.me.REG[1]==NIT_NULL);
            /* ./icode//icode_tools.nit:56 */
            if (UNTAG_Bool(REGB0)) {
              fprintf(stderr, "Reciever is null");
              fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 56);
              nit_exit(1);
            }
            fra.me.REG[2] = CALL_icode_base___ICode2___expr1(fra.me.REG[1])(fra.me.REG[1]);
            CALL_icode_tools___ICodeVisitor___visit_iregister_read(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1], fra.me.REG[2]);
            REGB0 = TAG_Bool(fra.me.REG[1]==NIT_NULL);
            /* ./icode//icode_tools.nit:57 */
            if (UNTAG_Bool(REGB0)) {
              fprintf(stderr, "Reciever is null");
              fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 57);
              nit_exit(1);
            }
            fra.me.REG[2] = CALL_icode_base___ICode2___expr2(fra.me.REG[1])(fra.me.REG[1]);
            CALL_icode_tools___ICodeVisitor___visit_iregister_read(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1], fra.me.REG[2]);
          } else {
            REGB0 = TAG_Bool((fra.me.REG[1]!=NIT_NULL) && VAL_ISA(fra.me.REG[1], COLOR_ICodeN, ID_ICodeN)) /*cast ICodeN*/;
            /* ./icode//icode_tools.nit:58 */
            if (UNTAG_Bool(REGB0)) {
              REGB0 = TAG_Bool(fra.me.REG[1]==NIT_NULL);
              /* ./icode//icode_tools.nit:59 */
              if (UNTAG_Bool(REGB0)) {
		fprintf(stderr, "Reciever is null");
		fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 59);
		nit_exit(1);
              }
              fra.me.REG[2] = CALL_icode_base___ICodeN___exprs(fra.me.REG[1])(fra.me.REG[1]);
              fra.me.REG[2] = CALL_abstract_collection___Collection___iterator(fra.me.REG[2])(fra.me.REG[2]);
              while(1) {
		REGB0 = CALL_abstract_collection___Iterator___is_ok(fra.me.REG[2])(fra.me.REG[2]);
		if (UNTAG_Bool(REGB0)) {
		fra.me.REG[3] = CALL_abstract_collection___Iterator___item(fra.me.REG[2])(fra.me.REG[2]);
		/* ./icode//icode_tools.nit:60 */
		CALL_icode_tools___ICodeVisitor___visit_iregister_read(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1], fra.me.REG[3]);
		} else {
		/* ./icode//icode_tools.nit:59 */
		goto label3;
		}
		CALL_abstract_collection___Iterator___next(fra.me.REG[2])(fra.me.REG[2]);
              }
              label3: while(0);
              REGB0 = TAG_Bool(fra.me.REG[1]==NIT_NULL);
              /* ./icode//icode_tools.nit:62 */
              if (UNTAG_Bool(REGB0)) {
		fprintf(stderr, "Reciever is null");
		fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 62);
		nit_exit(1);
              }
              fra.me.REG[2] = CALL_icode_base___ICodeN___closure_defs(fra.me.REG[1])(fra.me.REG[1]);
              REGB0 = TAG_Bool((fra.me.REG[1]!=NIT_NULL) && VAL_ISA(fra.me.REG[1], COLOR_IClosCall, ID_IClosCall)) /*cast IClosCall*/;
              /* ./icode//icode_tools.nit:63 */
              if (UNTAG_Bool(REGB0)) {
		REGB0 = TAG_Bool(fra.me.REG[1]==NIT_NULL);
		/* ./icode//icode_tools.nit:64 */
		if (UNTAG_Bool(REGB0)) {
		fprintf(stderr, "Reciever is null");
		fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 64);
		nit_exit(1);
		}
		fra.me.REG[3] = CALL_icode_base___IClosCall___break_seq(fra.me.REG[1])(fra.me.REG[1]);
		CALL_icode_tools___ICodeVisitor___visit_icode(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[3]);
              }
              REGB0 = TAG_Bool(fra.me.REG[2]==NIT_NULL);
              /* ./icode//icode_tools.nit:66 */
              if (UNTAG_Bool(REGB0)) {
              } else {
		REGB1 = TAG_Bool(fra.me.REG[2]==NIT_NULL);
		if (UNTAG_Bool(REGB1)) {
		REGB1 = TAG_Bool(false);
		REGB0 = REGB1;
		} else {
		REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[2])(fra.me.REG[2], NIT_NULL);
		REGB0 = REGB1;
		}
              }
              REGB0 = TAG_Bool(!UNTAG_Bool(REGB0));
              if (UNTAG_Bool(REGB0)) {
		/* ./icode//icode_tools.nit:67 */
		CALL_icode_tools___ICodeVisitor___visit_closure_defs(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[2]);
              }
            }
          }
        }
      }
    }
  }
  REGB0 = TAG_Bool(fra.me.REG[1]==NIT_NULL);
  /* ./icode//icode_tools.nit:70 */
  if (UNTAG_Bool(REGB0)) {
    fprintf(stderr, "Reciever is null");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 70);
    nit_exit(1);
  }
  fra.me.REG[2] = CALL_icode_base___ICode___result(fra.me.REG[1])(fra.me.REG[1]);
  REGB0 = TAG_Bool(fra.me.REG[2]==NIT_NULL);
  /* ./icode//icode_tools.nit:71 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    REGB1 = TAG_Bool(fra.me.REG[2]==NIT_NULL);
    if (UNTAG_Bool(REGB1)) {
      REGB1 = TAG_Bool(false);
      REGB0 = REGB1;
    } else {
      REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[2])(fra.me.REG[2], NIT_NULL);
      REGB0 = REGB1;
    }
  }
  REGB0 = TAG_Bool(!UNTAG_Bool(REGB0));
  if (UNTAG_Bool(REGB0)) {
    CALL_icode_tools___ICodeVisitor___visit_iregister_write(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1], fra.me.REG[2]);
  }
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return;
}
void icode_tools___ICodeVisitor___visit_closure_defs(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t REGB0;
  val_t REGB1;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 74;
  fra.me.meth = LOCATE_icode_tools___ICodeVisitor___visit_closure_defs;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[1] = CALL_abstract_collection___Collection___iterator(fra.me.REG[1])(fra.me.REG[1]);
  /* ./icode//icode_tools.nit:78 */
  while(1) {
    REGB0 = CALL_abstract_collection___Iterator___is_ok(fra.me.REG[1])(fra.me.REG[1]);
    if (UNTAG_Bool(REGB0)) {
      fra.me.REG[2] = CALL_abstract_collection___Iterator___item(fra.me.REG[1])(fra.me.REG[1]);
      REGB0 = TAG_Bool(fra.me.REG[2]==NIT_NULL);
      /* ./icode//icode_tools.nit:79 */
      if (UNTAG_Bool(REGB0)) {
      } else {
        REGB1 = TAG_Bool(fra.me.REG[2]==NIT_NULL);
        if (UNTAG_Bool(REGB1)) {
          REGB1 = TAG_Bool(false);
          REGB0 = REGB1;
        } else {
          REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[2])(fra.me.REG[2], NIT_NULL);
          REGB0 = REGB1;
        }
      }
      REGB0 = TAG_Bool(!UNTAG_Bool(REGB0));
      if (UNTAG_Bool(REGB0)) {
        /* ./icode//icode_tools.nit:80 */
        CALL_icode_tools___ICodeVisitor___visit_iroutine(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[2]);
      }
    } else {
      /* ./icode//icode_tools.nit:78 */
      goto label1;
    }
    CALL_abstract_collection___Iterator___next(fra.me.REG[1])(fra.me.REG[1]);
  }
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return;
}
void icode_tools___ICodeVisitor___visit_iroutine(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[1];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 85;
  fra.me.meth = LOCATE_icode_tools___ICodeVisitor___visit_iroutine;
  fra.me.has_broke = 0;
  fra.me.REG_size = 2;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[1] = CALL_icode_base___IRoutine___body(fra.me.REG[1])(fra.me.REG[1]);
  /* ./icode//icode_tools.nit:90 */
  CALL_icode_tools___ICodeVisitor___visit_icode(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1]);
  stack_frame_head = fra.me.prev;
  return;
}
void icode_tools___ICodeVisitor___init(val_t p0, int* init_table){
  int itpos0 = VAL2OBJ(p0)->vft[INIT_TABLE_POS_ICodeVisitor].i;
  struct {struct stack_frame_t me;} fra;
  val_t tmp;
  if (init_table[itpos0]) return;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 0;
  fra.me.meth = LOCATE_icode_tools___ICodeVisitor___init;
  fra.me.has_broke = 0;
  fra.me.REG_size = 0;
  stack_frame_head = fra.me.prev;
  init_table[itpos0] = 1;
  return;
}
val_t icode_tools___ICodeBuilder___is_currently_inlining_routine(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t REGB0;
  val_t REGB1;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 99;
  fra.me.meth = LOCATE_icode_tools___ICodeBuilder___is_currently_inlining_routine;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_builder___ICodeBuilder___iroutine(fra.me.REG[0])(fra.me.REG[0]);
  REGB0 = TAG_Bool(IS_EQUAL_OO(fra.me.REG[1],fra.me.REG[2]));
  /* ./icode//icode_tools.nit:102 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[2]);
    REGB0 = REGB1;
  }
  if (UNTAG_Bool(REGB0)) {
    REGB0 = TAG_Bool(true);
  } else {
    REGB1 = TAG_Bool(ATTR_icode_tools___ICodeBuilder____current_inlining(fra.me.REG[0])!=NIT_NULL);
    if (UNTAG_Bool(REGB1)) {
    } else {
      fprintf(stderr, "Uninitialized attribute %s", "_current_inlining");
      fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 102);
      nit_exit(1);
    }
    fra.me.REG[0] = ATTR_icode_tools___ICodeBuilder____current_inlining(fra.me.REG[0]);
    REGB1 = CALL_abstract_collection___Collection___has(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1]);
    REGB0 = REGB1;
  }
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return REGB0;
}
val_t icode_tools___ICodeBuilder___inline_routine(val_t p0, val_t p1, val_t p2, val_t p3){
  struct {struct stack_frame_t me; val_t MORE_REG[10];} fra;
  val_t REGB0;
  val_t REGB1;
  val_t REGB2;
  val_t REGB3;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 105;
  fra.me.meth = LOCATE_icode_tools___ICodeBuilder___inline_routine;
  fra.me.has_broke = 0;
  fra.me.REG_size = 11;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[3] = NIT_NULL;
  fra.me.REG[4] = NIT_NULL;
  fra.me.REG[5] = NIT_NULL;
  fra.me.REG[6] = NIT_NULL;
  fra.me.REG[7] = NIT_NULL;
  fra.me.REG[8] = NIT_NULL;
  fra.me.REG[9] = NIT_NULL;
  fra.me.REG[10] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = p2;
  fra.me.REG[3] = p3;
  REGB0 = CALL_icode_tools___ICodeBuilder___is_currently_inlining_routine(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1]);
  REGB0 = TAG_Bool(!UNTAG_Bool(REGB0));
  /* ./icode//icode_tools.nit:109 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Assert failed");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 109);
    nit_exit(1);
  }
  REGB0 = TAG_Bool(ATTR_icode_tools___ICodeBuilder____current_inlining(fra.me.REG[0])!=NIT_NULL);
  /* ./icode//icode_tools.nit:110 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Uninitialized attribute %s", "_current_inlining");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 110);
    nit_exit(1);
  }
  fra.me.REG[4] = ATTR_icode_tools___ICodeBuilder____current_inlining(fra.me.REG[0]);
  array___Array___add(fra.me.REG[4], fra.me.REG[1]);
  fra.me.REG[4] = NEW_ICodeDupContext_icode_tools___ICodeDupContext___init(fra.me.REG[0]);
  REGB0 = CALL_abstract_collection___Collection___length(fra.me.REG[2])(fra.me.REG[2]);
  fra.me.REG[5] = CALL_icode_base___IRoutine___params(fra.me.REG[1])(fra.me.REG[1]);
  REGB1 = CALL_abstract_collection___Collection___length(fra.me.REG[5])(fra.me.REG[5]);
  REGB2 = TAG_Bool(IS_EQUAL_OO(REGB0,REGB1));
  /* ./icode//icode_tools.nit:112 */
  if (UNTAG_Bool(REGB2)) {
  } else {
    REGB1 = TAG_Bool((REGB0)==(REGB1));
    REGB2 = REGB1;
  /* ./icode//icode_tools.nit:112 */
  }
  if (UNTAG_Bool(REGB2)) {
  } else {
    fprintf(stderr, "Assert failed");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 112);
    nit_exit(1);
  }
  fra.me.REG[5] = CALL_icode_base___IRoutine___closure_decls(fra.me.REG[1])(fra.me.REG[1]);
  REGB2 = TAG_Bool(fra.me.REG[3]==NIT_NULL);
  /* ./icode//icode_tools.nit:114 */
  if (UNTAG_Bool(REGB2)) {
  } else {
    REGB1 = TAG_Bool(fra.me.REG[3]==NIT_NULL);
    if (UNTAG_Bool(REGB1)) {
      REGB1 = TAG_Bool(false);
      REGB2 = REGB1;
    } else {
      REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[3])(fra.me.REG[3], NIT_NULL);
      REGB2 = REGB1;
    }
  }
  REGB2 = TAG_Bool(!UNTAG_Bool(REGB2));
  if (UNTAG_Bool(REGB2)) {
    REGB2 = TAG_Bool(fra.me.REG[3]==NIT_NULL);
    if (UNTAG_Bool(REGB2)) {
      fprintf(stderr, "Reciever is null");
      fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 114);
      nit_exit(1);
    }
    REGB2 = CALL_abstract_collection___Collection___length(fra.me.REG[3])(fra.me.REG[3]);
  } else {
    REGB1 = TAG_Int(0);
    REGB2 = REGB1;
  }
  REGB1 = TAG_Bool(fra.me.REG[5]==NIT_NULL);
  /* ./icode//icode_tools.nit:115 */
  if (UNTAG_Bool(REGB1)) {
  } else {
    REGB0 = TAG_Bool(fra.me.REG[5]==NIT_NULL);
    if (UNTAG_Bool(REGB0)) {
      REGB0 = TAG_Bool(false);
      REGB1 = REGB0;
    } else {
      REGB0 = CALL_kernel___Object_____eqeq(fra.me.REG[5])(fra.me.REG[5], NIT_NULL);
      REGB1 = REGB0;
    }
  }
  REGB1 = TAG_Bool(!UNTAG_Bool(REGB1));
  if (UNTAG_Bool(REGB1)) {
    REGB1 = TAG_Bool(fra.me.REG[5]==NIT_NULL);
    if (UNTAG_Bool(REGB1)) {
      fprintf(stderr, "Reciever is null");
      fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 115);
      nit_exit(1);
    }
    REGB1 = CALL_abstract_collection___Collection___length(fra.me.REG[5])(fra.me.REG[5]);
  } else {
    REGB0 = TAG_Int(0);
    REGB1 = REGB0;
  }
  REGB0 = TAG_Bool(UNTAG_Int(REGB2)<=UNTAG_Int(REGB1));
  /* ./icode//icode_tools.nit:116 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Assert failed");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 116);
    nit_exit(1);
  }
  REGB0 = TAG_Bool(ATTR_icode_tools___ICodeDupContext____registers(fra.me.REG[4])!=NIT_NULL);
  /* ./icode//icode_tools.nit:119 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Uninitialized attribute %s", "_registers");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 119);
    nit_exit(1);
  }
  fra.me.REG[6] = ATTR_icode_tools___ICodeDupContext____registers(fra.me.REG[4]);
  fra.me.REG[7] = CALL_icode_base___IRoutine___result(fra.me.REG[1])(fra.me.REG[1]);
  REGB0 = TAG_Bool(fra.me.REG[7]==NIT_NULL);
  /* ./icode//icode_tools.nit:121 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    REGB3 = TAG_Bool(fra.me.REG[7]==NIT_NULL);
    if (UNTAG_Bool(REGB3)) {
      REGB3 = TAG_Bool(false);
      REGB0 = REGB3;
    } else {
      REGB3 = CALL_kernel___Object_____eqeq(fra.me.REG[7])(fra.me.REG[7], NIT_NULL);
      REGB0 = REGB3;
    }
  }
  REGB0 = TAG_Bool(!UNTAG_Bool(REGB0));
  if (UNTAG_Bool(REGB0)) {
    REGB0 = TAG_Bool(fra.me.REG[7]==NIT_NULL);
    /* ./icode//icode_tools.nit:122 */
    if (UNTAG_Bool(REGB0)) {
      fprintf(stderr, "Reciever is null");
      fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 122);
      nit_exit(1);
    }
    fra.me.REG[8] = CALL_icode_base___IRegister___stype(fra.me.REG[7])(fra.me.REG[7]);
    fra.me.REG[8] = CALL_icode_builder___ICodeBuilder___new_register(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[8]);
    /* ./icode//icode_tools.nit:123 */
    CALL_abstract_collection___Map_____braeq(fra.me.REG[6])(fra.me.REG[6], fra.me.REG[7], fra.me.REG[8]);
    fra.me.REG[7] = fra.me.REG[8];
  /* ./icode//icode_tools.nit:124 */
  }
  fra.me.REG[8] = CALL_icode_base___IRoutine___registers(fra.me.REG[1])(fra.me.REG[1]);
  fra.me.REG[8] = CALL_abstract_collection___Collection___iterator(fra.me.REG[8])(fra.me.REG[8]);
  /* ./icode//icode_tools.nit:126 */
  while(1) {
    REGB0 = CALL_abstract_collection___Iterator___is_ok(fra.me.REG[8])(fra.me.REG[8]);
    if (UNTAG_Bool(REGB0)) {
      fra.me.REG[9] = CALL_abstract_collection___Iterator___item(fra.me.REG[8])(fra.me.REG[8]);
      REGB0 = CALL_abstract_collection___MapRead___has_key(fra.me.REG[6])(fra.me.REG[6], fra.me.REG[9]);
      REGB0 = TAG_Bool(!UNTAG_Bool(REGB0));
      /* ./icode//icode_tools.nit:127 */
      if (UNTAG_Bool(REGB0)) {
      } else {
        fprintf(stderr, "Assert failed");
        fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 127);
        nit_exit(1);
      }
      fra.me.REG[10] = CALL_icode_base___IRegister___stype(fra.me.REG[9])(fra.me.REG[9]);
      fra.me.REG[10] = CALL_icode_builder___ICodeBuilder___new_register(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[10]);
      /* ./icode//icode_tools.nit:128 */
      CALL_abstract_collection___Map_____braeq(fra.me.REG[6])(fra.me.REG[6], fra.me.REG[9], fra.me.REG[10]);
    } else {
      /* ./icode//icode_tools.nit:126 */
      goto label1;
    }
    CALL_abstract_collection___Iterator___next(fra.me.REG[8])(fra.me.REG[8]);
  }
  label1: while(0);
  REGB0 = TAG_Int(0);
  REGB3 = CALL_abstract_collection___Collection___length(fra.me.REG[2])(fra.me.REG[2]);
  fra.me.REG[8] = NEW_Range_range___Range___without_last(REGB0, REGB3);
  fra.me.REG[8] = CALL_abstract_collection___Collection___iterator(fra.me.REG[8])(fra.me.REG[8]);
  /* ./icode//icode_tools.nit:130 */
  while(1) {
    REGB3 = CALL_abstract_collection___Iterator___is_ok(fra.me.REG[8])(fra.me.REG[8]);
    if (UNTAG_Bool(REGB3)) {
      REGB3 = CALL_abstract_collection___Iterator___item(fra.me.REG[8])(fra.me.REG[8]);
      fra.me.REG[10] = CALL_icode_base___IRoutine___params(fra.me.REG[1])(fra.me.REG[1]);
      fra.me.REG[10] = CALL_abstract_collection___MapRead_____bra(fra.me.REG[10])(fra.me.REG[10], REGB3);
      fra.me.REG[9] = CALL_abstract_collection___MapRead_____bra(fra.me.REG[2])(fra.me.REG[2], REGB3);
      /* ./icode//icode_tools.nit:133 */
      CALL_abstract_collection___Map_____braeq(fra.me.REG[6])(fra.me.REG[6], fra.me.REG[10], fra.me.REG[9]);
    } else {
      /* ./icode//icode_tools.nit:130 */
      goto label2;
    }
    CALL_abstract_collection___Iterator___next(fra.me.REG[8])(fra.me.REG[8]);
  }
  label2: while(0);
  fra.me.REG[8] = CALL_icode_base___IRoutine___escape_marks(fra.me.REG[1])(fra.me.REG[1]);
  fra.me.REG[8] = CALL_abstract_collection___Collection___iterator(fra.me.REG[8])(fra.me.REG[8]);
  /* ./icode//icode_tools.nit:138 */
  while(1) {
    REGB3 = CALL_abstract_collection___Iterator___is_ok(fra.me.REG[8])(fra.me.REG[8]);
    if (UNTAG_Bool(REGB3)) {
      fra.me.REG[6] = CALL_abstract_collection___Iterator___item(fra.me.REG[8])(fra.me.REG[8]);
      fra.me.REG[2] = NEW_IEscapeMark_icode_base___IEscapeMark___init();
      fra.me.REG[9] = CALL_icode_builder___ICodeBuilder___iroutine(fra.me.REG[0])(fra.me.REG[0]);
      fra.me.REG[9] = CALL_icode_base___IRoutine___escape_marks(fra.me.REG[9])(fra.me.REG[9]);
      /* ./icode//icode_tools.nit:140 */
      CALL_abstract_collection___SimpleCollection___add(fra.me.REG[9])(fra.me.REG[9], fra.me.REG[2]);
      REGB3 = TAG_Bool(ATTR_icode_tools___ICodeDupContext____marks(fra.me.REG[4])!=NIT_NULL);
      /* ./icode//icode_tools.nit:141 */
      if (UNTAG_Bool(REGB3)) {
      } else {
        fprintf(stderr, "Uninitialized attribute %s", "_marks");
        fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 141);
        nit_exit(1);
      }
      fra.me.REG[9] = ATTR_icode_tools___ICodeDupContext____marks(fra.me.REG[4]);
      CALL_abstract_collection___Map_____braeq(fra.me.REG[9])(fra.me.REG[9], fra.me.REG[6], fra.me.REG[2]);
    } else {
      /* ./icode//icode_tools.nit:138 */
      goto label3;
    }
    CALL_abstract_collection___Iterator___next(fra.me.REG[8])(fra.me.REG[8]);
  }
  label3: while(0);
  REGB3 = TAG_Bool(fra.me.REG[5]==NIT_NULL);
  /* ./icode//icode_tools.nit:145 */
  if (UNTAG_Bool(REGB3)) {
  } else {
    REGB0 = TAG_Bool(fra.me.REG[5]==NIT_NULL);
    if (UNTAG_Bool(REGB0)) {
      REGB0 = TAG_Bool(false);
      REGB3 = REGB0;
    } else {
      REGB0 = CALL_kernel___Object_____eqeq(fra.me.REG[5])(fra.me.REG[5], NIT_NULL);
      REGB3 = REGB0;
    }
  }
  REGB3 = TAG_Bool(!UNTAG_Bool(REGB3));
  if (UNTAG_Bool(REGB3)) {
    REGB3 = TAG_Bool(ATTR_icode_tools___ICodeDupContext____closures(fra.me.REG[4])!=NIT_NULL);
    /* ./icode//icode_tools.nit:146 */
    if (UNTAG_Bool(REGB3)) {
    } else {
      fprintf(stderr, "Uninitialized attribute %s", "_closures");
      fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 146);
      nit_exit(1);
    }
    fra.me.REG[8] = ATTR_icode_tools___ICodeDupContext____closures(fra.me.REG[4]);
    REGB3 = TAG_Int(0);
    fra.me.REG[2] = NEW_Range_range___Range___without_last(REGB3, REGB2);
    fra.me.REG[2] = CALL_abstract_collection___Collection___iterator(fra.me.REG[2])(fra.me.REG[2]);
    /* ./icode//icode_tools.nit:147 */
    while(1) {
      REGB3 = CALL_abstract_collection___Iterator___is_ok(fra.me.REG[2])(fra.me.REG[2]);
      if (UNTAG_Bool(REGB3)) {
        REGB3 = CALL_abstract_collection___Iterator___item(fra.me.REG[2])(fra.me.REG[2]);
        REGB0 = TAG_Bool(fra.me.REG[5]==NIT_NULL);
        /* ./icode//icode_tools.nit:148 */
        if (UNTAG_Bool(REGB0)) {
          fprintf(stderr, "Reciever is null");
          fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 148);
          nit_exit(1);
        }
        fra.me.REG[6] = CALL_abstract_collection___MapRead_____bra(fra.me.REG[5])(fra.me.REG[5], REGB3);
        REGB0 = TAG_Bool(fra.me.REG[3]==NIT_NULL);
        if (UNTAG_Bool(REGB0)) {
          fprintf(stderr, "Reciever is null");
          fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 148);
          nit_exit(1);
        }
        fra.me.REG[9] = CALL_abstract_collection___MapRead_____bra(fra.me.REG[3])(fra.me.REG[3], REGB3);
        CALL_abstract_collection___Map_____braeq(fra.me.REG[8])(fra.me.REG[8], fra.me.REG[6], fra.me.REG[9]);
      } else {
        /* ./icode//icode_tools.nit:147 */
        goto label4;
      }
      CALL_abstract_collection___Iterator___next(fra.me.REG[2])(fra.me.REG[2]);
    }
    label4: while(0);
    fra.me.REG[2] = NEW_Range_range___Range___without_last(REGB2, REGB1);
    fra.me.REG[2] = CALL_abstract_collection___Collection___iterator(fra.me.REG[2])(fra.me.REG[2]);
    /* ./icode//icode_tools.nit:150 */
    while(1) {
      REGB1 = CALL_abstract_collection___Iterator___is_ok(fra.me.REG[2])(fra.me.REG[2]);
      if (UNTAG_Bool(REGB1)) {
        REGB1 = CALL_abstract_collection___Iterator___item(fra.me.REG[2])(fra.me.REG[2]);
        REGB2 = TAG_Bool(fra.me.REG[5]==NIT_NULL);
        /* ./icode//icode_tools.nit:151 */
        if (UNTAG_Bool(REGB2)) {
          fprintf(stderr, "Reciever is null");
          fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 151);
          nit_exit(1);
        }
        fra.me.REG[3] = CALL_abstract_collection___MapRead_____bra(fra.me.REG[5])(fra.me.REG[5], REGB1);
        CALL_abstract_collection___Map_____braeq(fra.me.REG[8])(fra.me.REG[8], fra.me.REG[3], NIT_NULL);
      } else {
        /* ./icode//icode_tools.nit:150 */
        goto label5;
      }
      CALL_abstract_collection___Iterator___next(fra.me.REG[2])(fra.me.REG[2]);
    }
    label5: while(0);
  }
  fra.me.REG[1] = CALL_icode_base___IRoutine___body(fra.me.REG[1])(fra.me.REG[1]);
  /* ./icode//icode_tools.nit:156 */
  CALL_icode_tools___ICode___dup_with(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[4]);
  REGB1 = TAG_Bool(ATTR_icode_tools___ICodeBuilder____current_inlining(fra.me.REG[0])!=NIT_NULL);
  /* ./icode//icode_tools.nit:157 */
  if (UNTAG_Bool(REGB1)) {
  } else {
    fprintf(stderr, "Uninitialized attribute %s", "_current_inlining");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 157);
    nit_exit(1);
  }
  fra.me.REG[0] = ATTR_icode_tools___ICodeBuilder____current_inlining(fra.me.REG[0]);
  CALL_abstract_collection___Sequence___pop(fra.me.REG[0])(fra.me.REG[0]);
  /* ./icode//icode_tools.nit:158 */
  goto label6;
  label6: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[7];
}
val_t icode_tools___ICodeDupContext___dup_ireg(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[1];} fra;
  val_t REGB0;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 164;
  fra.me.meth = LOCATE_icode_tools___ICodeDupContext___dup_ireg;
  fra.me.has_broke = 0;
  fra.me.REG_size = 2;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  REGB0 = TAG_Bool(ATTR_icode_tools___ICodeDupContext____registers(fra.me.REG[0])!=NIT_NULL);
  /* ./icode//icode_tools.nit:169 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Uninitialized attribute %s", "_registers");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 169);
    nit_exit(1);
  }
  fra.me.REG[0] = ATTR_icode_tools___ICodeDupContext____registers(fra.me.REG[0]);
  REGB0 = CALL_abstract_collection___MapRead___has_key(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1]);
  /* ./icode//icode_tools.nit:170 */
  if (UNTAG_Bool(REGB0)) {
    fra.me.REG[0] = CALL_abstract_collection___MapRead_____bra(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1]);
    /* ./icode//icode_tools.nit:171 */
    goto label1;
  } else {
    fra.me.REG[0] = fra.me.REG[1];
    /* ./icode//icode_tools.nit:173 */
    goto label1;
  }
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___ICodeDupContext___dup_iregs(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[3];} fra;
  val_t REGB0;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 177;
  fra.me.meth = LOCATE_icode_tools___ICodeDupContext___dup_iregs;
  fra.me.has_broke = 0;
  fra.me.REG_size = 4;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[3] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  REGB0 = CALL_abstract_collection___Collection___length(fra.me.REG[1])(fra.me.REG[1]);
  fra.me.REG[2] = NEW_Array_array___Array___with_capacity(REGB0);
  fra.me.REG[1] = CALL_abstract_collection___Collection___iterator(fra.me.REG[1])(fra.me.REG[1]);
  /* ./icode//icode_tools.nit:181 */
  while(1) {
    REGB0 = CALL_abstract_collection___Iterator___is_ok(fra.me.REG[1])(fra.me.REG[1]);
    if (UNTAG_Bool(REGB0)) {
      fra.me.REG[3] = CALL_abstract_collection___Iterator___item(fra.me.REG[1])(fra.me.REG[1]);
      fra.me.REG[3] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[3]);
      /* ./icode//icode_tools.nit:182 */
      array___Array___add(fra.me.REG[2], fra.me.REG[3]);
    } else {
      /* ./icode//icode_tools.nit:181 */
      goto label1;
    }
    CALL_abstract_collection___Iterator___next(fra.me.REG[1])(fra.me.REG[1]);
  }
  label1: while(0);
  /* ./icode//icode_tools.nit:184 */
  goto label2;
  label2: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[2];
}
val_t icode_tools___ICodeDupContext___dup_mark(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[1];} fra;
  val_t REGB0;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 191;
  fra.me.meth = LOCATE_icode_tools___ICodeDupContext___dup_mark;
  fra.me.has_broke = 0;
  fra.me.REG_size = 2;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  REGB0 = TAG_Bool(ATTR_icode_tools___ICodeDupContext____marks(fra.me.REG[0])!=NIT_NULL);
  /* ./icode//icode_tools.nit:196 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Uninitialized attribute %s", "_marks");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 196);
    nit_exit(1);
  }
  fra.me.REG[0] = ATTR_icode_tools___ICodeDupContext____marks(fra.me.REG[0]);
  REGB0 = CALL_abstract_collection___MapRead___has_key(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1]);
  /* ./icode//icode_tools.nit:197 */
  if (UNTAG_Bool(REGB0)) {
    fra.me.REG[0] = CALL_abstract_collection___MapRead_____bra(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1]);
    /* ./icode//icode_tools.nit:198 */
    goto label1;
  } else {
    fra.me.REG[0] = fra.me.REG[1];
    /* ./icode//icode_tools.nit:200 */
    goto label1;
  }
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
void icode_tools___ICodeDupContext___init(val_t p0, val_t p1, int* init_table){
  int itpos1 = VAL2OBJ(p0)->vft[INIT_TABLE_POS_ICodeDupContext].i;
  struct {struct stack_frame_t me; val_t MORE_REG[1];} fra;
  val_t tmp;
  if (init_table[itpos1]) return;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 214;
  fra.me.meth = LOCATE_icode_tools___ICodeDupContext___init;
  fra.me.has_broke = 0;
  fra.me.REG_size = 2;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  /* ./icode//icode_tools.nit:216 */
  ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[0]) = fra.me.REG[1];
  stack_frame_head = fra.me.prev;
  init_table[itpos1] = 1;
  return;
}
void icode_tools___ICode___dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[7];} fra;
  val_t REGB0;
  val_t REGB1;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 221;
  fra.me.meth = LOCATE_icode_tools___ICode___dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 8;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[3] = NIT_NULL;
  fra.me.REG[4] = NIT_NULL;
  fra.me.REG[5] = NIT_NULL;
  fra.me.REG[6] = NIT_NULL;
  fra.me.REG[7] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_tools___ICode___inner_dup_with(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1]);
  REGB0 = TAG_Bool(VAL_ISA(fra.me.REG[0], COLOR_ICodeN, ID_ICodeN)) /*cast ICodeN*/;
  /* ./icode//icode_tools.nit:225 */
  if (UNTAG_Bool(REGB0)) {
    REGB0 = TAG_Bool(VAL_ISA(fra.me.REG[2], COLOR_ICodeN, ID_ICodeN)) /*cast ICodeN*/;
    /* ./icode//icode_tools.nit:226 */
    if (UNTAG_Bool(REGB0)) {
    } else {
      fprintf(stderr, "Assert failed");
      fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 226);
      nit_exit(1);
    }
    fra.me.REG[3] = CALL_icode_base___ICodeN___closure_defs(fra.me.REG[0])(fra.me.REG[0]);
    REGB0 = TAG_Bool(fra.me.REG[3]==NIT_NULL);
    /* ./icode//icode_tools.nit:228 */
    if (UNTAG_Bool(REGB0)) {
    } else {
      REGB1 = TAG_Bool(fra.me.REG[3]==NIT_NULL);
      if (UNTAG_Bool(REGB1)) {
        REGB1 = TAG_Bool(false);
        REGB0 = REGB1;
      } else {
        REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[3])(fra.me.REG[3], NIT_NULL);
        REGB0 = REGB1;
      }
    }
    REGB0 = TAG_Bool(!UNTAG_Bool(REGB0));
    if (UNTAG_Bool(REGB0)) {
      REGB0 = TAG_Bool(fra.me.REG[3]==NIT_NULL);
      /* ./icode//icode_tools.nit:230 */
      if (UNTAG_Bool(REGB0)) {
        fprintf(stderr, "Reciever is null");
        fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 230);
        nit_exit(1);
      }
      REGB0 = CALL_abstract_collection___Collection___length(fra.me.REG[3])(fra.me.REG[3]);
      fra.me.REG[4] = NEW_Array_array___Array___with_capacity(REGB0);
      fra.me.REG[3] = CALL_abstract_collection___Collection___iterator(fra.me.REG[3])(fra.me.REG[3]);
      /* ./icode//icode_tools.nit:231 */
      while(1) {
        REGB0 = CALL_abstract_collection___Iterator___is_ok(fra.me.REG[3])(fra.me.REG[3]);
        if (UNTAG_Bool(REGB0)) {
          fra.me.REG[5] = CALL_abstract_collection___Iterator___item(fra.me.REG[3])(fra.me.REG[3]);
          REGB0 = TAG_Bool(fra.me.REG[5]==NIT_NULL);
          /* ./icode//icode_tools.nit:232 */
          if (UNTAG_Bool(REGB0)) {
          } else {
            REGB1 = TAG_Bool(fra.me.REG[5]==NIT_NULL);
            if (UNTAG_Bool(REGB1)) {
              REGB1 = TAG_Bool(false);
              REGB0 = REGB1;
            } else {
              REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[5])(fra.me.REG[5], NIT_NULL);
              REGB0 = REGB1;
            }
          }
          if (UNTAG_Bool(REGB0)) {
            /* ./icode//icode_tools.nit:233 */
            array___Array___add(fra.me.REG[4], NIT_NULL);
          } else {
            REGB0 = TAG_Bool(fra.me.REG[5]==NIT_NULL);
            /* ./icode//icode_tools.nit:235 */
            if (UNTAG_Bool(REGB0)) {
              fprintf(stderr, "Reciever is null");
              fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 235);
              nit_exit(1);
            }
            fra.me.REG[6] = CALL_icode_base___IRoutine___result(fra.me.REG[5])(fra.me.REG[5]);
            REGB0 = TAG_Bool(fra.me.REG[6]==NIT_NULL);
            /* ./icode//icode_tools.nit:236 */
            if (UNTAG_Bool(REGB0)) {
            } else {
              REGB1 = TAG_Bool(fra.me.REG[6]==NIT_NULL);
              if (UNTAG_Bool(REGB1)) {
		REGB1 = TAG_Bool(false);
		REGB0 = REGB1;
              } else {
		REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[6])(fra.me.REG[6], NIT_NULL);
		REGB0 = REGB1;
              }
            }
            REGB0 = TAG_Bool(!UNTAG_Bool(REGB0));
            if (UNTAG_Bool(REGB0)) {
              fra.me.REG[7] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[6]);
              fra.me.REG[6] = fra.me.REG[7];
            }
            REGB0 = TAG_Bool(fra.me.REG[5]==NIT_NULL);
            /* ./icode//icode_tools.nit:237 */
            if (UNTAG_Bool(REGB0)) {
              fprintf(stderr, "Reciever is null");
              fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 237);
              nit_exit(1);
            }
            fra.me.REG[7] = CALL_icode_base___IRoutine___params(fra.me.REG[5])(fra.me.REG[5]);
            fra.me.REG[7] = CALL_icode_tools___ICodeDupContext___dup_iregs(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[7]);
            fra.me.REG[6] = NEW_IClosureDef_icode_base___IClosureDef___init(fra.me.REG[7], fra.me.REG[6]);
            /* ./icode//icode_tools.nit:238 */
            array___Array___add(fra.me.REG[4], fra.me.REG[6]);
            REGB0 = TAG_Bool(fra.me.REG[5]==NIT_NULL);
            /* ./icode//icode_tools.nit:239 */
            if (UNTAG_Bool(REGB0)) {
              fprintf(stderr, "Reciever is null");
              fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 239);
              nit_exit(1);
            }
            fra.me.REG[5] = CALL_icode_base___IRoutine___body(fra.me.REG[5])(fra.me.REG[5]);
            fra.me.REG[6] = CALL_icode_base___IRoutine___body(fra.me.REG[6])(fra.me.REG[6]);
            CALL_icode_tools___ISeq___dup_seq_to(fra.me.REG[5])(fra.me.REG[5], fra.me.REG[1], fra.me.REG[6]);
          }
        } else {
          /* ./icode//icode_tools.nit:231 */
          goto label1;
        }
        CALL_abstract_collection___Iterator___next(fra.me.REG[3])(fra.me.REG[3]);
      }
      label1: while(0);
      /* ./icode//icode_tools.nit:242 */
      CALL_icode_base___ICodeN___closure_defs__eq(fra.me.REG[2])(fra.me.REG[2], fra.me.REG[4]);
    }
  }
  fra.me.REG[4] = CALL_icode_base___ICode___result(fra.me.REG[0])(fra.me.REG[0]);
  REGB0 = TAG_Bool(fra.me.REG[4]==NIT_NULL);
  /* ./icode//icode_tools.nit:246 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    REGB1 = TAG_Bool(fra.me.REG[4]==NIT_NULL);
    if (UNTAG_Bool(REGB1)) {
      REGB1 = TAG_Bool(false);
      REGB0 = REGB1;
    } else {
      REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[4])(fra.me.REG[4], NIT_NULL);
      REGB0 = REGB1;
    }
  }
  REGB0 = TAG_Bool(!UNTAG_Bool(REGB0));
  if (UNTAG_Bool(REGB0)) {
    fra.me.REG[4] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[4]);
    CALL_icode_base___ICode___result__eq(fra.me.REG[2])(fra.me.REG[2], fra.me.REG[4]);
  }
  fra.me.REG[0] = CALL_icode_base___ICode___location(fra.me.REG[0])(fra.me.REG[0]);
  /* ./icode//icode_tools.nit:247 */
  CALL_icode_base___ICode___location__eq(fra.me.REG[2])(fra.me.REG[2], fra.me.REG[0]);
  REGB0 = TAG_Bool(ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1])!=NIT_NULL);
  /* ./icode//icode_tools.nit:248 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Uninitialized attribute %s", "_icb");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 248);
    nit_exit(1);
  }
  fra.me.REG[1] = ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1]);
  fra.me.REG[1] = CALL_icode_builder___ICodeBuilder___seq(fra.me.REG[1])(fra.me.REG[1]);
  fra.me.REG[1] = CALL_icode_base___ISeq___icodes(fra.me.REG[1])(fra.me.REG[1]);
  CALL_abstract_collection___SimpleCollection___add(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[2]);
  stack_frame_head = fra.me.prev;
  return;
}
val_t icode_tools___ICode___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me;} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 251;
  fra.me.meth = LOCATE_icode_tools___ICode___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 0;
  /* ./icode//icode_tools.nit:251 */
  fprintf(stderr, "Deferred method called");
  fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 251);
  nit_exit(1);
  stack_frame_head = fra.me.prev;
  return NIT_NULL;
}
val_t icode_tools___ISeq___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 256;
  fra.me.meth = LOCATE_icode_tools___ISeq___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = NEW_ISeq_icode_base___ISeq___init();
  /* ./icode//icode_tools.nit:259 */
  CALL_icode_tools___ISeq___dup_seq_to(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1], fra.me.REG[2]);
  /* ./icode//icode_tools.nit:260 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[2];
}
void icode_tools___ISeq___dup_seq_to(val_t p0, val_t p1, val_t p2){
  struct {struct stack_frame_t me; val_t MORE_REG[5];} fra;
  val_t REGB0;
  val_t REGB1;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 263;
  fra.me.meth = LOCATE_icode_tools___ISeq___dup_seq_to;
  fra.me.has_broke = 0;
  fra.me.REG_size = 6;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[3] = NIT_NULL;
  fra.me.REG[4] = NIT_NULL;
  fra.me.REG[5] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = p2;
  REGB0 = TAG_Bool(ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1])!=NIT_NULL);
  /* ./icode//icode_tools.nit:267 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Uninitialized attribute %s", "_icb");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 267);
    nit_exit(1);
  }
  fra.me.REG[3] = ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1]);
  fra.me.REG[3] = CALL_icode_builder___ICodeBuilder___seq(fra.me.REG[3])(fra.me.REG[3]);
  REGB0 = TAG_Bool(ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1])!=NIT_NULL);
  /* ./icode//icode_tools.nit:268 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Uninitialized attribute %s", "_icb");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 268);
    nit_exit(1);
  }
  fra.me.REG[4] = ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1]);
  CALL_icode_builder___ICodeBuilder___seq__eq(fra.me.REG[4])(fra.me.REG[4], fra.me.REG[2]);
  fra.me.REG[4] = CALL_icode_base___ISeq___icodes(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[4] = CALL_abstract_collection___Collection___iterator(fra.me.REG[4])(fra.me.REG[4]);
  /* ./icode//icode_tools.nit:269 */
  while(1) {
    REGB0 = CALL_abstract_collection___Iterator___is_ok(fra.me.REG[4])(fra.me.REG[4]);
    if (UNTAG_Bool(REGB0)) {
      fra.me.REG[5] = CALL_abstract_collection___Iterator___item(fra.me.REG[4])(fra.me.REG[4]);
      /* ./icode//icode_tools.nit:270 */
      CALL_icode_tools___ICode___dup_with(fra.me.REG[5])(fra.me.REG[5], fra.me.REG[1]);
    } else {
      /* ./icode//icode_tools.nit:269 */
      goto label1;
    }
    CALL_abstract_collection___Iterator___next(fra.me.REG[4])(fra.me.REG[4]);
  }
  label1: while(0);
  REGB0 = TAG_Bool(ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1])!=NIT_NULL);
  /* ./icode//icode_tools.nit:272 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Uninitialized attribute %s", "_icb");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 272);
    nit_exit(1);
  }
  fra.me.REG[4] = ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1]);
  CALL_icode_builder___ICodeBuilder___seq__eq(fra.me.REG[4])(fra.me.REG[4], fra.me.REG[3]);
  fra.me.REG[3] = CALL_icode_base___ISeq___iescape_mark(fra.me.REG[2])(fra.me.REG[2]);
  REGB0 = TAG_Bool(fra.me.REG[3]==NIT_NULL);
  /* ./icode//icode_tools.nit:273 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    REGB1 = TAG_Bool(fra.me.REG[3]==NIT_NULL);
    if (UNTAG_Bool(REGB1)) {
      REGB1 = TAG_Bool(false);
      REGB0 = REGB1;
    } else {
      REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[3])(fra.me.REG[3], NIT_NULL);
      REGB0 = REGB1;
    }
  }
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Assert failed");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 273);
    nit_exit(1);
  }
  fra.me.REG[0] = CALL_icode_base___ISeq___iescape_mark(fra.me.REG[0])(fra.me.REG[0]);
  REGB0 = TAG_Bool(fra.me.REG[0]==NIT_NULL);
  /* ./icode//icode_tools.nit:275 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    REGB1 = TAG_Bool(fra.me.REG[0]==NIT_NULL);
    if (UNTAG_Bool(REGB1)) {
      REGB1 = TAG_Bool(false);
      REGB0 = REGB1;
    } else {
      REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[0])(fra.me.REG[0], NIT_NULL);
      REGB0 = REGB1;
    }
  }
  REGB0 = TAG_Bool(!UNTAG_Bool(REGB0));
  if (UNTAG_Bool(REGB0)) {
    fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_mark(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
    /* ./icode//icode_tools.nit:276 */
    CALL_icode_base___ISeq___iescape_mark__eq(fra.me.REG[2])(fra.me.REG[2], fra.me.REG[0]);
  }
  stack_frame_head = fra.me.prev;
  return;
}
val_t icode_tools___ILoop___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 282;
  fra.me.meth = LOCATE_icode_tools___ILoop___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = NEW_ILoop_icode_base___ILoop___init();
  /* ./icode//icode_tools.nit:285 */
  CALL_icode_tools___ISeq___dup_seq_to(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1], fra.me.REG[2]);
  /* ./icode//icode_tools.nit:286 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[2];
}
val_t icode_tools___IIf___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[4];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 291;
  fra.me.meth = LOCATE_icode_tools___IIf___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 5;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[3] = NIT_NULL;
  fra.me.REG[4] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_base___ICode1___expr(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[2] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[2]);
  fra.me.REG[2] = NEW_IIf_icode_base___IIf___init(fra.me.REG[2]);
  fra.me.REG[3] = CALL_icode_base___IIf___then_seq(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[4] = CALL_icode_base___IIf___then_seq(fra.me.REG[2])(fra.me.REG[2]);
  /* ./icode//icode_tools.nit:294 */
  CALL_icode_tools___ISeq___dup_seq_to(fra.me.REG[3])(fra.me.REG[3], fra.me.REG[1], fra.me.REG[4]);
  fra.me.REG[0] = CALL_icode_base___IIf___else_seq(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[4] = CALL_icode_base___IIf___else_seq(fra.me.REG[2])(fra.me.REG[2]);
  /* ./icode//icode_tools.nit:295 */
  CALL_icode_tools___ISeq___dup_seq_to(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1], fra.me.REG[4]);
  /* ./icode//icode_tools.nit:296 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[2];
}
val_t icode_tools___IEscape___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[1];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 301;
  fra.me.meth = LOCATE_icode_tools___IEscape___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 2;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[0] = CALL_icode_base___IEscape___iescape_mark(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_mark(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
  fra.me.REG[0] = NEW_IEscape_icode_base___IEscape___init(fra.me.REG[0]);
  /* ./icode//icode_tools.nit:306 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___IAbort___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[1];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 311;
  fra.me.meth = LOCATE_icode_tools___IAbort___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 2;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[1] = CALL_icode_base___IAbort___texts(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_base___IAbort___module_location(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = NEW_IAbort_icode_base___IAbort___init(fra.me.REG[1], fra.me.REG[0]);
  /* ./icode//icode_tools.nit:313 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___ICall___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 318;
  fra.me.meth = LOCATE_icode_tools___ICall___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_base___IAbsCall___property(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_base___ICodeN___exprs(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_iregs(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
  fra.me.REG[0] = NEW_ICall_icode_base___ICall___init(fra.me.REG[2], fra.me.REG[0]);
  /* ./icode//icode_tools.nit:320 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___ISuper___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 325;
  fra.me.meth = LOCATE_icode_tools___ISuper___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_base___IAbsCall___property(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_base___ICodeN___exprs(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_iregs(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
  fra.me.REG[0] = NEW_ISuper_icode_base___ISuper___init(fra.me.REG[2], fra.me.REG[0]);
  /* ./icode//icode_tools.nit:327 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___INew___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[3];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 332;
  fra.me.meth = LOCATE_icode_tools___INew___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 4;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[3] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_base___INew___stype(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[3] = CALL_icode_base___IAbsCall___property(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_base___ICodeN___exprs(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_iregs(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
  fra.me.REG[0] = NEW_INew_icode_base___INew___init(fra.me.REG[2], fra.me.REG[3], fra.me.REG[0]);
  /* ./icode//icode_tools.nit:334 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___IAllocateInstance___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[1];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 339;
  fra.me.meth = LOCATE_icode_tools___IAllocateInstance___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 2;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[0] = CALL_icode_base___IAllocateInstance___stype(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = NEW_IAllocateInstance_icode_base___IAllocateInstance___init(fra.me.REG[0]);
  /* ./icode//icode_tools.nit:341 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___IStaticCall___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 346;
  fra.me.meth = LOCATE_icode_tools___IStaticCall___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_base___IAbsCall___property(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_base___ICodeN___exprs(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_iregs(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
  fra.me.REG[0] = NEW_IStaticCall_icode_base___IStaticCall___init(fra.me.REG[2], fra.me.REG[0]);
  /* ./icode//icode_tools.nit:348 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___ICheckInstance___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 353;
  fra.me.meth = LOCATE_icode_tools___ICheckInstance___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_base___ICheckInstance___stype(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_base___ICode1___expr(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
  fra.me.REG[0] = NEW_ICheckInstance_icode_base___ICheckInstance___init(fra.me.REG[2], fra.me.REG[0]);
  /* ./icode//icode_tools.nit:355 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___IInitAttributes___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 360;
  fra.me.meth = LOCATE_icode_tools___IInitAttributes___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_base___IInitAttributes___stype(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_base___ICode1___expr(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
  fra.me.REG[0] = NEW_IInitAttributes_icode_base___IInitAttributes___init(fra.me.REG[2], fra.me.REG[0]);
  /* ./icode//icode_tools.nit:362 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
void icode_tools___IClosCall___dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[4];} fra;
  val_t REGB0;
  val_t REGB1;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 367;
  fra.me.meth = LOCATE_icode_tools___IClosCall___dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 5;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[3] = NIT_NULL;
  fra.me.REG[4] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  REGB0 = TAG_Bool(ATTR_icode_tools___ICodeDupContext____closures(fra.me.REG[1])!=NIT_NULL);
  /* ./icode//icode_tools.nit:369 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Uninitialized attribute %s", "_closures");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 369);
    nit_exit(1);
  }
  fra.me.REG[2] = ATTR_icode_tools___ICodeDupContext____closures(fra.me.REG[1]);
  fra.me.REG[3] = CALL_icode_base___IClosCall___closure_decl(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[3] = CALL_abstract_collection___MapRead_____bra(fra.me.REG[2])(fra.me.REG[2], fra.me.REG[3]);
  REGB0 = TAG_Bool(fra.me.REG[3]==NIT_NULL);
  /* ./icode//icode_tools.nit:370 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    REGB1 = TAG_Bool(fra.me.REG[3]==NIT_NULL);
    if (UNTAG_Bool(REGB1)) {
      REGB1 = TAG_Bool(false);
      REGB0 = REGB1;
    } else {
      REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[3])(fra.me.REG[3], NIT_NULL);
      REGB0 = REGB1;
    }
  }
  if (UNTAG_Bool(REGB0)) {
    /* ./icode//icode_tools.nit:372 */
    goto label1;
  }
  fra.me.REG[2] = CALL_icode_base___IClosCall___break_seq(fra.me.REG[0])(fra.me.REG[0]);
  REGB0 = TAG_Bool(fra.me.REG[2]==NIT_NULL);
  /* ./icode//icode_tools.nit:375 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    REGB1 = TAG_Bool(fra.me.REG[2]==NIT_NULL);
    if (UNTAG_Bool(REGB1)) {
      REGB1 = TAG_Bool(false);
      REGB0 = REGB1;
    } else {
      REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[2])(fra.me.REG[2], NIT_NULL);
      REGB0 = REGB1;
    }
  }
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Assert failed");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 375);
    nit_exit(1);
  }
  REGB0 = TAG_Bool(ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1])!=NIT_NULL);
  /* ./icode//icode_tools.nit:376 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Uninitialized attribute %s", "_icb");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 376);
    nit_exit(1);
  }
  fra.me.REG[2] = ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1]);
  fra.me.REG[4] = CALL_icode_base___ICodeN___exprs(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[4] = CALL_icode_tools___ICodeDupContext___dup_iregs(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[4]);
  fra.me.REG[4] = CALL_icode_tools___ICodeBuilder___inline_routine(fra.me.REG[2])(fra.me.REG[2], fra.me.REG[3], fra.me.REG[4], NIT_NULL);
  fra.me.REG[3] = CALL_icode_base___ICode___result(fra.me.REG[0])(fra.me.REG[0]);
  REGB0 = TAG_Bool(fra.me.REG[3]==NIT_NULL);
  /* ./icode//icode_tools.nit:377 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    REGB1 = TAG_Bool(fra.me.REG[3]==NIT_NULL);
    if (UNTAG_Bool(REGB1)) {
      REGB1 = TAG_Bool(false);
      REGB0 = REGB1;
    } else {
      REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[3])(fra.me.REG[3], NIT_NULL);
      REGB0 = REGB1;
    }
  }
  REGB0 = TAG_Bool(!UNTAG_Bool(REGB0));
  if (UNTAG_Bool(REGB0)) {
    REGB0 = TAG_Bool(fra.me.REG[4]==NIT_NULL);
    /* ./icode//icode_tools.nit:378 */
    if (UNTAG_Bool(REGB0)) {
    } else {
      REGB1 = TAG_Bool(fra.me.REG[4]==NIT_NULL);
      if (UNTAG_Bool(REGB1)) {
        REGB1 = TAG_Bool(false);
        REGB0 = REGB1;
      } else {
        REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[4])(fra.me.REG[4], NIT_NULL);
        REGB0 = REGB1;
      }
    }
    REGB0 = TAG_Bool(!UNTAG_Bool(REGB0));
    if (UNTAG_Bool(REGB0)) {
    } else {
      fprintf(stderr, "Assert failed");
      fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 378);
      nit_exit(1);
    }
    REGB0 = TAG_Bool(ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1])!=NIT_NULL);
    /* ./icode//icode_tools.nit:379 */
    if (UNTAG_Bool(REGB0)) {
    } else {
      fprintf(stderr, "Uninitialized attribute %s", "_icb");
      fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 379);
      nit_exit(1);
    }
    fra.me.REG[3] = ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1]);
    fra.me.REG[0] = CALL_icode_base___ICode___result(fra.me.REG[0])(fra.me.REG[0]);
    REGB0 = TAG_Bool((fra.me.REG[0]!=NIT_NULL) && VAL_ISA(fra.me.REG[0], COLOR_IRegister, ID_IRegister)) /*cast IRegister*/;
    if (UNTAG_Bool(REGB0)) {
    } else {
      fprintf(stderr, "Cast failed");
      fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 379);
      nit_exit(1);
    }
    fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
    fra.me.REG[4] = NEW_IMove_icode_base___IMove___init(fra.me.REG[0], fra.me.REG[4]);
    CALL_icode_builder___ICodeBuilder___stmt(fra.me.REG[3])(fra.me.REG[3], fra.me.REG[4]);
  }
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return;
}
val_t icode_tools___INative___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[3];} fra;
  val_t REGB0;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 385;
  fra.me.meth = LOCATE_icode_tools___INative___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 4;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[3] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_base___INative___code(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[3] = CALL_icode_base___ICodeN___exprs(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[3] = CALL_icode_tools___ICodeDupContext___dup_iregs(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[3]);
  fra.me.REG[3] = NEW_INative_icode_base___INative___init(fra.me.REG[2], fra.me.REG[3]);
  REGB0 = CALL_icode_base___ICode___is_pure(fra.me.REG[0])(fra.me.REG[0]);
  /* ./icode//icode_tools.nit:388 */
  CALL_icode_base___INative___is_pure__eq(fra.me.REG[3])(fra.me.REG[3], REGB0);
  /* ./icode//icode_tools.nit:389 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[3];
}
val_t icode_tools___IMove___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t REGB0;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 394;
  fra.me.meth = LOCATE_icode_tools___IMove___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_base___ICode___result(fra.me.REG[0])(fra.me.REG[0]);
  REGB0 = TAG_Bool((fra.me.REG[2]!=NIT_NULL) && VAL_ISA(fra.me.REG[2], COLOR_IRegister, ID_IRegister)) /*cast IRegister*/;
  /* ./icode//icode_tools.nit:396 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Cast failed");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 396);
    nit_exit(1);
  }
  fra.me.REG[2] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[2]);
  fra.me.REG[0] = CALL_icode_base___ICode1___expr(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
  fra.me.REG[0] = NEW_IMove_icode_base___IMove___init(fra.me.REG[2], fra.me.REG[0]);
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___IAttrRead___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 401;
  fra.me.meth = LOCATE_icode_tools___IAttrRead___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_base___IAttrRead___property(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_base___ICode1___expr(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
  fra.me.REG[0] = NEW_IAttrRead_icode_base___IAttrRead___init(fra.me.REG[2], fra.me.REG[0]);
  /* ./icode//icode_tools.nit:403 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___IAttrWrite___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[3];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 408;
  fra.me.meth = LOCATE_icode_tools___IAttrWrite___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 4;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[3] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_base___IAttrWrite___property(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[3] = CALL_icode_base___ICode2___expr1(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[3] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[3]);
  fra.me.REG[0] = CALL_icode_base___ICode2___expr2(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
  fra.me.REG[0] = NEW_IAttrWrite_icode_base___IAttrWrite___init(fra.me.REG[2], fra.me.REG[3], fra.me.REG[0]);
  /* ./icode//icode_tools.nit:410 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___IAttrIsset___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 415;
  fra.me.meth = LOCATE_icode_tools___IAttrIsset___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_base___IAttrIsset___property(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_base___ICode1___expr(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
  fra.me.REG[0] = NEW_IAttrIsset_icode_base___IAttrIsset___init(fra.me.REG[2], fra.me.REG[0]);
  /* ./icode//icode_tools.nit:417 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___ITypeCheck___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 422;
  fra.me.meth = LOCATE_icode_tools___ITypeCheck___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_base___ICode1___expr(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[2] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[2]);
  fra.me.REG[0] = CALL_icode_base___ITypeCheck___stype(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = NEW_ITypeCheck_icode_base___ITypeCheck___init(fra.me.REG[2], fra.me.REG[0]);
  /* ./icode//icode_tools.nit:424 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___IIs___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[2];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 429;
  fra.me.meth = LOCATE_icode_tools___IIs___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 3;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = CALL_icode_base___ICode2___expr1(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[2] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[2]);
  fra.me.REG[0] = CALL_icode_base___ICode2___expr2(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
  fra.me.REG[0] = NEW_IIs_icode_base___IIs___init(fra.me.REG[2], fra.me.REG[0]);
  /* ./icode//icode_tools.nit:431 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___INot___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[1];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 436;
  fra.me.meth = LOCATE_icode_tools___INot___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 2;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[0] = CALL_icode_base___ICode1___expr(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
  fra.me.REG[0] = NEW_INot_icode_base___INot___init(fra.me.REG[0]);
  /* ./icode//icode_tools.nit:438 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[0];
}
val_t icode_tools___IOnce___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[3];} fra;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 443;
  fra.me.meth = LOCATE_icode_tools___IOnce___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 4;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[3] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  fra.me.REG[2] = NEW_IOnce_icode_base___IOnce___init();
  fra.me.REG[0] = CALL_icode_base___IOnce___body(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[3] = CALL_icode_base___IOnce___body(fra.me.REG[2])(fra.me.REG[2]);
  /* ./icode//icode_tools.nit:446 */
  CALL_icode_tools___ISeq___dup_seq_to(fra.me.REG[0])(fra.me.REG[0], fra.me.REG[1], fra.me.REG[3]);
  /* ./icode//icode_tools.nit:447 */
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[2];
}
val_t icode_tools___IHasClos___inner_dup_with(val_t p0, val_t p1){
  struct {struct stack_frame_t me; val_t MORE_REG[3];} fra;
  val_t REGB0;
  val_t REGB1;
  val_t tmp;
  fra.me.prev = stack_frame_head; stack_frame_head = &fra.me;
  fra.me.file = LOCATE_icode_tools;
  fra.me.line = 452;
  fra.me.meth = LOCATE_icode_tools___IHasClos___inner_dup_with;
  fra.me.has_broke = 0;
  fra.me.REG_size = 4;
  fra.me.REG[0] = NIT_NULL;
  fra.me.REG[1] = NIT_NULL;
  fra.me.REG[2] = NIT_NULL;
  fra.me.REG[3] = NIT_NULL;
  fra.me.REG[0] = p0;
  fra.me.REG[1] = p1;
  REGB0 = TAG_Bool(ATTR_icode_tools___ICodeDupContext____closures(fra.me.REG[1])!=NIT_NULL);
  /* ./icode//icode_tools.nit:454 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Uninitialized attribute %s", "_closures");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 454);
    nit_exit(1);
  }
  fra.me.REG[2] = ATTR_icode_tools___ICodeDupContext____closures(fra.me.REG[1]);
  fra.me.REG[3] = CALL_icode_base___IHasClos___closure_decl(fra.me.REG[0])(fra.me.REG[0]);
  fra.me.REG[3] = CALL_abstract_collection___MapRead_____bra(fra.me.REG[2])(fra.me.REG[2], fra.me.REG[3]);
  REGB0 = TAG_Bool(fra.me.REG[3]==NIT_NULL);
  /* ./icode//icode_tools.nit:456 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    REGB1 = TAG_Bool(fra.me.REG[3]==NIT_NULL);
    if (UNTAG_Bool(REGB1)) {
      REGB1 = TAG_Bool(false);
      REGB0 = REGB1;
    } else {
      REGB1 = CALL_kernel___Object_____eqeq(fra.me.REG[3])(fra.me.REG[3], NIT_NULL);
      REGB0 = REGB1;
    }
  }
  REGB0 = TAG_Bool(!UNTAG_Bool(REGB0));
  if (UNTAG_Bool(REGB0)) {
    REGB0 = TAG_Bool(ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1])!=NIT_NULL);
    /* ./icode//icode_tools.nit:457 */
    if (UNTAG_Bool(REGB0)) {
    } else {
      fprintf(stderr, "Uninitialized attribute %s", "_icb");
      fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 457);
      nit_exit(1);
    }
    fra.me.REG[3] = ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1]);
    fra.me.REG[3] = CALL_icode_builder___ICodeBuilder___lit_true_reg(fra.me.REG[3])(fra.me.REG[3]);
  } else {
    REGB0 = TAG_Bool(ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1])!=NIT_NULL);
    /* ./icode//icode_tools.nit:459 */
    if (UNTAG_Bool(REGB0)) {
    } else {
      fprintf(stderr, "Uninitialized attribute %s", "_icb");
      fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 459);
      nit_exit(1);
    }
    fra.me.REG[2] = ATTR_icode_tools___ICodeDupContext____icb(fra.me.REG[1]);
    fra.me.REG[2] = CALL_icode_builder___ICodeBuilder___lit_false_reg(fra.me.REG[2])(fra.me.REG[2]);
    fra.me.REG[3] = fra.me.REG[2];
  }
  fra.me.REG[0] = CALL_icode_base___ICode___result(fra.me.REG[0])(fra.me.REG[0]);
  REGB0 = TAG_Bool((fra.me.REG[0]!=NIT_NULL) && VAL_ISA(fra.me.REG[0], COLOR_IRegister, ID_IRegister)) /*cast IRegister*/;
  /* ./icode//icode_tools.nit:461 */
  if (UNTAG_Bool(REGB0)) {
  } else {
    fprintf(stderr, "Cast failed");
    fprintf(stderr, " (%s:%d)\n", LOCATE_icode_tools, 461);
    nit_exit(1);
  }
  fra.me.REG[0] = CALL_icode_tools___ICodeDupContext___dup_ireg(fra.me.REG[1])(fra.me.REG[1], fra.me.REG[0]);
  fra.me.REG[3] = NEW_IMove_icode_base___IMove___init(fra.me.REG[0], fra.me.REG[3]);
  goto label1;
  label1: while(0);
  stack_frame_head = fra.me.prev;
  return fra.me.REG[3];
}
