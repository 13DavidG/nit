#include "typing.sep.0.h"
/* method typing#AForExpr#method_next= for (self: AForExpr, nullable CallSite) */
void typing__AForExpr__method_next_61d(val* self, val* p0) {
self->attrs[COLOR_typing__AForExpr___method_next].val = p0; /* _method_next on <self:AForExpr> */
RET_LABEL:;
}
/* method typing#AForExpr#method_next= for (self: Object, nullable CallSite) */
void VIRTUAL_typing__AForExpr__method_next_61d(val* self, val* p0) {
{ /* Inline typing#AForExpr#method_next= (self,p0) on <self:Object(AForExpr)> */
self->attrs[COLOR_typing__AForExpr___method_next].val = p0; /* _method_next on <self:Object(AForExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
/* method typing#AForExpr#method_key for (self: AForExpr): nullable CallSite */
val* typing__AForExpr__method_key(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
var1 = self->attrs[COLOR_typing__AForExpr___method_key].val; /* _method_key on <self:AForExpr> */
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AForExpr#method_key for (self: Object): nullable CallSite */
val* VIRTUAL_typing__AForExpr__method_key(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
val* var3 /* : nullable CallSite */;
{ /* Inline typing#AForExpr#method_key (self) on <self:Object(AForExpr)> */
var3 = self->attrs[COLOR_typing__AForExpr___method_key].val; /* _method_key on <self:Object(AForExpr)> */
var1 = var3;
RET_LABEL2:(void)0;
}
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AForExpr#method_key= for (self: AForExpr, nullable CallSite) */
void typing__AForExpr__method_key_61d(val* self, val* p0) {
self->attrs[COLOR_typing__AForExpr___method_key].val = p0; /* _method_key on <self:AForExpr> */
RET_LABEL:;
}
/* method typing#AForExpr#method_key= for (self: Object, nullable CallSite) */
void VIRTUAL_typing__AForExpr__method_key_61d(val* self, val* p0) {
{ /* Inline typing#AForExpr#method_key= (self,p0) on <self:Object(AForExpr)> */
self->attrs[COLOR_typing__AForExpr___method_key].val = p0; /* _method_key on <self:Object(AForExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
/* method typing#AForExpr#method_finish for (self: AForExpr): nullable CallSite */
val* typing__AForExpr__method_finish(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
var1 = self->attrs[COLOR_typing__AForExpr___method_finish].val; /* _method_finish on <self:AForExpr> */
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AForExpr#method_finish for (self: Object): nullable CallSite */
val* VIRTUAL_typing__AForExpr__method_finish(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
val* var3 /* : nullable CallSite */;
{ /* Inline typing#AForExpr#method_finish (self) on <self:Object(AForExpr)> */
var3 = self->attrs[COLOR_typing__AForExpr___method_finish].val; /* _method_finish on <self:Object(AForExpr)> */
var1 = var3;
RET_LABEL2:(void)0;
}
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AForExpr#method_finish= for (self: AForExpr, nullable CallSite) */
void typing__AForExpr__method_finish_61d(val* self, val* p0) {
self->attrs[COLOR_typing__AForExpr___method_finish].val = p0; /* _method_finish on <self:AForExpr> */
RET_LABEL:;
}
/* method typing#AForExpr#method_finish= for (self: Object, nullable CallSite) */
void VIRTUAL_typing__AForExpr__method_finish_61d(val* self, val* p0) {
{ /* Inline typing#AForExpr#method_finish= (self,p0) on <self:Object(AForExpr)> */
self->attrs[COLOR_typing__AForExpr___method_finish].val = p0; /* _method_finish on <self:Object(AForExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
/* method typing#AForExpr#method_lt for (self: AForExpr): nullable CallSite */
val* typing__AForExpr__method_lt(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
var1 = self->attrs[COLOR_typing__AForExpr___method_lt].val; /* _method_lt on <self:AForExpr> */
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AForExpr#method_lt for (self: Object): nullable CallSite */
val* VIRTUAL_typing__AForExpr__method_lt(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
val* var3 /* : nullable CallSite */;
{ /* Inline typing#AForExpr#method_lt (self) on <self:Object(AForExpr)> */
var3 = self->attrs[COLOR_typing__AForExpr___method_lt].val; /* _method_lt on <self:Object(AForExpr)> */
var1 = var3;
RET_LABEL2:(void)0;
}
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AForExpr#method_lt= for (self: AForExpr, nullable CallSite) */
void typing__AForExpr__method_lt_61d(val* self, val* p0) {
self->attrs[COLOR_typing__AForExpr___method_lt].val = p0; /* _method_lt on <self:AForExpr> */
RET_LABEL:;
}
/* method typing#AForExpr#method_lt= for (self: Object, nullable CallSite) */
void VIRTUAL_typing__AForExpr__method_lt_61d(val* self, val* p0) {
{ /* Inline typing#AForExpr#method_lt= (self,p0) on <self:Object(AForExpr)> */
self->attrs[COLOR_typing__AForExpr___method_lt].val = p0; /* _method_lt on <self:Object(AForExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
/* method typing#AForExpr#method_successor for (self: AForExpr): nullable CallSite */
val* typing__AForExpr__method_successor(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
var1 = self->attrs[COLOR_typing__AForExpr___method_successor].val; /* _method_successor on <self:AForExpr> */
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AForExpr#method_successor for (self: Object): nullable CallSite */
val* VIRTUAL_typing__AForExpr__method_successor(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
val* var3 /* : nullable CallSite */;
{ /* Inline typing#AForExpr#method_successor (self) on <self:Object(AForExpr)> */
var3 = self->attrs[COLOR_typing__AForExpr___method_successor].val; /* _method_successor on <self:Object(AForExpr)> */
var1 = var3;
RET_LABEL2:(void)0;
}
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AForExpr#method_successor= for (self: AForExpr, nullable CallSite) */
void typing__AForExpr__method_successor_61d(val* self, val* p0) {
self->attrs[COLOR_typing__AForExpr___method_successor].val = p0; /* _method_successor on <self:AForExpr> */
RET_LABEL:;
}
/* method typing#AForExpr#method_successor= for (self: Object, nullable CallSite) */
void VIRTUAL_typing__AForExpr__method_successor_61d(val* self, val* p0) {
{ /* Inline typing#AForExpr#method_successor= (self,p0) on <self:Object(AForExpr)> */
self->attrs[COLOR_typing__AForExpr___method_successor].val = p0; /* _method_successor on <self:Object(AForExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
/* method typing#AForExpr#do_type_iterator for (self: AForExpr, TypeVisitor, MType) */
void typing__AForExpr__do_type_iterator(val* self, val* p0, val* p1) {
val* var_v /* var v: TypeVisitor */;
val* var_mtype /* var mtype: MType */;
short int var /* : Bool */;
int cltype;
int idtype;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
static val* varonce5;
val* var6 /* : String */;
char* var7 /* : NativeString */;
long var8 /* : Int */;
val* var9 /* : FlatString */;
val* var10 /* : nullable MClass */;
val* var_objcla /* var objcla: nullable MClass */;
val* var11 /* : null */;
short int var12 /* : Bool */;
short int var13 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var15 /* : Bool */;
short int var17 /* : Bool */;
static val* varonce18;
val* var19 /* : String */;
char* var20 /* : NativeString */;
long var21 /* : Int */;
val* var22 /* : FlatString */;
val* var23 /* : AExpr */;
val* var25 /* : AExpr */;
short int var26 /* : Bool */;
int cltype27;
int idtype28;
val* var29 /* : nullable CallSite */;
val* var_itdef /* var itdef: nullable CallSite */;
val* var30 /* : null */;
short int var31 /* : Bool */;
short int var32 /* : Bool */;
short int var34 /* : Bool */;
short int var36 /* : Bool */;
static val* varonce37;
val* var38 /* : String */;
char* var39 /* : NativeString */;
long var40 /* : Int */;
val* var41 /* : FlatString */;
static val* varonce42;
val* var43 /* : String */;
char* var44 /* : NativeString */;
long var45 /* : Int */;
val* var46 /* : FlatString */;
val* var47 /* : Array[Object] */;
long var48 /* : Int */;
val* var49 /* : NativeArray[Object] */;
val* var50 /* : String */;
val* var52 /* : MSignature */;
val* var54 /* : MSignature */;
val* var55 /* : nullable MType */;
val* var57 /* : nullable MType */;
val* var_ittype /* var ittype: nullable MType */;
val* var58 /* : null */;
short int var59 /* : Bool */;
short int var60 /* : Bool */;
short int var62 /* : Bool */;
short int var64 /* : Bool */;
static val* varonce65;
val* var66 /* : String */;
char* var67 /* : NativeString */;
long var68 /* : Int */;
val* var69 /* : FlatString */;
static val* varonce70;
val* var71 /* : String */;
char* var72 /* : NativeString */;
long var73 /* : Int */;
val* var74 /* : FlatString */;
val* var75 /* : nullable MClass */;
val* var_colit_cla /* var colit_cla: nullable MClass */;
static val* varonce76;
val* var77 /* : String */;
char* var78 /* : NativeString */;
long var79 /* : Int */;
val* var80 /* : FlatString */;
val* var81 /* : nullable MClass */;
val* var_mapit_cla /* var mapit_cla: nullable MClass */;
short int var82 /* : Bool */;
short int var_is_col /* var is_col: Bool */;
short int var83 /* : Bool */;
short int var_is_map /* var is_map: Bool */;
short int var84 /* : Bool */;
val* var85 /* : null */;
short int var86 /* : Bool */;
short int var87 /* : Bool */;
val* var_other89 /* var other: nullable Object */;
short int var90 /* : Bool */;
short int var91 /* : Bool */;
short int var92 /* : Bool */;
short int var_ /* var : Bool */;
val* var93 /* : Array[MType] */;
long var94 /* : Int */;
val* var_95 /* var : Array[MType] */;
val* var96 /* : MClassType */;
val* var98 /* : MClassType */;
val* var99 /* : MType */;
val* var100 /* : MClassType */;
short int var101 /* : Bool */;
val* var102 /* : MModule */;
val* var104 /* : MModule */;
val* var105 /* : nullable MClassType */;
val* var107 /* : nullable MClassType */;
val* var108 /* : MClassType */;
val* var_coltype /* var coltype: MClassType */;
val* var109 /* : nullable Array[Variable] */;
val* var111 /* : nullable Array[Variable] */;
val* var_variables /* var variables: nullable Array[Variable] */;
long var112 /* : Int */;
long var114 /* : Int */;
long var115 /* : Int */;
short int var116 /* : Bool */;
short int var117 /* : Bool */;
short int var119 /* : Bool */;
short int var120 /* : Bool */;
static val* varonce121;
val* var122 /* : String */;
char* var123 /* : NativeString */;
long var124 /* : Int */;
val* var125 /* : FlatString */;
val* var126 /* : nullable Object */;
val* var127 /* : Array[MType] */;
val* var129 /* : Array[MType] */;
val* var130 /* : nullable Object */;
short int var132 /* : Bool */;
short int var133 /* : Bool */;
val* var134 /* : null */;
short int var135 /* : Bool */;
short int var136 /* : Bool */;
short int var138 /* : Bool */;
short int var139 /* : Bool */;
short int var140 /* : Bool */;
short int var_141 /* var : Bool */;
val* var142 /* : Array[MType] */;
long var143 /* : Int */;
val* var_144 /* var : Array[MType] */;
val* var145 /* : MClassType */;
val* var147 /* : MClassType */;
val* var148 /* : MClassType */;
val* var150 /* : MClassType */;
val* var151 /* : MType */;
val* var152 /* : MClassType */;
short int var153 /* : Bool */;
val* var154 /* : MModule */;
val* var156 /* : MModule */;
val* var157 /* : nullable MClassType */;
val* var159 /* : nullable MClassType */;
val* var160 /* : MClassType */;
val* var_coltype161 /* var coltype: MClassType */;
val* var162 /* : nullable Array[Variable] */;
val* var164 /* : nullable Array[Variable] */;
val* var_variables165 /* var variables: nullable Array[Variable] */;
long var166 /* : Int */;
long var168 /* : Int */;
long var169 /* : Int */;
short int var170 /* : Bool */;
short int var171 /* : Bool */;
short int var173 /* : Bool */;
short int var174 /* : Bool */;
static val* varonce175;
val* var176 /* : String */;
char* var177 /* : NativeString */;
long var178 /* : Int */;
val* var179 /* : FlatString */;
long var180 /* : Int */;
val* var181 /* : nullable Object */;
val* var182 /* : Array[MType] */;
val* var184 /* : Array[MType] */;
long var185 /* : Int */;
val* var186 /* : nullable Object */;
long var188 /* : Int */;
val* var189 /* : nullable Object */;
val* var190 /* : Array[MType] */;
val* var192 /* : Array[MType] */;
long var193 /* : Int */;
val* var194 /* : nullable Object */;
short int var196 /* : Bool */;
short int var197 /* : Bool */;
short int var198 /* : Bool */;
short int var_199 /* var : Bool */;
short int var200 /* : Bool */;
static val* varonce201;
val* var202 /* : String */;
char* var203 /* : NativeString */;
long var204 /* : Int */;
val* var205 /* : FlatString */;
short int var206 /* : Bool */;
val* var207 /* : MType */;
val* var208 /* : MType */;
short int var209 /* : Bool */;
int cltype210;
int idtype211;
const char* var_class_name;
static val* varonce213;
val* var214 /* : String */;
char* var215 /* : NativeString */;
long var216 /* : Int */;
val* var217 /* : FlatString */;
short int var218 /* : Bool */;
val* var219 /* : nullable CallSite */;
val* var_ikdef /* var ikdef: nullable CallSite */;
val* var220 /* : null */;
short int var221 /* : Bool */;
short int var222 /* : Bool */;
short int var224 /* : Bool */;
short int var226 /* : Bool */;
static val* varonce227;
val* var228 /* : String */;
char* var229 /* : NativeString */;
long var230 /* : Int */;
val* var231 /* : FlatString */;
static val* varonce232;
val* var233 /* : String */;
char* var234 /* : NativeString */;
long var235 /* : Int */;
val* var236 /* : FlatString */;
val* var237 /* : Array[Object] */;
long var238 /* : Int */;
val* var239 /* : NativeArray[Object] */;
val* var240 /* : String */;
static val* varonce242;
val* var243 /* : String */;
char* var244 /* : NativeString */;
long var245 /* : Int */;
val* var246 /* : FlatString */;
short int var247 /* : Bool */;
val* var248 /* : nullable CallSite */;
val* var_itemdef /* var itemdef: nullable CallSite */;
val* var249 /* : null */;
short int var250 /* : Bool */;
short int var251 /* : Bool */;
short int var253 /* : Bool */;
short int var255 /* : Bool */;
static val* varonce256;
val* var257 /* : String */;
char* var258 /* : NativeString */;
long var259 /* : Int */;
val* var260 /* : FlatString */;
static val* varonce261;
val* var262 /* : String */;
char* var263 /* : NativeString */;
long var264 /* : Int */;
val* var265 /* : FlatString */;
val* var266 /* : Array[Object] */;
long var267 /* : Int */;
val* var268 /* : NativeArray[Object] */;
val* var269 /* : String */;
static val* varonce271;
val* var272 /* : String */;
char* var273 /* : NativeString */;
long var274 /* : Int */;
val* var275 /* : FlatString */;
short int var276 /* : Bool */;
val* var277 /* : nullable CallSite */;
val* var_nextdef /* var nextdef: nullable CallSite */;
val* var278 /* : null */;
short int var279 /* : Bool */;
short int var280 /* : Bool */;
short int var282 /* : Bool */;
short int var284 /* : Bool */;
static val* varonce285;
val* var286 /* : String */;
char* var287 /* : NativeString */;
long var288 /* : Int */;
val* var289 /* : FlatString */;
static val* varonce290;
val* var291 /* : String */;
char* var292 /* : NativeString */;
long var293 /* : Int */;
val* var294 /* : FlatString */;
val* var295 /* : Array[Object] */;
long var296 /* : Int */;
val* var297 /* : NativeArray[Object] */;
val* var298 /* : String */;
static val* varonce300;
val* var301 /* : String */;
char* var302 /* : NativeString */;
long var303 /* : Int */;
val* var304 /* : FlatString */;
short int var305 /* : Bool */;
val* var306 /* : nullable CallSite */;
static val* varonce308;
val* var309 /* : String */;
char* var310 /* : NativeString */;
long var311 /* : Int */;
val* var312 /* : FlatString */;
short int var313 /* : Bool */;
val* var314 /* : nullable CallSite */;
val* var_keydef /* var keydef: nullable CallSite */;
val* var315 /* : null */;
short int var316 /* : Bool */;
short int var317 /* : Bool */;
short int var319 /* : Bool */;
short int var321 /* : Bool */;
static val* varonce322;
val* var323 /* : String */;
char* var324 /* : NativeString */;
long var325 /* : Int */;
val* var326 /* : FlatString */;
static val* varonce327;
val* var328 /* : String */;
char* var329 /* : NativeString */;
long var330 /* : Int */;
val* var331 /* : FlatString */;
val* var332 /* : Array[Object] */;
long var333 /* : Int */;
val* var334 /* : NativeArray[Object] */;
val* var335 /* : String */;
short int var337 /* : Bool */;
val* var338 /* : nullable Array[Variable] */;
val* var340 /* : nullable Array[Variable] */;
long var341 /* : Int */;
long var343 /* : Int */;
long var344 /* : Int */;
short int var345 /* : Bool */;
short int var346 /* : Bool */;
short int var348 /* : Bool */;
short int var_349 /* var : Bool */;
val* var350 /* : AExpr */;
val* var352 /* : AExpr */;
short int var353 /* : Bool */;
int cltype354;
int idtype355;
val* var356 /* : nullable Array[Variable] */;
val* var358 /* : nullable Array[Variable] */;
val* var359 /* : nullable Object */;
val* var_variable /* var variable: Variable */;
val* var360 /* : nullable MType */;
val* var362 /* : nullable MType */;
val* var_vtype /* var vtype: MType */;
val* var363 /* : AExpr */;
val* var365 /* : AExpr */;
short int var366 /* : Bool */;
int cltype367;
int idtype368;
static val* varonce369;
val* var370 /* : String */;
char* var371 /* : NativeString */;
long var372 /* : Int */;
val* var373 /* : FlatString */;
short int var374 /* : Bool */;
val* var375 /* : nullable CallSite */;
static val* varonce377;
val* var378 /* : String */;
char* var379 /* : NativeString */;
long var380 /* : Int */;
val* var381 /* : FlatString */;
short int var382 /* : Bool */;
val* var383 /* : nullable CallSite */;
static val* varonce385;
val* var386 /* : String */;
char* var387 /* : NativeString */;
long var388 /* : Int */;
val* var389 /* : FlatString */;
short int var390 /* : Bool */;
val* var391 /* : nullable CallSite */;
var_v = p0;
var_mtype = p1;
/* <var_mtype:MType> isa MNullType */
cltype = type_model__MNullType.color;
idtype = type_model__MNullType.id;
if(cltype >= var_mtype->type->table_size) {
var = 0;
} else {
var = var_mtype->type->type_table[cltype] == idtype;
}
if (var){
if (varonce) {
var1 = varonce;
} else {
var2 = "Type error: \'for\' cannot iterate over \'null\'";
var3 = 44;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
{
typing__TypeVisitor__error(var_v, self, var1); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
if (varonce5) {
var6 = varonce5;
} else {
var7 = "Object";
var8 = 6;
var9 = string__NativeString__to_s_with_length(var7, var8);
var6 = var9;
varonce5 = var6;
}
{
var10 = typing__TypeVisitor__get_mclass(var_v, self, var6);
}
var_objcla = var10;
var11 = NULL;
if (var_objcla == NULL) {
var12 = 1; /* is null */
} else {
var12 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_objcla,var11) on <var_objcla:nullable MClass> */
var_other = var11;
{
{ /* Inline kernel#Object#is_same_instance (var_objcla,var_other) on <var_objcla:nullable MClass(MClass)> */
var17 = var_objcla == var_other;
var15 = var17;
goto RET_LABEL16;
RET_LABEL16:(void)0;
}
}
var13 = var15;
goto RET_LABEL14;
RET_LABEL14:(void)0;
}
var12 = var13;
}
if (var12){
goto RET_LABEL;
} else {
}
if (varonce18) {
var19 = varonce18;
} else {
var20 = "iterator";
var21 = 8;
var22 = string__NativeString__to_s_with_length(var20, var21);
var19 = var22;
varonce18 = var19;
}
{
{ /* Inline parser_nodes#AForExpr#n_expr (self) on <self:AForExpr> */
var25 = self->attrs[COLOR_parser_nodes__AForExpr___n_expr].val; /* _n_expr on <self:AForExpr> */
if (unlikely(var25 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1427);
show_backtrace(1);
}
var23 = var25;
RET_LABEL24:(void)0;
}
}
/* <var23:AExpr> isa ASelfExpr */
cltype27 = type_parser_nodes__ASelfExpr.color;
idtype28 = type_parser_nodes__ASelfExpr.id;
if(cltype27 >= var23->type->table_size) {
var26 = 0;
} else {
var26 = var23->type->type_table[cltype27] == idtype28;
}
{
var29 = typing__TypeVisitor__get_method(var_v, self, var_mtype, var19, var26);
}
var_itdef = var29;
var30 = NULL;
if (var_itdef == NULL) {
var31 = 1; /* is null */
} else {
var31 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_itdef,var30) on <var_itdef:nullable CallSite> */
var_other = var30;
{
{ /* Inline kernel#Object#is_same_instance (var_itdef,var_other) on <var_itdef:nullable CallSite(CallSite)> */
var36 = var_itdef == var_other;
var34 = var36;
goto RET_LABEL35;
RET_LABEL35:(void)0;
}
}
var32 = var34;
goto RET_LABEL33;
RET_LABEL33:(void)0;
}
var31 = var32;
}
if (var31){
if (varonce37) {
var38 = varonce37;
} else {
var39 = "Type Error: \'for\' expects a type providing \'iterator\' method, got \'";
var40 = 67;
var41 = string__NativeString__to_s_with_length(var39, var40);
var38 = var41;
varonce37 = var38;
}
if (varonce42) {
var43 = varonce42;
} else {
var44 = "\'.";
var45 = 2;
var46 = string__NativeString__to_s_with_length(var44, var45);
var43 = var46;
varonce42 = var43;
}
var47 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var47 = array_instance Array[Object] */
var48 = 3;
var49 = NEW_array__NativeArray(var48, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var49)->values[0] = (val*) var38;
((struct instance_array__NativeArray*)var49)->values[1] = (val*) var_mtype;
((struct instance_array__NativeArray*)var49)->values[2] = (val*) var43;
{
((void (*)(val*, val*, long))(var47->class->vft[COLOR_array__Array__with_native]))(var47, var49, var48) /* with_native on <var47:Array[Object]>*/;
}
}
{
var50 = ((val* (*)(val*))(var47->class->vft[COLOR_string__Object__to_s]))(var47) /* to_s on <var47:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var50); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
{
{ /* Inline typing#AForExpr#method_iterator= (self,var_itdef) on <self:AForExpr> */
self->attrs[COLOR_typing__AForExpr___method_iterator].val = var_itdef; /* _method_iterator on <self:AForExpr> */
RET_LABEL51:(void)0;
}
}
{
{ /* Inline typing#CallSite#msignature (var_itdef) on <var_itdef:nullable CallSite(CallSite)> */
var54 = var_itdef->attrs[COLOR_typing__CallSite___msignature].val; /* _msignature on <var_itdef:nullable CallSite(CallSite)> */
if (unlikely(var54 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _msignature");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 490);
show_backtrace(1);
}
var52 = var54;
RET_LABEL53:(void)0;
}
}
{
{ /* Inline model#MSignature#return_mtype (var52) on <var52:MSignature> */
var57 = var52->attrs[COLOR_model__MSignature___return_mtype].val; /* _return_mtype on <var52:MSignature> */
var55 = var57;
RET_LABEL56:(void)0;
}
}
var_ittype = var55;
var58 = NULL;
if (var_ittype == NULL) {
var59 = 1; /* is null */
} else {
var59 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_ittype,var58) on <var_ittype:nullable MType> */
var_other = var58;
{
{ /* Inline kernel#Object#is_same_instance (var_ittype,var_other) on <var_ittype:nullable MType(MType)> */
var64 = var_ittype == var_other;
var62 = var64;
goto RET_LABEL63;
RET_LABEL63:(void)0;
}
}
var60 = var62;
goto RET_LABEL61;
RET_LABEL61:(void)0;
}
var59 = var60;
}
if (var59){
if (varonce65) {
var66 = varonce65;
} else {
var67 = "Type Error: \'for\' expects method \'iterator\' to return an \'Iterator\' or \'MapIterator\' type\'.";
var68 = 91;
var69 = string__NativeString__to_s_with_length(var67, var68);
var66 = var69;
varonce65 = var66;
}
{
typing__TypeVisitor__error(var_v, self, var66); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
if (varonce70) {
var71 = varonce70;
} else {
var72 = "Iterator";
var73 = 8;
var74 = string__NativeString__to_s_with_length(var72, var73);
var71 = var74;
varonce70 = var71;
}
{
var75 = typing__TypeVisitor__try_get_mclass(var_v, self, var71);
}
var_colit_cla = var75;
if (varonce76) {
var77 = varonce76;
} else {
var78 = "MapIterator";
var79 = 11;
var80 = string__NativeString__to_s_with_length(var78, var79);
var77 = var80;
varonce76 = var77;
}
{
var81 = typing__TypeVisitor__try_get_mclass(var_v, self, var77);
}
var_mapit_cla = var81;
var82 = 0;
var_is_col = var82;
var83 = 0;
var_is_map = var83;
var85 = NULL;
if (var_colit_cla == NULL) {
var86 = 0; /* is null */
} else {
var86 = 1; /* arg is null and recv is not */
}
if (0) {
{ /* Inline kernel#Object#!= (var_colit_cla,var85) on <var_colit_cla:nullable MClass> */
var_other89 = var85;
{
var91 = ((short int (*)(val*, val*))(var_colit_cla->class->vft[COLOR_kernel__Object___61d_61d]))(var_colit_cla, var_other89) /* == on <var_colit_cla:nullable MClass(MClass)>*/;
var90 = var91;
}
var92 = !var90;
var87 = var92;
goto RET_LABEL88;
RET_LABEL88:(void)0;
}
var86 = var87;
}
var_ = var86;
if (var86){
var93 = NEW_array__Array(&type_array__Arraymodel__MType);
var94 = 1;
{
array__Array__with_capacity(var93, var94); /* Direct call array#Array#with_capacity on <var93:Array[MType]>*/
}
var_95 = var93;
{
{ /* Inline model#MClass#mclass_type (var_objcla) on <var_objcla:nullable MClass(MClass)> */
var98 = var_objcla->attrs[COLOR_model__MClass___mclass_type].val; /* _mclass_type on <var_objcla:nullable MClass(MClass)> */
if (unlikely(var98 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mclass_type");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 435);
show_backtrace(1);
}
var96 = var98;
RET_LABEL97:(void)0;
}
}
{
var99 = model__MType__as_nullable(var96);
}
{
array__AbstractArray__push(var_95, var99); /* Direct call array#AbstractArray#push on <var_95:Array[MType]>*/
}
{
var100 = model__MClass__get_mtype(var_colit_cla, var_95);
}
{
var101 = typing__TypeVisitor__is_subtype(var_v, var_ittype, var100);
}
var84 = var101;
} else {
var84 = var_;
}
if (var84){
{
{ /* Inline typing#TypeVisitor#mmodule (var_v) on <var_v:TypeVisitor> */
var104 = var_v->attrs[COLOR_typing__TypeVisitor___mmodule].val; /* _mmodule on <var_v:TypeVisitor> */
if (unlikely(var104 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mmodule");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 36);
show_backtrace(1);
}
var102 = var104;
RET_LABEL103:(void)0;
}
}
{
{ /* Inline typing#TypeVisitor#anchor (var_v) on <var_v:TypeVisitor> */
var107 = var_v->attrs[COLOR_typing__TypeVisitor___anchor].val; /* _anchor on <var_v:TypeVisitor> */
var105 = var107;
RET_LABEL106:(void)0;
}
}
{
var108 = model__MType__supertype_to(var_ittype, var102, var105, var_colit_cla);
}
var_coltype = var108;
{
{ /* Inline scope#AForExpr#variables (self) on <self:AForExpr> */
var111 = self->attrs[COLOR_scope__AForExpr___variables].val; /* _variables on <self:AForExpr> */
var109 = var111;
RET_LABEL110:(void)0;
}
}
var_variables = var109;
if (var_variables == NULL) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 956);
show_backtrace(1);
} else {
{ /* Inline array#AbstractArrayRead#length (var_variables) on <var_variables:nullable Array[Variable]> */
if (unlikely(var_variables == NULL)) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "../lib/standard/collection/array.nit", 24);
show_backtrace(1);
}
var114 = var_variables->attrs[COLOR_array__AbstractArrayRead___length].l; /* _length on <var_variables:nullable Array[Variable]> */
var112 = var114;
RET_LABEL113:(void)0;
}
}
var115 = 1;
{
{ /* Inline kernel#Int#!= (var112,var115) on <var112:Int> */
var119 = var112 == var115;
var120 = !var119;
var117 = var120;
goto RET_LABEL118;
RET_LABEL118:(void)0;
}
var116 = var117;
}
if (var116){
if (varonce121) {
var122 = varonce121;
} else {
var123 = "Type Error: \'for\' expects only one variable when using \'Iterator\'.";
var124 = 66;
var125 = string__NativeString__to_s_with_length(var123, var124);
var122 = var125;
varonce121 = var122;
}
{
typing__TypeVisitor__error(var_v, self, var122); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
} else {
if (var_variables == NULL) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 959);
show_backtrace(1);
} else {
var126 = abstract_collection__SequenceRead__first(var_variables);
}
{
{ /* Inline model#MClassType#arguments (var_coltype) on <var_coltype:MClassType> */
var129 = var_coltype->attrs[COLOR_model__MClassType___arguments].val; /* _arguments on <var_coltype:MClassType> */
if (unlikely(var129 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _arguments");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 996);
show_backtrace(1);
}
var127 = var129;
RET_LABEL128:(void)0;
}
}
{
var130 = abstract_collection__SequenceRead__first(var127);
}
{
{ /* Inline typing#Variable#declared_type= (var126,var130) on <var126:nullable Object(Variable)> */
var126->attrs[COLOR_typing__Variable___declared_type].val = var130; /* _declared_type on <var126:nullable Object(Variable)> */
RET_LABEL131:(void)0;
}
}
}
var132 = 1;
var_is_col = var132;
} else {
}
var134 = NULL;
if (var_mapit_cla == NULL) {
var135 = 0; /* is null */
} else {
var135 = 1; /* arg is null and recv is not */
}
if (0) {
{ /* Inline kernel#Object#!= (var_mapit_cla,var134) on <var_mapit_cla:nullable MClass> */
var_other89 = var134;
{
var139 = ((short int (*)(val*, val*))(var_mapit_cla->class->vft[COLOR_kernel__Object___61d_61d]))(var_mapit_cla, var_other89) /* == on <var_mapit_cla:nullable MClass(MClass)>*/;
var138 = var139;
}
var140 = !var138;
var136 = var140;
goto RET_LABEL137;
RET_LABEL137:(void)0;
}
var135 = var136;
}
var_141 = var135;
if (var135){
var142 = NEW_array__Array(&type_array__Arraymodel__MType);
var143 = 2;
{
array__Array__with_capacity(var142, var143); /* Direct call array#Array#with_capacity on <var142:Array[MType]>*/
}
var_144 = var142;
{
{ /* Inline model#MClass#mclass_type (var_objcla) on <var_objcla:nullable MClass(MClass)> */
var147 = var_objcla->attrs[COLOR_model__MClass___mclass_type].val; /* _mclass_type on <var_objcla:nullable MClass(MClass)> */
if (unlikely(var147 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mclass_type");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 435);
show_backtrace(1);
}
var145 = var147;
RET_LABEL146:(void)0;
}
}
{
array__AbstractArray__push(var_144, var145); /* Direct call array#AbstractArray#push on <var_144:Array[MType]>*/
}
{
{ /* Inline model#MClass#mclass_type (var_objcla) on <var_objcla:nullable MClass(MClass)> */
var150 = var_objcla->attrs[COLOR_model__MClass___mclass_type].val; /* _mclass_type on <var_objcla:nullable MClass(MClass)> */
if (unlikely(var150 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mclass_type");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 435);
show_backtrace(1);
}
var148 = var150;
RET_LABEL149:(void)0;
}
}
{
var151 = model__MType__as_nullable(var148);
}
{
array__AbstractArray__push(var_144, var151); /* Direct call array#AbstractArray#push on <var_144:Array[MType]>*/
}
{
var152 = model__MClass__get_mtype(var_mapit_cla, var_144);
}
{
var153 = typing__TypeVisitor__is_subtype(var_v, var_ittype, var152);
}
var133 = var153;
} else {
var133 = var_141;
}
if (var133){
{
{ /* Inline typing#TypeVisitor#mmodule (var_v) on <var_v:TypeVisitor> */
var156 = var_v->attrs[COLOR_typing__TypeVisitor___mmodule].val; /* _mmodule on <var_v:TypeVisitor> */
if (unlikely(var156 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mmodule");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 36);
show_backtrace(1);
}
var154 = var156;
RET_LABEL155:(void)0;
}
}
{
{ /* Inline typing#TypeVisitor#anchor (var_v) on <var_v:TypeVisitor> */
var159 = var_v->attrs[COLOR_typing__TypeVisitor___anchor].val; /* _anchor on <var_v:TypeVisitor> */
var157 = var159;
RET_LABEL158:(void)0;
}
}
{
var160 = model__MType__supertype_to(var_ittype, var154, var157, var_mapit_cla);
}
var_coltype161 = var160;
{
{ /* Inline scope#AForExpr#variables (self) on <self:AForExpr> */
var164 = self->attrs[COLOR_scope__AForExpr___variables].val; /* _variables on <self:AForExpr> */
var162 = var164;
RET_LABEL163:(void)0;
}
}
var_variables165 = var162;
if (var_variables165 == NULL) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 968);
show_backtrace(1);
} else {
{ /* Inline array#AbstractArrayRead#length (var_variables165) on <var_variables165:nullable Array[Variable]> */
if (unlikely(var_variables165 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "../lib/standard/collection/array.nit", 24);
show_backtrace(1);
}
var168 = var_variables165->attrs[COLOR_array__AbstractArrayRead___length].l; /* _length on <var_variables165:nullable Array[Variable]> */
var166 = var168;
RET_LABEL167:(void)0;
}
}
var169 = 2;
{
{ /* Inline kernel#Int#!= (var166,var169) on <var166:Int> */
var173 = var166 == var169;
var174 = !var173;
var171 = var174;
goto RET_LABEL172;
RET_LABEL172:(void)0;
}
var170 = var171;
}
if (var170){
if (varonce175) {
var176 = varonce175;
} else {
var177 = "Type Error: \'for\' expects two variables when using \'MapIterator\'.";
var178 = 65;
var179 = string__NativeString__to_s_with_length(var177, var178);
var176 = var179;
varonce175 = var176;
}
{
typing__TypeVisitor__error(var_v, self, var176); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
} else {
var180 = 0;
if (var_variables165 == NULL) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 971);
show_backtrace(1);
} else {
var181 = array__Array___91d_93d(var_variables165, var180);
}
{
{ /* Inline model#MClassType#arguments (var_coltype161) on <var_coltype161:MClassType> */
var184 = var_coltype161->attrs[COLOR_model__MClassType___arguments].val; /* _arguments on <var_coltype161:MClassType> */
if (unlikely(var184 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _arguments");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 996);
show_backtrace(1);
}
var182 = var184;
RET_LABEL183:(void)0;
}
}
var185 = 0;
{
var186 = array__Array___91d_93d(var182, var185);
}
{
{ /* Inline typing#Variable#declared_type= (var181,var186) on <var181:nullable Object(Variable)> */
var181->attrs[COLOR_typing__Variable___declared_type].val = var186; /* _declared_type on <var181:nullable Object(Variable)> */
RET_LABEL187:(void)0;
}
}
var188 = 1;
if (var_variables165 == NULL) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 972);
show_backtrace(1);
} else {
var189 = array__Array___91d_93d(var_variables165, var188);
}
{
{ /* Inline model#MClassType#arguments (var_coltype161) on <var_coltype161:MClassType> */
var192 = var_coltype161->attrs[COLOR_model__MClassType___arguments].val; /* _arguments on <var_coltype161:MClassType> */
if (unlikely(var192 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _arguments");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 996);
show_backtrace(1);
}
var190 = var192;
RET_LABEL191:(void)0;
}
}
var193 = 1;
{
var194 = array__Array___91d_93d(var190, var193);
}
{
{ /* Inline typing#Variable#declared_type= (var189,var194) on <var189:nullable Object(Variable)> */
var189->attrs[COLOR_typing__Variable___declared_type].val = var194; /* _declared_type on <var189:nullable Object(Variable)> */
RET_LABEL195:(void)0;
}
}
}
var196 = 1;
var_is_map = var196;
} else {
}
var198 = !var_is_col;
var_199 = var198;
if (var198){
var200 = !var_is_map;
var197 = var200;
} else {
var197 = var_199;
}
if (var197){
if (varonce201) {
var202 = varonce201;
} else {
var203 = "Type Error: \'for\' expects method \'iterator\' to return an \'Iterator\' or \'MapIterator\' type\'.";
var204 = 91;
var205 = string__NativeString__to_s_with_length(var203, var204);
var202 = var205;
varonce201 = var202;
}
{
typing__TypeVisitor__error(var_v, self, var202); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
{
var206 = ((short int (*)(val*))(var_mtype->class->vft[COLOR_model__MType__need_anchor]))(var_mtype) /* need_anchor on <var_mtype:MType>*/;
}
if (var206){
{
var207 = typing__TypeVisitor__anchor_to(var_v, var_mtype);
}
var_mtype = var207;
} else {
}
{
var208 = ((val* (*)(val*))(var_mtype->class->vft[COLOR_model__MType__as_notnullable]))(var_mtype) /* as_notnullable on <var_mtype:MType>*/;
}
var_mtype = var208;
/* <var_mtype:MType> isa MClassType */
cltype210 = type_model__MClassType.color;
idtype211 = type_model__MClassType.id;
if(cltype210 >= var_mtype->type->table_size) {
var209 = 0;
} else {
var209 = var_mtype->type->type_table[cltype210] == idtype211;
}
if (unlikely(!var209)) {
var_class_name = var_mtype == NULL ? "null" : var_mtype->type->name;
PRINT_ERROR("Runtime error: Cast failed. Expected `%s`, got `%s`", "MClassType", var_class_name);
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 986);
show_backtrace(1);
}
{
{ /* Inline typing#AForExpr#coltype= (self,var_mtype) on <self:AForExpr> */
self->attrs[COLOR_typing__AForExpr___coltype].val = var_mtype; /* _coltype on <self:AForExpr> */
RET_LABEL212:(void)0;
}
}
if (varonce213) {
var214 = varonce213;
} else {
var215 = "is_ok";
var216 = 5;
var217 = string__NativeString__to_s_with_length(var215, var216);
var214 = var217;
varonce213 = var214;
}
var218 = 0;
{
var219 = typing__TypeVisitor__get_method(var_v, self, var_ittype, var214, var218);
}
var_ikdef = var219;
var220 = NULL;
if (var_ikdef == NULL) {
var221 = 1; /* is null */
} else {
var221 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_ikdef,var220) on <var_ikdef:nullable CallSite> */
var_other = var220;
{
{ /* Inline kernel#Object#is_same_instance (var_ikdef,var_other) on <var_ikdef:nullable CallSite(CallSite)> */
var226 = var_ikdef == var_other;
var224 = var226;
goto RET_LABEL225;
RET_LABEL225:(void)0;
}
}
var222 = var224;
goto RET_LABEL223;
RET_LABEL223:(void)0;
}
var221 = var222;
}
if (var221){
if (varonce227) {
var228 = varonce227;
} else {
var229 = "Type Error: \'for\' expects a method \'is_ok\' in \'Iterator\' type ";
var230 = 62;
var231 = string__NativeString__to_s_with_length(var229, var230);
var228 = var231;
varonce227 = var228;
}
if (varonce232) {
var233 = varonce232;
} else {
var234 = ".";
var235 = 1;
var236 = string__NativeString__to_s_with_length(var234, var235);
var233 = var236;
varonce232 = var233;
}
var237 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var237 = array_instance Array[Object] */
var238 = 3;
var239 = NEW_array__NativeArray(var238, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var239)->values[0] = (val*) var228;
((struct instance_array__NativeArray*)var239)->values[1] = (val*) var_ittype;
((struct instance_array__NativeArray*)var239)->values[2] = (val*) var233;
{
((void (*)(val*, val*, long))(var237->class->vft[COLOR_array__Array__with_native]))(var237, var239, var238) /* with_native on <var237:Array[Object]>*/;
}
}
{
var240 = ((val* (*)(val*))(var237->class->vft[COLOR_string__Object__to_s]))(var237) /* to_s on <var237:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var240); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
{
{ /* Inline typing#AForExpr#method_is_ok= (self,var_ikdef) on <self:AForExpr> */
self->attrs[COLOR_typing__AForExpr___method_is_ok].val = var_ikdef; /* _method_is_ok on <self:AForExpr> */
RET_LABEL241:(void)0;
}
}
if (varonce242) {
var243 = varonce242;
} else {
var244 = "item";
var245 = 4;
var246 = string__NativeString__to_s_with_length(var244, var245);
var243 = var246;
varonce242 = var243;
}
var247 = 0;
{
var248 = typing__TypeVisitor__get_method(var_v, self, var_ittype, var243, var247);
}
var_itemdef = var248;
var249 = NULL;
if (var_itemdef == NULL) {
var250 = 1; /* is null */
} else {
var250 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_itemdef,var249) on <var_itemdef:nullable CallSite> */
var_other = var249;
{
{ /* Inline kernel#Object#is_same_instance (var_itemdef,var_other) on <var_itemdef:nullable CallSite(CallSite)> */
var255 = var_itemdef == var_other;
var253 = var255;
goto RET_LABEL254;
RET_LABEL254:(void)0;
}
}
var251 = var253;
goto RET_LABEL252;
RET_LABEL252:(void)0;
}
var250 = var251;
}
if (var250){
if (varonce256) {
var257 = varonce256;
} else {
var258 = "Type Error: \'for\' expects a method \'item\' in \'Iterator\' type ";
var259 = 61;
var260 = string__NativeString__to_s_with_length(var258, var259);
var257 = var260;
varonce256 = var257;
}
if (varonce261) {
var262 = varonce261;
} else {
var263 = ".";
var264 = 1;
var265 = string__NativeString__to_s_with_length(var263, var264);
var262 = var265;
varonce261 = var262;
}
var266 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var266 = array_instance Array[Object] */
var267 = 3;
var268 = NEW_array__NativeArray(var267, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var268)->values[0] = (val*) var257;
((struct instance_array__NativeArray*)var268)->values[1] = (val*) var_ittype;
((struct instance_array__NativeArray*)var268)->values[2] = (val*) var262;
{
((void (*)(val*, val*, long))(var266->class->vft[COLOR_array__Array__with_native]))(var266, var268, var267) /* with_native on <var266:Array[Object]>*/;
}
}
{
var269 = ((val* (*)(val*))(var266->class->vft[COLOR_string__Object__to_s]))(var266) /* to_s on <var266:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var269); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
{
{ /* Inline typing#AForExpr#method_item= (self,var_itemdef) on <self:AForExpr> */
self->attrs[COLOR_typing__AForExpr___method_item].val = var_itemdef; /* _method_item on <self:AForExpr> */
RET_LABEL270:(void)0;
}
}
if (varonce271) {
var272 = varonce271;
} else {
var273 = "next";
var274 = 4;
var275 = string__NativeString__to_s_with_length(var273, var274);
var272 = var275;
varonce271 = var272;
}
var276 = 0;
{
var277 = typing__TypeVisitor__get_method(var_v, self, var_ittype, var272, var276);
}
var_nextdef = var277;
var278 = NULL;
if (var_nextdef == NULL) {
var279 = 1; /* is null */
} else {
var279 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_nextdef,var278) on <var_nextdef:nullable CallSite> */
var_other = var278;
{
{ /* Inline kernel#Object#is_same_instance (var_nextdef,var_other) on <var_nextdef:nullable CallSite(CallSite)> */
var284 = var_nextdef == var_other;
var282 = var284;
goto RET_LABEL283;
RET_LABEL283:(void)0;
}
}
var280 = var282;
goto RET_LABEL281;
RET_LABEL281:(void)0;
}
var279 = var280;
}
if (var279){
if (varonce285) {
var286 = varonce285;
} else {
var287 = "Type Error: \'for\' expects a method \'next\' in \'Iterator\' type ";
var288 = 61;
var289 = string__NativeString__to_s_with_length(var287, var288);
var286 = var289;
varonce285 = var286;
}
if (varonce290) {
var291 = varonce290;
} else {
var292 = ".";
var293 = 1;
var294 = string__NativeString__to_s_with_length(var292, var293);
var291 = var294;
varonce290 = var291;
}
var295 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var295 = array_instance Array[Object] */
var296 = 3;
var297 = NEW_array__NativeArray(var296, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var297)->values[0] = (val*) var286;
((struct instance_array__NativeArray*)var297)->values[1] = (val*) var_ittype;
((struct instance_array__NativeArray*)var297)->values[2] = (val*) var291;
{
((void (*)(val*, val*, long))(var295->class->vft[COLOR_array__Array__with_native]))(var295, var297, var296) /* with_native on <var295:Array[Object]>*/;
}
}
{
var298 = ((val* (*)(val*))(var295->class->vft[COLOR_string__Object__to_s]))(var295) /* to_s on <var295:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var298); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
{
{ /* Inline typing#AForExpr#method_next= (self,var_nextdef) on <self:AForExpr> */
self->attrs[COLOR_typing__AForExpr___method_next].val = var_nextdef; /* _method_next on <self:AForExpr> */
RET_LABEL299:(void)0;
}
}
if (varonce300) {
var301 = varonce300;
} else {
var302 = "finish";
var303 = 6;
var304 = string__NativeString__to_s_with_length(var302, var303);
var301 = var304;
varonce300 = var301;
}
var305 = 0;
{
var306 = typing__TypeVisitor__try_get_method(var_v, self, var_ittype, var301, var305);
}
{
{ /* Inline typing#AForExpr#method_finish= (self,var306) on <self:AForExpr> */
self->attrs[COLOR_typing__AForExpr___method_finish].val = var306; /* _method_finish on <self:AForExpr> */
RET_LABEL307:(void)0;
}
}
if (var_is_map){
if (varonce308) {
var309 = varonce308;
} else {
var310 = "key";
var311 = 3;
var312 = string__NativeString__to_s_with_length(var310, var311);
var309 = var312;
varonce308 = var309;
}
var313 = 0;
{
var314 = typing__TypeVisitor__get_method(var_v, self, var_ittype, var309, var313);
}
var_keydef = var314;
var315 = NULL;
if (var_keydef == NULL) {
var316 = 1; /* is null */
} else {
var316 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_keydef,var315) on <var_keydef:nullable CallSite> */
var_other = var315;
{
{ /* Inline kernel#Object#is_same_instance (var_keydef,var_other) on <var_keydef:nullable CallSite(CallSite)> */
var321 = var_keydef == var_other;
var319 = var321;
goto RET_LABEL320;
RET_LABEL320:(void)0;
}
}
var317 = var319;
goto RET_LABEL318;
RET_LABEL318:(void)0;
}
var316 = var317;
}
if (var316){
if (varonce322) {
var323 = varonce322;
} else {
var324 = "Type Error: \'for\' expects a method \'key\' in \'Iterator\' type ";
var325 = 60;
var326 = string__NativeString__to_s_with_length(var324, var325);
var323 = var326;
varonce322 = var323;
}
if (varonce327) {
var328 = varonce327;
} else {
var329 = ".";
var330 = 1;
var331 = string__NativeString__to_s_with_length(var329, var330);
var328 = var331;
varonce327 = var328;
}
var332 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var332 = array_instance Array[Object] */
var333 = 3;
var334 = NEW_array__NativeArray(var333, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var334)->values[0] = (val*) var323;
((struct instance_array__NativeArray*)var334)->values[1] = (val*) var_ittype;
((struct instance_array__NativeArray*)var334)->values[2] = (val*) var328;
{
((void (*)(val*, val*, long))(var332->class->vft[COLOR_array__Array__with_native]))(var332, var334, var333) /* with_native on <var332:Array[Object]>*/;
}
}
{
var335 = ((val* (*)(val*))(var332->class->vft[COLOR_string__Object__to_s]))(var332) /* to_s on <var332:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var335); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
{
{ /* Inline typing#AForExpr#method_key= (self,var_keydef) on <self:AForExpr> */
self->attrs[COLOR_typing__AForExpr___method_key].val = var_keydef; /* _method_key on <self:AForExpr> */
RET_LABEL336:(void)0;
}
}
} else {
}
{
{ /* Inline scope#AForExpr#variables (self) on <self:AForExpr> */
var340 = self->attrs[COLOR_scope__AForExpr___variables].val; /* _variables on <self:AForExpr> */
var338 = var340;
RET_LABEL339:(void)0;
}
}
if (var338 == NULL) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1021);
show_backtrace(1);
} else {
{ /* Inline array#AbstractArrayRead#length (var338) on <var338:nullable Array[Variable]> */
if (unlikely(var338 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "../lib/standard/collection/array.nit", 24);
show_backtrace(1);
}
var343 = var338->attrs[COLOR_array__AbstractArrayRead___length].l; /* _length on <var338:nullable Array[Variable]> */
var341 = var343;
RET_LABEL342:(void)0;
}
}
var344 = 1;
{
{ /* Inline kernel#Int#== (var341,var344) on <var341:Int> */
var348 = var341 == var344;
var346 = var348;
goto RET_LABEL347;
RET_LABEL347:(void)0;
}
var345 = var346;
}
var_349 = var345;
if (var345){
{
{ /* Inline parser_nodes#AForExpr#n_expr (self) on <self:AForExpr> */
var352 = self->attrs[COLOR_parser_nodes__AForExpr___n_expr].val; /* _n_expr on <self:AForExpr> */
if (unlikely(var352 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1427);
show_backtrace(1);
}
var350 = var352;
RET_LABEL351:(void)0;
}
}
/* <var350:AExpr> isa ARangeExpr */
cltype354 = type_parser_nodes__ARangeExpr.color;
idtype355 = type_parser_nodes__ARangeExpr.id;
if(cltype354 >= var350->type->table_size) {
var353 = 0;
} else {
var353 = var350->type->type_table[cltype354] == idtype355;
}
var337 = var353;
} else {
var337 = var_349;
}
if (var337){
{
{ /* Inline scope#AForExpr#variables (self) on <self:AForExpr> */
var358 = self->attrs[COLOR_scope__AForExpr___variables].val; /* _variables on <self:AForExpr> */
var356 = var358;
RET_LABEL357:(void)0;
}
}
if (var356 == NULL) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1022);
show_backtrace(1);
} else {
var359 = abstract_collection__SequenceRead__first(var356);
}
var_variable = var359;
{
{ /* Inline typing#Variable#declared_type (var_variable) on <var_variable:Variable> */
var362 = var_variable->attrs[COLOR_typing__Variable___declared_type].val; /* _declared_type on <var_variable:Variable> */
var360 = var362;
RET_LABEL361:(void)0;
}
}
if (unlikely(var360 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Cast failed");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1023);
show_backtrace(1);
}
var_vtype = var360;
{
{ /* Inline parser_nodes#AForExpr#n_expr (self) on <self:AForExpr> */
var365 = self->attrs[COLOR_parser_nodes__AForExpr___n_expr].val; /* _n_expr on <self:AForExpr> */
if (unlikely(var365 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1427);
show_backtrace(1);
}
var363 = var365;
RET_LABEL364:(void)0;
}
}
/* <var363:AExpr> isa AOrangeExpr */
cltype367 = type_parser_nodes__AOrangeExpr.color;
idtype368 = type_parser_nodes__AOrangeExpr.id;
if(cltype367 >= var363->type->table_size) {
var366 = 0;
} else {
var366 = var363->type->type_table[cltype367] == idtype368;
}
if (var366){
if (varonce369) {
var370 = varonce369;
} else {
var371 = "<";
var372 = 1;
var373 = string__NativeString__to_s_with_length(var371, var372);
var370 = var373;
varonce369 = var370;
}
var374 = 0;
{
var375 = typing__TypeVisitor__get_method(var_v, self, var_vtype, var370, var374);
}
{
{ /* Inline typing#AForExpr#method_lt= (self,var375) on <self:AForExpr> */
self->attrs[COLOR_typing__AForExpr___method_lt].val = var375; /* _method_lt on <self:AForExpr> */
RET_LABEL376:(void)0;
}
}
} else {
if (varonce377) {
var378 = varonce377;
} else {
var379 = "<=";
var380 = 2;
var381 = string__NativeString__to_s_with_length(var379, var380);
var378 = var381;
varonce377 = var378;
}
var382 = 0;
{
var383 = typing__TypeVisitor__get_method(var_v, self, var_vtype, var378, var382);
}
{
{ /* Inline typing#AForExpr#method_lt= (self,var383) on <self:AForExpr> */
self->attrs[COLOR_typing__AForExpr___method_lt].val = var383; /* _method_lt on <self:AForExpr> */
RET_LABEL384:(void)0;
}
}
}
if (varonce385) {
var386 = varonce385;
} else {
var387 = "successor";
var388 = 9;
var389 = string__NativeString__to_s_with_length(var387, var388);
var386 = var389;
varonce385 = var386;
}
var390 = 0;
{
var391 = typing__TypeVisitor__get_method(var_v, self, var_vtype, var386, var390);
}
{
{ /* Inline typing#AForExpr#method_successor= (self,var391) on <self:AForExpr> */
self->attrs[COLOR_typing__AForExpr___method_successor].val = var391; /* _method_successor on <self:AForExpr> */
RET_LABEL392:(void)0;
}
}
} else {
}
RET_LABEL:;
}
/* method typing#AForExpr#do_type_iterator for (self: Object, TypeVisitor, MType) */
void VIRTUAL_typing__AForExpr__do_type_iterator(val* self, val* p0, val* p1) {
typing__AForExpr__do_type_iterator(self, p0, p1); /* Direct call typing#AForExpr#do_type_iterator on <self:Object(AForExpr)>*/
RET_LABEL:;
}
/* method typing#AForExpr#accept_typing for (self: AForExpr, TypeVisitor) */
void typing__AForExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : AExpr */;
val* var2 /* : AExpr */;
val* var3 /* : nullable MType */;
val* var_mtype /* var mtype: nullable MType */;
val* var4 /* : null */;
short int var5 /* : Bool */;
short int var6 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var8 /* : Bool */;
short int var10 /* : Bool */;
val* var11 /* : nullable AExpr */;
val* var13 /* : nullable AExpr */;
short int var14 /* : Bool */;
var_v = p0;
{
{ /* Inline parser_nodes#AForExpr#n_expr (self) on <self:AForExpr> */
var2 = self->attrs[COLOR_parser_nodes__AForExpr___n_expr].val; /* _n_expr on <self:AForExpr> */
if (unlikely(var2 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1427);
show_backtrace(1);
}
var = var2;
RET_LABEL1:(void)0;
}
}
{
var3 = typing__TypeVisitor__visit_expr(var_v, var);
}
var_mtype = var3;
var4 = NULL;
if (var_mtype == NULL) {
var5 = 1; /* is null */
} else {
var5 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_mtype,var4) on <var_mtype:nullable MType> */
var_other = var4;
{
{ /* Inline kernel#Object#is_same_instance (var_mtype,var_other) on <var_mtype:nullable MType(MType)> */
var10 = var_mtype == var_other;
var8 = var10;
goto RET_LABEL9;
RET_LABEL9:(void)0;
}
}
var6 = var8;
goto RET_LABEL7;
RET_LABEL7:(void)0;
}
var5 = var6;
}
if (var5){
goto RET_LABEL;
} else {
}
{
typing__AForExpr__do_type_iterator(self, var_v, var_mtype); /* Direct call typing#AForExpr#do_type_iterator on <self:AForExpr>*/
}
{
{ /* Inline parser_nodes#AForExpr#n_block (self) on <self:AForExpr> */
var13 = self->attrs[COLOR_parser_nodes__AForExpr___n_block].val; /* _n_block on <self:AForExpr> */
var11 = var13;
RET_LABEL12:(void)0;
}
}
{
typing__TypeVisitor__visit_stmt(var_v, var11); /* Direct call typing#TypeVisitor#visit_stmt on <var_v:TypeVisitor>*/
}
var14 = 1;
{
{ /* Inline typing#AExpr#is_typed= (self,var14) on <self:AForExpr> */
self->attrs[COLOR_typing__AExpr___is_typed].s = var14; /* _is_typed on <self:AForExpr> */
RET_LABEL15:(void)0;
}
}
RET_LABEL:;
}
/* method typing#AForExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AForExpr__accept_typing(val* self, val* p0) {
typing__AForExpr__accept_typing(self, p0); /* Direct call typing#AForExpr#accept_typing on <self:Object(AForExpr)>*/
RET_LABEL:;
}
/* method typing#AAssertExpr#accept_typing for (self: AAssertExpr, TypeVisitor) */
void typing__AAssertExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : AExpr */;
val* var2 /* : AExpr */;
val* var3 /* : nullable MType */;
val* var4 /* : nullable AExpr */;
val* var6 /* : nullable AExpr */;
short int var7 /* : Bool */;
var_v = p0;
{
{ /* Inline parser_nodes#AAssertExpr#n_expr (self) on <self:AAssertExpr> */
var2 = self->attrs[COLOR_parser_nodes__AAssertExpr___n_expr].val; /* _n_expr on <self:AAssertExpr> */
if (unlikely(var2 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1437);
show_backtrace(1);
}
var = var2;
RET_LABEL1:(void)0;
}
}
{
var3 = typing__TypeVisitor__visit_expr_bool(var_v, var);
}
{
{ /* Inline parser_nodes#AAssertExpr#n_else (self) on <self:AAssertExpr> */
var6 = self->attrs[COLOR_parser_nodes__AAssertExpr___n_else].val; /* _n_else on <self:AAssertExpr> */
var4 = var6;
RET_LABEL5:(void)0;
}
}
{
typing__TypeVisitor__visit_stmt(var_v, var4); /* Direct call typing#TypeVisitor#visit_stmt on <var_v:TypeVisitor>*/
}
var7 = 1;
{
{ /* Inline typing#AExpr#is_typed= (self,var7) on <self:AAssertExpr> */
self->attrs[COLOR_typing__AExpr___is_typed].s = var7; /* _is_typed on <self:AAssertExpr> */
RET_LABEL8:(void)0;
}
}
RET_LABEL:;
}
/* method typing#AAssertExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AAssertExpr__accept_typing(val* self, val* p0) {
typing__AAssertExpr__accept_typing(self, p0); /* Direct call typing#AAssertExpr#accept_typing on <self:Object(AAssertExpr)>*/
RET_LABEL:;
}
/* method typing#AOrExpr#accept_typing for (self: AOrExpr, TypeVisitor) */
void typing__AOrExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : AExpr */;
val* var2 /* : AExpr */;
val* var3 /* : nullable MType */;
val* var4 /* : AExpr */;
val* var6 /* : AExpr */;
val* var7 /* : nullable MType */;
val* var8 /* : nullable MType */;
var_v = p0;
{
{ /* Inline parser_nodes#AOrExpr#n_expr (self) on <self:AOrExpr> */
var2 = self->attrs[COLOR_parser_nodes__AOrExpr___n_expr].val; /* _n_expr on <self:AOrExpr> */
if (unlikely(var2 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1486);
show_backtrace(1);
}
var = var2;
RET_LABEL1:(void)0;
}
}
{
var3 = typing__TypeVisitor__visit_expr_bool(var_v, var);
}
{
{ /* Inline parser_nodes#AOrExpr#n_expr2 (self) on <self:AOrExpr> */
var6 = self->attrs[COLOR_parser_nodes__AOrExpr___n_expr2].val; /* _n_expr2 on <self:AOrExpr> */
if (unlikely(var6 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr2");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1487);
show_backtrace(1);
}
var4 = var6;
RET_LABEL5:(void)0;
}
}
{
var7 = typing__TypeVisitor__visit_expr_bool(var_v, var4);
}
{
var8 = typing__TypeVisitor__type_bool(var_v, self);
}
{
{ /* Inline typing#AExpr#mtype= (self,var8) on <self:AOrExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var8; /* _mtype on <self:AOrExpr> */
RET_LABEL9:(void)0;
}
}
RET_LABEL:;
}
/* method typing#AOrExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AOrExpr__accept_typing(val* self, val* p0) {
typing__AOrExpr__accept_typing(self, p0); /* Direct call typing#AOrExpr#accept_typing on <self:Object(AOrExpr)>*/
RET_LABEL:;
}
/* method typing#AImpliesExpr#accept_typing for (self: AImpliesExpr, TypeVisitor) */
void typing__AImpliesExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : AExpr */;
val* var2 /* : AExpr */;
val* var3 /* : nullable MType */;
val* var4 /* : AExpr */;
val* var6 /* : AExpr */;
val* var7 /* : nullable MType */;
val* var8 /* : nullable MType */;
var_v = p0;
{
{ /* Inline parser_nodes#AImpliesExpr#n_expr (self) on <self:AImpliesExpr> */
var2 = self->attrs[COLOR_parser_nodes__AImpliesExpr___n_expr].val; /* _n_expr on <self:AImpliesExpr> */
if (unlikely(var2 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1507);
show_backtrace(1);
}
var = var2;
RET_LABEL1:(void)0;
}
}
{
var3 = typing__TypeVisitor__visit_expr_bool(var_v, var);
}
{
{ /* Inline parser_nodes#AImpliesExpr#n_expr2 (self) on <self:AImpliesExpr> */
var6 = self->attrs[COLOR_parser_nodes__AImpliesExpr___n_expr2].val; /* _n_expr2 on <self:AImpliesExpr> */
if (unlikely(var6 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr2");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1508);
show_backtrace(1);
}
var4 = var6;
RET_LABEL5:(void)0;
}
}
{
var7 = typing__TypeVisitor__visit_expr_bool(var_v, var4);
}
{
var8 = typing__TypeVisitor__type_bool(var_v, self);
}
{
{ /* Inline typing#AExpr#mtype= (self,var8) on <self:AImpliesExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var8; /* _mtype on <self:AImpliesExpr> */
RET_LABEL9:(void)0;
}
}
RET_LABEL:;
}
/* method typing#AImpliesExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AImpliesExpr__accept_typing(val* self, val* p0) {
typing__AImpliesExpr__accept_typing(self, p0); /* Direct call typing#AImpliesExpr#accept_typing on <self:Object(AImpliesExpr)>*/
RET_LABEL:;
}
/* method typing#AAndExpr#accept_typing for (self: AAndExpr, TypeVisitor) */
void typing__AAndExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : AExpr */;
val* var2 /* : AExpr */;
val* var3 /* : nullable MType */;
val* var4 /* : AExpr */;
val* var6 /* : AExpr */;
val* var7 /* : nullable MType */;
val* var8 /* : nullable MType */;
var_v = p0;
{
{ /* Inline parser_nodes#AAndExpr#n_expr (self) on <self:AAndExpr> */
var2 = self->attrs[COLOR_parser_nodes__AAndExpr___n_expr].val; /* _n_expr on <self:AAndExpr> */
if (unlikely(var2 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1493);
show_backtrace(1);
}
var = var2;
RET_LABEL1:(void)0;
}
}
{
var3 = typing__TypeVisitor__visit_expr_bool(var_v, var);
}
{
{ /* Inline parser_nodes#AAndExpr#n_expr2 (self) on <self:AAndExpr> */
var6 = self->attrs[COLOR_parser_nodes__AAndExpr___n_expr2].val; /* _n_expr2 on <self:AAndExpr> */
if (unlikely(var6 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr2");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1494);
show_backtrace(1);
}
var4 = var6;
RET_LABEL5:(void)0;
}
}
{
var7 = typing__TypeVisitor__visit_expr_bool(var_v, var4);
}
{
var8 = typing__TypeVisitor__type_bool(var_v, self);
}
{
{ /* Inline typing#AExpr#mtype= (self,var8) on <self:AAndExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var8; /* _mtype on <self:AAndExpr> */
RET_LABEL9:(void)0;
}
}
RET_LABEL:;
}
/* method typing#AAndExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AAndExpr__accept_typing(val* self, val* p0) {
typing__AAndExpr__accept_typing(self, p0); /* Direct call typing#AAndExpr#accept_typing on <self:Object(AAndExpr)>*/
RET_LABEL:;
}
/* method typing#ANotExpr#accept_typing for (self: ANotExpr, TypeVisitor) */
void typing__ANotExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : AExpr */;
val* var2 /* : AExpr */;
val* var3 /* : nullable MType */;
val* var4 /* : nullable MType */;
var_v = p0;
{
{ /* Inline parser_nodes#ANotExpr#n_expr (self) on <self:ANotExpr> */
var2 = self->attrs[COLOR_parser_nodes__ANotExpr___n_expr].val; /* _n_expr on <self:ANotExpr> */
if (unlikely(var2 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1515);
show_backtrace(1);
}
var = var2;
RET_LABEL1:(void)0;
}
}
{
var3 = typing__TypeVisitor__visit_expr_bool(var_v, var);
}
{
var4 = typing__TypeVisitor__type_bool(var_v, self);
}
{
{ /* Inline typing#AExpr#mtype= (self,var4) on <self:ANotExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var4; /* _mtype on <self:ANotExpr> */
RET_LABEL5:(void)0;
}
}
RET_LABEL:;
}
/* method typing#ANotExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__ANotExpr__accept_typing(val* self, val* p0) {
typing__ANotExpr__accept_typing(self, p0); /* Direct call typing#ANotExpr#accept_typing on <self:Object(ANotExpr)>*/
RET_LABEL:;
}
/* method typing#AOrElseExpr#accept_typing for (self: AOrElseExpr, TypeVisitor) */
void typing__AOrElseExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : AExpr */;
val* var2 /* : AExpr */;
val* var3 /* : nullable MType */;
val* var_t1 /* var t1: nullable MType */;
val* var4 /* : AExpr */;
val* var6 /* : AExpr */;
val* var7 /* : nullable MType */;
val* var_t2 /* var t2: nullable MType */;
short int var8 /* : Bool */;
val* var9 /* : null */;
short int var10 /* : Bool */;
short int var11 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var13 /* : Bool */;
short int var15 /* : Bool */;
short int var_ /* var : Bool */;
val* var16 /* : null */;
short int var17 /* : Bool */;
short int var18 /* : Bool */;
short int var20 /* : Bool */;
short int var22 /* : Bool */;
val* var23 /* : MType */;
val* var24 /* : Array[MType] */;
long var25 /* : Int */;
val* var_26 /* var : Array[MType] */;
val* var27 /* : nullable MType */;
val* var_t /* var t: nullable MType */;
val* var28 /* : null */;
short int var29 /* : Bool */;
short int var30 /* : Bool */;
short int var32 /* : Bool */;
short int var34 /* : Bool */;
val* var35 /* : MModule */;
val* var37 /* : MModule */;
val* var38 /* : MClassType */;
short int var39 /* : Bool */;
int cltype;
int idtype;
val* var40 /* : MType */;
var_v = p0;
{
{ /* Inline parser_nodes#AOrElseExpr#n_expr (self) on <self:AOrElseExpr> */
var2 = self->attrs[COLOR_parser_nodes__AOrElseExpr___n_expr].val; /* _n_expr on <self:AOrElseExpr> */
if (unlikely(var2 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1500);
show_backtrace(1);
}
var = var2;
RET_LABEL1:(void)0;
}
}
{
var3 = typing__TypeVisitor__visit_expr(var_v, var);
}
var_t1 = var3;
{
{ /* Inline parser_nodes#AOrElseExpr#n_expr2 (self) on <self:AOrElseExpr> */
var6 = self->attrs[COLOR_parser_nodes__AOrElseExpr___n_expr2].val; /* _n_expr2 on <self:AOrElseExpr> */
if (unlikely(var6 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr2");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1501);
show_backtrace(1);
}
var4 = var6;
RET_LABEL5:(void)0;
}
}
{
var7 = typing__TypeVisitor__visit_expr(var_v, var4);
}
var_t2 = var7;
var9 = NULL;
if (var_t1 == NULL) {
var10 = 1; /* is null */
} else {
var10 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_t1,var9) on <var_t1:nullable MType> */
var_other = var9;
{
{ /* Inline kernel#Object#is_same_instance (var_t1,var_other) on <var_t1:nullable MType(MType)> */
var15 = var_t1 == var_other;
var13 = var15;
goto RET_LABEL14;
RET_LABEL14:(void)0;
}
}
var11 = var13;
goto RET_LABEL12;
RET_LABEL12:(void)0;
}
var10 = var11;
}
var_ = var10;
if (var10){
var8 = var_;
} else {
var16 = NULL;
if (var_t2 == NULL) {
var17 = 1; /* is null */
} else {
var17 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_t2,var16) on <var_t2:nullable MType> */
var_other = var16;
{
{ /* Inline kernel#Object#is_same_instance (var_t2,var_other) on <var_t2:nullable MType(MType)> */
var22 = var_t2 == var_other;
var20 = var22;
goto RET_LABEL21;
RET_LABEL21:(void)0;
}
}
var18 = var20;
goto RET_LABEL19;
RET_LABEL19:(void)0;
}
var17 = var18;
}
var8 = var17;
}
if (var8){
goto RET_LABEL;
} else {
}
{
var23 = ((val* (*)(val*))(var_t1->class->vft[COLOR_model__MType__as_notnullable]))(var_t1) /* as_notnullable on <var_t1:nullable MType(MType)>*/;
}
var_t1 = var23;
var24 = NEW_array__Array(&type_array__Arraymodel__MType);
var25 = 2;
{
array__Array__with_capacity(var24, var25); /* Direct call array#Array#with_capacity on <var24:Array[MType]>*/
}
var_26 = var24;
{
array__AbstractArray__push(var_26, var_t1); /* Direct call array#AbstractArray#push on <var_26:Array[MType]>*/
}
{
array__AbstractArray__push(var_26, var_t2); /* Direct call array#AbstractArray#push on <var_26:Array[MType]>*/
}
{
var27 = typing__TypeVisitor__merge_types(var_v, self, var_26);
}
var_t = var27;
var28 = NULL;
if (var_t == NULL) {
var29 = 1; /* is null */
} else {
var29 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_t,var28) on <var_t:nullable MType> */
var_other = var28;
{
{ /* Inline kernel#Object#is_same_instance (var_t,var_other) on <var_t:nullable MType(MType)> */
var34 = var_t == var_other;
var32 = var34;
goto RET_LABEL33;
RET_LABEL33:(void)0;
}
}
var30 = var32;
goto RET_LABEL31;
RET_LABEL31:(void)0;
}
var29 = var30;
}
if (var29){
{
{ /* Inline typing#TypeVisitor#mmodule (var_v) on <var_v:TypeVisitor> */
var37 = var_v->attrs[COLOR_typing__TypeVisitor___mmodule].val; /* _mmodule on <var_v:TypeVisitor> */
if (unlikely(var37 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mmodule");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 36);
show_backtrace(1);
}
var35 = var37;
RET_LABEL36:(void)0;
}
}
{
var38 = model__MModule__object_type(var35);
}
var_t = var38;
/* <var_t2:nullable MType(MType)> isa MNullableType */
cltype = type_model__MNullableType.color;
idtype = type_model__MNullableType.id;
if(cltype >= var_t2->type->table_size) {
var39 = 0;
} else {
var39 = var_t2->type->type_table[cltype] == idtype;
}
if (var39){
{
var40 = model__MType__as_nullable(var_t);
}
var_t = var40;
} else {
}
} else {
}
{
{ /* Inline typing#AExpr#mtype= (self,var_t) on <self:AOrElseExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var_t; /* _mtype on <self:AOrElseExpr> */
RET_LABEL41:(void)0;
}
}
RET_LABEL:;
}
/* method typing#AOrElseExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AOrElseExpr__accept_typing(val* self, val* p0) {
typing__AOrElseExpr__accept_typing(self, p0); /* Direct call typing#AOrElseExpr#accept_typing on <self:Object(AOrElseExpr)>*/
RET_LABEL:;
}
/* method typing#ATrueExpr#accept_typing for (self: ATrueExpr, TypeVisitor) */
void typing__ATrueExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : nullable MType */;
var_v = p0;
{
var = typing__TypeVisitor__type_bool(var_v, self);
}
{
{ /* Inline typing#AExpr#mtype= (self,var) on <self:ATrueExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var; /* _mtype on <self:ATrueExpr> */
RET_LABEL1:(void)0;
}
}
RET_LABEL:;
}
/* method typing#ATrueExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__ATrueExpr__accept_typing(val* self, val* p0) {
typing__ATrueExpr__accept_typing(self, p0); /* Direct call typing#ATrueExpr#accept_typing on <self:Object(ATrueExpr)>*/
RET_LABEL:;
}
/* method typing#AFalseExpr#accept_typing for (self: AFalseExpr, TypeVisitor) */
void typing__AFalseExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : nullable MType */;
var_v = p0;
{
var = typing__TypeVisitor__type_bool(var_v, self);
}
{
{ /* Inline typing#AExpr#mtype= (self,var) on <self:AFalseExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var; /* _mtype on <self:AFalseExpr> */
RET_LABEL1:(void)0;
}
}
RET_LABEL:;
}
/* method typing#AFalseExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AFalseExpr__accept_typing(val* self, val* p0) {
typing__AFalseExpr__accept_typing(self, p0); /* Direct call typing#AFalseExpr#accept_typing on <self:Object(AFalseExpr)>*/
RET_LABEL:;
}
/* method typing#AIntExpr#accept_typing for (self: AIntExpr, TypeVisitor) */
void typing__AIntExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
static val* varonce;
val* var /* : String */;
char* var1 /* : NativeString */;
long var2 /* : Int */;
val* var3 /* : FlatString */;
val* var4 /* : nullable MClass */;
val* var_mclass /* var mclass: nullable MClass */;
val* var5 /* : null */;
short int var6 /* : Bool */;
short int var7 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var9 /* : Bool */;
short int var11 /* : Bool */;
val* var12 /* : MClassType */;
val* var14 /* : MClassType */;
var_v = p0;
if (varonce) {
var = varonce;
} else {
var1 = "Int";
var2 = 3;
var3 = string__NativeString__to_s_with_length(var1, var2);
var = var3;
varonce = var;
}
{
var4 = typing__TypeVisitor__get_mclass(var_v, self, var);
}
var_mclass = var4;
var5 = NULL;
if (var_mclass == NULL) {
var6 = 1; /* is null */
} else {
var6 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_mclass,var5) on <var_mclass:nullable MClass> */
var_other = var5;
{
{ /* Inline kernel#Object#is_same_instance (var_mclass,var_other) on <var_mclass:nullable MClass(MClass)> */
var11 = var_mclass == var_other;
var9 = var11;
goto RET_LABEL10;
RET_LABEL10:(void)0;
}
}
var7 = var9;
goto RET_LABEL8;
RET_LABEL8:(void)0;
}
var6 = var7;
}
if (var6){
goto RET_LABEL;
} else {
}
{
{ /* Inline model#MClass#mclass_type (var_mclass) on <var_mclass:nullable MClass(MClass)> */
var14 = var_mclass->attrs[COLOR_model__MClass___mclass_type].val; /* _mclass_type on <var_mclass:nullable MClass(MClass)> */
if (unlikely(var14 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mclass_type");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 435);
show_backtrace(1);
}
var12 = var14;
RET_LABEL13:(void)0;
}
}
{
{ /* Inline typing#AExpr#mtype= (self,var12) on <self:AIntExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var12; /* _mtype on <self:AIntExpr> */
RET_LABEL15:(void)0;
}
}
RET_LABEL:;
}
/* method typing#AIntExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AIntExpr__accept_typing(val* self, val* p0) {
typing__AIntExpr__accept_typing(self, p0); /* Direct call typing#AIntExpr#accept_typing on <self:Object(AIntExpr)>*/
RET_LABEL:;
}
/* method typing#AFloatExpr#accept_typing for (self: AFloatExpr, TypeVisitor) */
void typing__AFloatExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
static val* varonce;
val* var /* : String */;
char* var1 /* : NativeString */;
long var2 /* : Int */;
val* var3 /* : FlatString */;
val* var4 /* : nullable MClass */;
val* var_mclass /* var mclass: nullable MClass */;
val* var5 /* : null */;
short int var6 /* : Bool */;
short int var7 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var9 /* : Bool */;
short int var11 /* : Bool */;
val* var12 /* : MClassType */;
val* var14 /* : MClassType */;
var_v = p0;
if (varonce) {
var = varonce;
} else {
var1 = "Float";
var2 = 5;
var3 = string__NativeString__to_s_with_length(var1, var2);
var = var3;
varonce = var;
}
{
var4 = typing__TypeVisitor__get_mclass(var_v, self, var);
}
var_mclass = var4;
var5 = NULL;
if (var_mclass == NULL) {
var6 = 1; /* is null */
} else {
var6 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_mclass,var5) on <var_mclass:nullable MClass> */
var_other = var5;
{
{ /* Inline kernel#Object#is_same_instance (var_mclass,var_other) on <var_mclass:nullable MClass(MClass)> */
var11 = var_mclass == var_other;
var9 = var11;
goto RET_LABEL10;
RET_LABEL10:(void)0;
}
}
var7 = var9;
goto RET_LABEL8;
RET_LABEL8:(void)0;
}
var6 = var7;
}
if (var6){
goto RET_LABEL;
} else {
}
{
{ /* Inline model#MClass#mclass_type (var_mclass) on <var_mclass:nullable MClass(MClass)> */
var14 = var_mclass->attrs[COLOR_model__MClass___mclass_type].val; /* _mclass_type on <var_mclass:nullable MClass(MClass)> */
if (unlikely(var14 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mclass_type");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 435);
show_backtrace(1);
}
var12 = var14;
RET_LABEL13:(void)0;
}
}
{
{ /* Inline typing#AExpr#mtype= (self,var12) on <self:AFloatExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var12; /* _mtype on <self:AFloatExpr> */
RET_LABEL15:(void)0;
}
}
RET_LABEL:;
}
/* method typing#AFloatExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AFloatExpr__accept_typing(val* self, val* p0) {
typing__AFloatExpr__accept_typing(self, p0); /* Direct call typing#AFloatExpr#accept_typing on <self:Object(AFloatExpr)>*/
RET_LABEL:;
}
/* method typing#ACharExpr#accept_typing for (self: ACharExpr, TypeVisitor) */
void typing__ACharExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
static val* varonce;
val* var /* : String */;
char* var1 /* : NativeString */;
long var2 /* : Int */;
val* var3 /* : FlatString */;
val* var4 /* : nullable MClass */;
val* var_mclass /* var mclass: nullable MClass */;
val* var5 /* : null */;
short int var6 /* : Bool */;
short int var7 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var9 /* : Bool */;
short int var11 /* : Bool */;
val* var12 /* : MClassType */;
val* var14 /* : MClassType */;
var_v = p0;
if (varonce) {
var = varonce;
} else {
var1 = "Char";
var2 = 4;
var3 = string__NativeString__to_s_with_length(var1, var2);
var = var3;
varonce = var;
}
{
var4 = typing__TypeVisitor__get_mclass(var_v, self, var);
}
var_mclass = var4;
var5 = NULL;
if (var_mclass == NULL) {
var6 = 1; /* is null */
} else {
var6 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_mclass,var5) on <var_mclass:nullable MClass> */
var_other = var5;
{
{ /* Inline kernel#Object#is_same_instance (var_mclass,var_other) on <var_mclass:nullable MClass(MClass)> */
var11 = var_mclass == var_other;
var9 = var11;
goto RET_LABEL10;
RET_LABEL10:(void)0;
}
}
var7 = var9;
goto RET_LABEL8;
RET_LABEL8:(void)0;
}
var6 = var7;
}
if (var6){
goto RET_LABEL;
} else {
}
{
{ /* Inline model#MClass#mclass_type (var_mclass) on <var_mclass:nullable MClass(MClass)> */
var14 = var_mclass->attrs[COLOR_model__MClass___mclass_type].val; /* _mclass_type on <var_mclass:nullable MClass(MClass)> */
if (unlikely(var14 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mclass_type");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 435);
show_backtrace(1);
}
var12 = var14;
RET_LABEL13:(void)0;
}
}
{
{ /* Inline typing#AExpr#mtype= (self,var12) on <self:ACharExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var12; /* _mtype on <self:ACharExpr> */
RET_LABEL15:(void)0;
}
}
RET_LABEL:;
}
/* method typing#ACharExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__ACharExpr__accept_typing(val* self, val* p0) {
typing__ACharExpr__accept_typing(self, p0); /* Direct call typing#ACharExpr#accept_typing on <self:Object(ACharExpr)>*/
RET_LABEL:;
}
/* method typing#AStringFormExpr#accept_typing for (self: AStringFormExpr, TypeVisitor) */
void typing__AStringFormExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
static val* varonce;
val* var /* : String */;
char* var1 /* : NativeString */;
long var2 /* : Int */;
val* var3 /* : FlatString */;
val* var4 /* : nullable MClass */;
val* var_mclass /* var mclass: nullable MClass */;
val* var5 /* : null */;
short int var6 /* : Bool */;
short int var7 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var9 /* : Bool */;
short int var11 /* : Bool */;
val* var12 /* : MClassType */;
val* var14 /* : MClassType */;
var_v = p0;
if (varonce) {
var = varonce;
} else {
var1 = "String";
var2 = 6;
var3 = string__NativeString__to_s_with_length(var1, var2);
var = var3;
varonce = var;
}
{
var4 = typing__TypeVisitor__get_mclass(var_v, self, var);
}
var_mclass = var4;
var5 = NULL;
if (var_mclass == NULL) {
var6 = 1; /* is null */
} else {
var6 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_mclass,var5) on <var_mclass:nullable MClass> */
var_other = var5;
{
{ /* Inline kernel#Object#is_same_instance (var_mclass,var_other) on <var_mclass:nullable MClass(MClass)> */
var11 = var_mclass == var_other;
var9 = var11;
goto RET_LABEL10;
RET_LABEL10:(void)0;
}
}
var7 = var9;
goto RET_LABEL8;
RET_LABEL8:(void)0;
}
var6 = var7;
}
if (var6){
goto RET_LABEL;
} else {
}
{
{ /* Inline model#MClass#mclass_type (var_mclass) on <var_mclass:nullable MClass(MClass)> */
var14 = var_mclass->attrs[COLOR_model__MClass___mclass_type].val; /* _mclass_type on <var_mclass:nullable MClass(MClass)> */
if (unlikely(var14 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mclass_type");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 435);
show_backtrace(1);
}
var12 = var14;
RET_LABEL13:(void)0;
}
}
{
{ /* Inline typing#AExpr#mtype= (self,var12) on <self:AStringFormExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var12; /* _mtype on <self:AStringFormExpr> */
RET_LABEL15:(void)0;
}
}
RET_LABEL:;
}
/* method typing#AStringFormExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AStringFormExpr__accept_typing(val* self, val* p0) {
typing__AStringFormExpr__accept_typing(self, p0); /* Direct call typing#AStringFormExpr#accept_typing on <self:Object(AStringFormExpr)>*/
RET_LABEL:;
}
/* method typing#ASuperstringExpr#accept_typing for (self: ASuperstringExpr, TypeVisitor) */
void typing__ASuperstringExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
static val* varonce;
val* var /* : String */;
char* var1 /* : NativeString */;
long var2 /* : Int */;
val* var3 /* : FlatString */;
val* var4 /* : nullable MClass */;
val* var_mclass /* var mclass: nullable MClass */;
val* var5 /* : null */;
short int var6 /* : Bool */;
short int var7 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var9 /* : Bool */;
short int var11 /* : Bool */;
val* var12 /* : MClassType */;
val* var14 /* : MClassType */;
val* var16 /* : ANodes[AExpr] */;
val* var18 /* : ANodes[AExpr] */;
val* var_ /* var : ANodes[AExpr] */;
val* var19 /* : Iterator[ANode] */;
val* var_20 /* var : Iterator[AExpr] */;
short int var21 /* : Bool */;
val* var22 /* : nullable Object */;
val* var_nexpr /* var nexpr: AExpr */;
val* var23 /* : MModule */;
val* var25 /* : MModule */;
val* var26 /* : MClassType */;
val* var27 /* : nullable MType */;
var_v = p0;
if (varonce) {
var = varonce;
} else {
var1 = "String";
var2 = 6;
var3 = string__NativeString__to_s_with_length(var1, var2);
var = var3;
varonce = var;
}
{
var4 = typing__TypeVisitor__get_mclass(var_v, self, var);
}
var_mclass = var4;
var5 = NULL;
if (var_mclass == NULL) {
var6 = 1; /* is null */
} else {
var6 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_mclass,var5) on <var_mclass:nullable MClass> */
var_other = var5;
{
{ /* Inline kernel#Object#is_same_instance (var_mclass,var_other) on <var_mclass:nullable MClass(MClass)> */
var11 = var_mclass == var_other;
var9 = var11;
goto RET_LABEL10;
RET_LABEL10:(void)0;
}
}
var7 = var9;
goto RET_LABEL8;
RET_LABEL8:(void)0;
}
var6 = var7;
}
if (var6){
goto RET_LABEL;
} else {
}
{
{ /* Inline model#MClass#mclass_type (var_mclass) on <var_mclass:nullable MClass(MClass)> */
var14 = var_mclass->attrs[COLOR_model__MClass___mclass_type].val; /* _mclass_type on <var_mclass:nullable MClass(MClass)> */
if (unlikely(var14 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mclass_type");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 435);
show_backtrace(1);
}
var12 = var14;
RET_LABEL13:(void)0;
}
}
{
{ /* Inline typing#AExpr#mtype= (self,var12) on <self:ASuperstringExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var12; /* _mtype on <self:ASuperstringExpr> */
RET_LABEL15:(void)0;
}
}
{
{ /* Inline parser_nodes#ASuperstringExpr#n_exprs (self) on <self:ASuperstringExpr> */
var18 = self->attrs[COLOR_parser_nodes__ASuperstringExpr___n_exprs].val; /* _n_exprs on <self:ASuperstringExpr> */
if (unlikely(var18 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_exprs");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1861);
show_backtrace(1);
}
var16 = var18;
RET_LABEL17:(void)0;
}
}
var_ = var16;
{
var19 = parser_nodes__ANodes__iterator(var_);
}
var_20 = var19;
for(;;) {
{
var21 = ((short int (*)(val*))(var_20->class->vft[COLOR_abstract_collection__Iterator__is_ok]))(var_20) /* is_ok on <var_20:Iterator[AExpr]>*/;
}
if (var21){
{
var22 = ((val* (*)(val*))(var_20->class->vft[COLOR_abstract_collection__Iterator__item]))(var_20) /* item on <var_20:Iterator[AExpr]>*/;
}
var_nexpr = var22;
{
{ /* Inline typing#TypeVisitor#mmodule (var_v) on <var_v:TypeVisitor> */
var25 = var_v->attrs[COLOR_typing__TypeVisitor___mmodule].val; /* _mmodule on <var_v:TypeVisitor> */
if (unlikely(var25 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mmodule");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 36);
show_backtrace(1);
}
var23 = var25;
RET_LABEL24:(void)0;
}
}
{
var26 = model__MModule__object_type(var23);
}
{
var27 = typing__TypeVisitor__visit_expr_subtype(var_v, var_nexpr, var26);
}
{
((void (*)(val*))(var_20->class->vft[COLOR_abstract_collection__Iterator__next]))(var_20) /* next on <var_20:Iterator[AExpr]>*/;
}
} else {
goto BREAK_label;
}
}
BREAK_label: (void)0;
{
{ /* Inline abstract_collection#Iterator#finish (var_20) on <var_20:Iterator[AExpr]> */
RET_LABEL28:(void)0;
}
}
RET_LABEL:;
}
/* method typing#ASuperstringExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__ASuperstringExpr__accept_typing(val* self, val* p0) {
typing__ASuperstringExpr__accept_typing(self, p0); /* Direct call typing#ASuperstringExpr#accept_typing on <self:Object(ASuperstringExpr)>*/
RET_LABEL:;
}
/* method typing#AArrayExpr#with_capacity_callsite for (self: AArrayExpr): nullable CallSite */
val* typing__AArrayExpr__with_capacity_callsite(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
var1 = self->attrs[COLOR_typing__AArrayExpr___with_capacity_callsite].val; /* _with_capacity_callsite on <self:AArrayExpr> */
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AArrayExpr#with_capacity_callsite for (self: Object): nullable CallSite */
val* VIRTUAL_typing__AArrayExpr__with_capacity_callsite(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
val* var3 /* : nullable CallSite */;
{ /* Inline typing#AArrayExpr#with_capacity_callsite (self) on <self:Object(AArrayExpr)> */
var3 = self->attrs[COLOR_typing__AArrayExpr___with_capacity_callsite].val; /* _with_capacity_callsite on <self:Object(AArrayExpr)> */
var1 = var3;
RET_LABEL2:(void)0;
}
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AArrayExpr#with_capacity_callsite= for (self: AArrayExpr, nullable CallSite) */
void typing__AArrayExpr__with_capacity_callsite_61d(val* self, val* p0) {
self->attrs[COLOR_typing__AArrayExpr___with_capacity_callsite].val = p0; /* _with_capacity_callsite on <self:AArrayExpr> */
RET_LABEL:;
}
/* method typing#AArrayExpr#with_capacity_callsite= for (self: Object, nullable CallSite) */
void VIRTUAL_typing__AArrayExpr__with_capacity_callsite_61d(val* self, val* p0) {
{ /* Inline typing#AArrayExpr#with_capacity_callsite= (self,p0) on <self:Object(AArrayExpr)> */
self->attrs[COLOR_typing__AArrayExpr___with_capacity_callsite].val = p0; /* _with_capacity_callsite on <self:Object(AArrayExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
/* method typing#AArrayExpr#push_callsite for (self: AArrayExpr): nullable CallSite */
val* typing__AArrayExpr__push_callsite(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
var1 = self->attrs[COLOR_typing__AArrayExpr___push_callsite].val; /* _push_callsite on <self:AArrayExpr> */
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AArrayExpr#push_callsite for (self: Object): nullable CallSite */
val* VIRTUAL_typing__AArrayExpr__push_callsite(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
val* var3 /* : nullable CallSite */;
{ /* Inline typing#AArrayExpr#push_callsite (self) on <self:Object(AArrayExpr)> */
var3 = self->attrs[COLOR_typing__AArrayExpr___push_callsite].val; /* _push_callsite on <self:Object(AArrayExpr)> */
var1 = var3;
RET_LABEL2:(void)0;
}
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AArrayExpr#push_callsite= for (self: AArrayExpr, nullable CallSite) */
void typing__AArrayExpr__push_callsite_61d(val* self, val* p0) {
self->attrs[COLOR_typing__AArrayExpr___push_callsite].val = p0; /* _push_callsite on <self:AArrayExpr> */
RET_LABEL:;
}
/* method typing#AArrayExpr#push_callsite= for (self: Object, nullable CallSite) */
void VIRTUAL_typing__AArrayExpr__push_callsite_61d(val* self, val* p0) {
{ /* Inline typing#AArrayExpr#push_callsite= (self,p0) on <self:Object(AArrayExpr)> */
self->attrs[COLOR_typing__AArrayExpr___push_callsite].val = p0; /* _push_callsite on <self:Object(AArrayExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
/* method typing#AArrayExpr#accept_typing for (self: AArrayExpr, TypeVisitor) */
void typing__AArrayExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : null */;
val* var_mtype /* var mtype: nullable MType */;
val* var1 /* : nullable AType */;
val* var3 /* : nullable AType */;
val* var_ntype /* var ntype: nullable AType */;
val* var4 /* : null */;
short int var5 /* : Bool */;
short int var6 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var8 /* : Bool */;
short int var9 /* : Bool */;
short int var10 /* : Bool */;
val* var11 /* : nullable MType */;
val* var12 /* : null */;
short int var13 /* : Bool */;
short int var14 /* : Bool */;
val* var_other16 /* var other: nullable Object */;
short int var17 /* : Bool */;
short int var19 /* : Bool */;
val* var20 /* : Array[nullable MType] */;
val* var_mtypes /* var mtypes: Array[nullable MType] */;
short int var21 /* : Bool */;
short int var_useless /* var useless: Bool */;
val* var22 /* : AExprs */;
val* var24 /* : AExprs */;
val* var25 /* : ANodes[AExpr] */;
val* var27 /* : ANodes[AExpr] */;
val* var_ /* var : ANodes[AExpr] */;
val* var28 /* : Iterator[ANode] */;
val* var_29 /* var : Iterator[AExpr] */;
short int var30 /* : Bool */;
val* var31 /* : nullable Object */;
val* var_e /* var e: AExpr */;
val* var32 /* : nullable MType */;
val* var_t /* var t: nullable MType */;
val* var33 /* : null */;
short int var34 /* : Bool */;
short int var35 /* : Bool */;
short int var37 /* : Bool */;
short int var39 /* : Bool */;
val* var40 /* : null */;
short int var41 /* : Bool */;
short int var42 /* : Bool */;
short int var44 /* : Bool */;
short int var45 /* : Bool */;
short int var46 /* : Bool */;
val* var47 /* : nullable MType */;
val* var48 /* : null */;
short int var49 /* : Bool */;
short int var50 /* : Bool */;
short int var52 /* : Bool */;
short int var54 /* : Bool */;
short int var55 /* : Bool */;
short int var56 /* : Bool */;
short int var58 /* : Bool */;
short int var60 /* : Bool */;
short int var61 /* : Bool */;
val* var63 /* : null */;
short int var64 /* : Bool */;
short int var65 /* : Bool */;
short int var67 /* : Bool */;
short int var69 /* : Bool */;
val* var70 /* : nullable MType */;
val* var71 /* : null */;
short int var72 /* : Bool */;
short int var73 /* : Bool */;
short int var75 /* : Bool */;
short int var77 /* : Bool */;
static val* varonce;
val* var78 /* : String */;
char* var79 /* : NativeString */;
long var80 /* : Int */;
val* var81 /* : FlatString */;
static val* varonce82;
val* var83 /* : String */;
char* var84 /* : NativeString */;
long var85 /* : Int */;
val* var86 /* : FlatString */;
val* var87 /* : String */;
val* var88 /* : Array[Object] */;
long var89 /* : Int */;
val* var90 /* : NativeArray[Object] */;
val* var91 /* : String */;
val* var92 /* : null */;
short int var93 /* : Bool */;
short int var94 /* : Bool */;
short int var96 /* : Bool */;
short int var97 /* : Bool */;
short int var98 /* : Bool */;
val* var99 /* : ModelBuilder */;
val* var101 /* : ModelBuilder */;
static val* varonce102;
val* var103 /* : String */;
char* var104 /* : NativeString */;
long var105 /* : Int */;
val* var106 /* : FlatString */;
static val* varonce107;
val* var108 /* : String */;
char* var109 /* : NativeString */;
long var110 /* : Int */;
val* var111 /* : FlatString */;
static val* varonce112;
val* var113 /* : String */;
char* var114 /* : NativeString */;
long var115 /* : Int */;
val* var116 /* : FlatString */;
val* var117 /* : Array[Object] */;
long var118 /* : Int */;
val* var119 /* : NativeArray[Object] */;
val* var120 /* : String */;
static val* varonce121;
val* var122 /* : String */;
char* var123 /* : NativeString */;
long var124 /* : Int */;
val* var125 /* : FlatString */;
val* var126 /* : nullable MClass */;
val* var_mclass /* var mclass: nullable MClass */;
val* var127 /* : null */;
short int var128 /* : Bool */;
short int var129 /* : Bool */;
short int var131 /* : Bool */;
short int var133 /* : Bool */;
val* var134 /* : Array[MType] */;
long var135 /* : Int */;
val* var_136 /* var : Array[MType] */;
val* var137 /* : MClassType */;
val* var_array_mtype /* var array_mtype: MClassType */;
static val* varonce138;
val* var139 /* : String */;
char* var140 /* : NativeString */;
long var141 /* : Int */;
val* var142 /* : FlatString */;
short int var143 /* : Bool */;
val* var144 /* : nullable CallSite */;
static val* varonce146;
val* var147 /* : String */;
char* var148 /* : NativeString */;
long var149 /* : Int */;
val* var150 /* : FlatString */;
short int var151 /* : Bool */;
val* var152 /* : nullable CallSite */;
var_v = p0;
var = NULL;
var_mtype = var;
{
{ /* Inline parser_nodes#AArrayExpr#n_type (self) on <self:AArrayExpr> */
var3 = self->attrs[COLOR_parser_nodes__AArrayExpr___n_type].val; /* _n_type on <self:AArrayExpr> */
var1 = var3;
RET_LABEL2:(void)0;
}
}
var_ntype = var1;
var4 = NULL;
if (var_ntype == NULL) {
var5 = 0; /* is null */
} else {
var5 = 1; /* arg is null and recv is not */
}
if (0) {
{ /* Inline kernel#Object#!= (var_ntype,var4) on <var_ntype:nullable AType> */
var_other = var4;
{
var9 = ((short int (*)(val*, val*))(var_ntype->class->vft[COLOR_kernel__Object___61d_61d]))(var_ntype, var_other) /* == on <var_ntype:nullable AType(AType)>*/;
var8 = var9;
}
var10 = !var8;
var6 = var10;
goto RET_LABEL7;
RET_LABEL7:(void)0;
}
var5 = var6;
}
if (var5){
{
var11 = typing__TypeVisitor__resolve_mtype(var_v, var_ntype);
}
var_mtype = var11;
var12 = NULL;
if (var_mtype == NULL) {
var13 = 1; /* is null */
} else {
var13 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_mtype,var12) on <var_mtype:nullable MType> */
var_other16 = var12;
{
{ /* Inline kernel#Object#is_same_instance (var_mtype,var_other16) on <var_mtype:nullable MType(MType)> */
var19 = var_mtype == var_other16;
var17 = var19;
goto RET_LABEL18;
RET_LABEL18:(void)0;
}
}
var14 = var17;
goto RET_LABEL15;
RET_LABEL15:(void)0;
}
var13 = var14;
}
if (var13){
goto RET_LABEL;
} else {
}
} else {
}
var20 = NEW_array__Array(&type_array__Arraynullable_model__MType);
{
((void (*)(val*))(var20->class->vft[COLOR_kernel__Object__init]))(var20) /* init on <var20:Array[nullable MType]>*/;
}
var_mtypes = var20;
var21 = 0;
var_useless = var21;
{
{ /* Inline parser_nodes#AArrayExpr#n_exprs (self) on <self:AArrayExpr> */
var24 = self->attrs[COLOR_parser_nodes__AArrayExpr___n_exprs].val; /* _n_exprs on <self:AArrayExpr> */
if (unlikely(var24 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_exprs");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1776);
show_backtrace(1);
}
var22 = var24;
RET_LABEL23:(void)0;
}
}
{
{ /* Inline parser_nodes#AExprs#n_exprs (var22) on <var22:AExprs> */
var27 = var22->attrs[COLOR_parser_nodes__AExprs___n_exprs].val; /* _n_exprs on <var22:AExprs> */
if (unlikely(var27 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_exprs");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1946);
show_backtrace(1);
}
var25 = var27;
RET_LABEL26:(void)0;
}
}
var_ = var25;
{
var28 = parser_nodes__ANodes__iterator(var_);
}
var_29 = var28;
for(;;) {
{
var30 = ((short int (*)(val*))(var_29->class->vft[COLOR_abstract_collection__Iterator__is_ok]))(var_29) /* is_ok on <var_29:Iterator[AExpr]>*/;
}
if (var30){
{
var31 = ((val* (*)(val*))(var_29->class->vft[COLOR_abstract_collection__Iterator__item]))(var_29) /* item on <var_29:Iterator[AExpr]>*/;
}
var_e = var31;
{
var32 = typing__TypeVisitor__visit_expr(var_v, var_e);
}
var_t = var32;
var33 = NULL;
if (var_t == NULL) {
var34 = 1; /* is null */
} else {
var34 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_t,var33) on <var_t:nullable MType> */
var_other16 = var33;
{
{ /* Inline kernel#Object#is_same_instance (var_t,var_other16) on <var_t:nullable MType(MType)> */
var39 = var_t == var_other16;
var37 = var39;
goto RET_LABEL38;
RET_LABEL38:(void)0;
}
}
var35 = var37;
goto RET_LABEL36;
RET_LABEL36:(void)0;
}
var34 = var35;
}
if (var34){
goto RET_LABEL;
} else {
}
var40 = NULL;
if (var_mtype == NULL) {
var41 = 0; /* is null */
} else {
var41 = 1; /* arg is null and recv is not */
}
if (0) {
{ /* Inline kernel#Object#!= (var_mtype,var40) on <var_mtype:nullable MType> */
var_other = var40;
{
var45 = ((short int (*)(val*, val*))(var_mtype->class->vft[COLOR_kernel__Object___61d_61d]))(var_mtype, var_other) /* == on <var_mtype:nullable MType(MType)>*/;
var44 = var45;
}
var46 = !var44;
var42 = var46;
goto RET_LABEL43;
RET_LABEL43:(void)0;
}
var41 = var42;
}
if (var41){
{
var47 = typing__TypeVisitor__check_subtype(var_v, var_e, var_t, var_mtype);
}
var48 = NULL;
if (var47 == NULL) {
var49 = 1; /* is null */
} else {
var49 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var47,var48) on <var47:nullable MType> */
var_other16 = var48;
{
{ /* Inline kernel#Object#is_same_instance (var47,var_other16) on <var47:nullable MType(MType)> */
var54 = var47 == var_other16;
var52 = var54;
goto RET_LABEL53;
RET_LABEL53:(void)0;
}
}
var50 = var52;
goto RET_LABEL51;
RET_LABEL51:(void)0;
}
var49 = var50;
}
if (var49){
goto RET_LABEL;
} else {
}
{
{ /* Inline kernel#Object#== (var_t,var_mtype) on <var_t:nullable MType(MType)> */
var_other16 = var_mtype;
{
{ /* Inline kernel#Object#is_same_instance (var_t,var_other16) on <var_t:nullable MType(MType)> */
var60 = var_t == var_other16;
var58 = var60;
goto RET_LABEL59;
RET_LABEL59:(void)0;
}
}
var56 = var58;
goto RET_LABEL57;
RET_LABEL57:(void)0;
}
var55 = var56;
}
if (var55){
var61 = 1;
var_useless = var61;
} else {
}
} else {
{
array__Array__add(var_mtypes, var_t); /* Direct call array#Array#add on <var_mtypes:Array[nullable MType]>*/
}
}
{
((void (*)(val*))(var_29->class->vft[COLOR_abstract_collection__Iterator__next]))(var_29) /* next on <var_29:Iterator[AExpr]>*/;
}
} else {
goto BREAK_label;
}
}
BREAK_label: (void)0;
{
{ /* Inline abstract_collection#Iterator#finish (var_29) on <var_29:Iterator[AExpr]> */
RET_LABEL62:(void)0;
}
}
var63 = NULL;
if (var_mtype == NULL) {
var64 = 1; /* is null */
} else {
var64 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_mtype,var63) on <var_mtype:nullable MType> */
var_other16 = var63;
{
{ /* Inline kernel#Object#is_same_instance (var_mtype,var_other16) on <var_mtype:nullable MType(MType)> */
var69 = var_mtype == var_other16;
var67 = var69;
goto RET_LABEL68;
RET_LABEL68:(void)0;
}
}
var65 = var67;
goto RET_LABEL66;
RET_LABEL66:(void)0;
}
var64 = var65;
}
if (var64){
{
var70 = typing__TypeVisitor__merge_types(var_v, self, var_mtypes);
}
var_mtype = var70;
} else {
}
var71 = NULL;
if (var_mtype == NULL) {
var72 = 1; /* is null */
} else {
var72 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_mtype,var71) on <var_mtype:nullable MType> */
var_other16 = var71;
{
{ /* Inline kernel#Object#is_same_instance (var_mtype,var_other16) on <var_mtype:nullable MType(MType)> */
var77 = var_mtype == var_other16;
var75 = var77;
goto RET_LABEL76;
RET_LABEL76:(void)0;
}
}
var73 = var75;
goto RET_LABEL74;
RET_LABEL74:(void)0;
}
var72 = var73;
}
if (var72){
if (varonce) {
var78 = varonce;
} else {
var79 = "Type Error: ambiguous array type ";
var80 = 33;
var81 = string__NativeString__to_s_with_length(var79, var80);
var78 = var81;
varonce = var78;
}
if (varonce82) {
var83 = varonce82;
} else {
var84 = " ";
var85 = 1;
var86 = string__NativeString__to_s_with_length(var84, var85);
var83 = var86;
varonce82 = var83;
}
{
var87 = string__Collection__join(var_mtypes, var83);
}
var88 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var88 = array_instance Array[Object] */
var89 = 2;
var90 = NEW_array__NativeArray(var89, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var90)->values[0] = (val*) var78;
((struct instance_array__NativeArray*)var90)->values[1] = (val*) var87;
{
((void (*)(val*, val*, long))(var88->class->vft[COLOR_array__Array__with_native]))(var88, var90, var89) /* with_native on <var88:Array[Object]>*/;
}
}
{
var91 = ((val* (*)(val*))(var88->class->vft[COLOR_string__Object__to_s]))(var88) /* to_s on <var88:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var91); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
if (var_useless){
var92 = NULL;
if (var_ntype == NULL) {
var93 = 0; /* is null */
} else {
var93 = 1; /* arg is null and recv is not */
}
if (0) {
{ /* Inline kernel#Object#!= (var_ntype,var92) on <var_ntype:nullable AType> */
var_other = var92;
{
var97 = ((short int (*)(val*, val*))(var_ntype->class->vft[COLOR_kernel__Object___61d_61d]))(var_ntype, var_other) /* == on <var_ntype:nullable AType(AType)>*/;
var96 = var97;
}
var98 = !var96;
var94 = var98;
goto RET_LABEL95;
RET_LABEL95:(void)0;
}
var93 = var94;
}
if (unlikely(!var93)) {
PRINT_ERROR("Runtime error: %s", "Assert failed");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1213);
show_backtrace(1);
}
{
{ /* Inline typing#TypeVisitor#modelbuilder (var_v) on <var_v:TypeVisitor> */
var101 = var_v->attrs[COLOR_typing__TypeVisitor___modelbuilder].val; /* _modelbuilder on <var_v:TypeVisitor> */
if (unlikely(var101 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _modelbuilder");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 34);
show_backtrace(1);
}
var99 = var101;
RET_LABEL100:(void)0;
}
}
if (varonce102) {
var103 = varonce102;
} else {
var104 = "useless-type";
var105 = 12;
var106 = string__NativeString__to_s_with_length(var104, var105);
var103 = var106;
varonce102 = var103;
}
if (varonce107) {
var108 = varonce107;
} else {
var109 = "Warning: useless type declaration `";
var110 = 35;
var111 = string__NativeString__to_s_with_length(var109, var110);
var108 = var111;
varonce107 = var108;
}
if (varonce112) {
var113 = varonce112;
} else {
var114 = "` in literal Array since it can be inferred from the elements type.";
var115 = 67;
var116 = string__NativeString__to_s_with_length(var114, var115);
var113 = var116;
varonce112 = var113;
}
var117 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var117 = array_instance Array[Object] */
var118 = 3;
var119 = NEW_array__NativeArray(var118, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var119)->values[0] = (val*) var108;
((struct instance_array__NativeArray*)var119)->values[1] = (val*) var_mtype;
((struct instance_array__NativeArray*)var119)->values[2] = (val*) var113;
{
((void (*)(val*, val*, long))(var117->class->vft[COLOR_array__Array__with_native]))(var117, var119, var118) /* with_native on <var117:Array[Object]>*/;
}
}
{
var120 = ((val* (*)(val*))(var117->class->vft[COLOR_string__Object__to_s]))(var117) /* to_s on <var117:Array[Object]>*/;
}
{
modelbuilder__ModelBuilder__warning(var99, var_ntype, var103, var120); /* Direct call modelbuilder#ModelBuilder#warning on <var99:ModelBuilder>*/
}
} else {
}
if (varonce121) {
var122 = varonce121;
} else {
var123 = "Array";
var124 = 5;
var125 = string__NativeString__to_s_with_length(var123, var124);
var122 = var125;
varonce121 = var122;
}
{
var126 = typing__TypeVisitor__get_mclass(var_v, self, var122);
}
var_mclass = var126;
var127 = NULL;
if (var_mclass == NULL) {
var128 = 1; /* is null */
} else {
var128 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_mclass,var127) on <var_mclass:nullable MClass> */
var_other16 = var127;
{
{ /* Inline kernel#Object#is_same_instance (var_mclass,var_other16) on <var_mclass:nullable MClass(MClass)> */
var133 = var_mclass == var_other16;
var131 = var133;
goto RET_LABEL132;
RET_LABEL132:(void)0;
}
}
var129 = var131;
goto RET_LABEL130;
RET_LABEL130:(void)0;
}
var128 = var129;
}
if (var128){
goto RET_LABEL;
} else {
}
var134 = NEW_array__Array(&type_array__Arraymodel__MType);
var135 = 1;
{
array__Array__with_capacity(var134, var135); /* Direct call array#Array#with_capacity on <var134:Array[MType]>*/
}
var_136 = var134;
{
array__AbstractArray__push(var_136, var_mtype); /* Direct call array#AbstractArray#push on <var_136:Array[MType]>*/
}
{
var137 = model__MClass__get_mtype(var_mclass, var_136);
}
var_array_mtype = var137;
if (varonce138) {
var139 = varonce138;
} else {
var140 = "with_capacity";
var141 = 13;
var142 = string__NativeString__to_s_with_length(var140, var141);
var139 = var142;
varonce138 = var139;
}
var143 = 0;
{
var144 = typing__TypeVisitor__get_method(var_v, self, var_array_mtype, var139, var143);
}
{
{ /* Inline typing#AArrayExpr#with_capacity_callsite= (self,var144) on <self:AArrayExpr> */
self->attrs[COLOR_typing__AArrayExpr___with_capacity_callsite].val = var144; /* _with_capacity_callsite on <self:AArrayExpr> */
RET_LABEL145:(void)0;
}
}
if (varonce146) {
var147 = varonce146;
} else {
var148 = "push";
var149 = 4;
var150 = string__NativeString__to_s_with_length(var148, var149);
var147 = var150;
varonce146 = var147;
}
var151 = 0;
{
var152 = typing__TypeVisitor__get_method(var_v, self, var_array_mtype, var147, var151);
}
{
{ /* Inline typing#AArrayExpr#push_callsite= (self,var152) on <self:AArrayExpr> */
self->attrs[COLOR_typing__AArrayExpr___push_callsite].val = var152; /* _push_callsite on <self:AArrayExpr> */
RET_LABEL153:(void)0;
}
}
{
{ /* Inline typing#AExpr#mtype= (self,var_array_mtype) on <self:AArrayExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var_array_mtype; /* _mtype on <self:AArrayExpr> */
RET_LABEL154:(void)0;
}
}
RET_LABEL:;
}
/* method typing#AArrayExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AArrayExpr__accept_typing(val* self, val* p0) {
typing__AArrayExpr__accept_typing(self, p0); /* Direct call typing#AArrayExpr#accept_typing on <self:Object(AArrayExpr)>*/
RET_LABEL:;
}
/* method typing#ARangeExpr#init_callsite for (self: ARangeExpr): nullable CallSite */
val* typing__ARangeExpr__init_callsite(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
var1 = self->attrs[COLOR_typing__ARangeExpr___init_callsite].val; /* _init_callsite on <self:ARangeExpr> */
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ARangeExpr#init_callsite for (self: Object): nullable CallSite */
val* VIRTUAL_typing__ARangeExpr__init_callsite(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
val* var3 /* : nullable CallSite */;
{ /* Inline typing#ARangeExpr#init_callsite (self) on <self:Object(ARangeExpr)> */
var3 = self->attrs[COLOR_typing__ARangeExpr___init_callsite].val; /* _init_callsite on <self:Object(ARangeExpr)> */
var1 = var3;
RET_LABEL2:(void)0;
}
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ARangeExpr#init_callsite= for (self: ARangeExpr, nullable CallSite) */
void typing__ARangeExpr__init_callsite_61d(val* self, val* p0) {
self->attrs[COLOR_typing__ARangeExpr___init_callsite].val = p0; /* _init_callsite on <self:ARangeExpr> */
RET_LABEL:;
}
/* method typing#ARangeExpr#init_callsite= for (self: Object, nullable CallSite) */
void VIRTUAL_typing__ARangeExpr__init_callsite_61d(val* self, val* p0) {
{ /* Inline typing#ARangeExpr#init_callsite= (self,p0) on <self:Object(ARangeExpr)> */
self->attrs[COLOR_typing__ARangeExpr___init_callsite].val = p0; /* _init_callsite on <self:Object(ARangeExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
/* method typing#ARangeExpr#accept_typing for (self: ARangeExpr, TypeVisitor) */
void typing__ARangeExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
static val* varonce;
val* var /* : String */;
char* var1 /* : NativeString */;
long var2 /* : Int */;
val* var3 /* : FlatString */;
val* var4 /* : nullable MClass */;
val* var_discrete_class /* var discrete_class: nullable MClass */;
val* var5 /* : null */;
short int var6 /* : Bool */;
short int var7 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var9 /* : Bool */;
short int var11 /* : Bool */;
val* var12 /* : MClassDef */;
val* var14 /* : MClassDef */;
val* var15 /* : MClassType */;
val* var17 /* : MClassType */;
val* var_discrete_type /* var discrete_type: MClassType */;
val* var18 /* : AExpr */;
val* var20 /* : AExpr */;
val* var21 /* : nullable MType */;
val* var_t1 /* var t1: nullable MType */;
val* var22 /* : AExpr */;
val* var24 /* : AExpr */;
val* var25 /* : nullable MType */;
val* var_t2 /* var t2: nullable MType */;
short int var26 /* : Bool */;
val* var27 /* : null */;
short int var28 /* : Bool */;
short int var29 /* : Bool */;
short int var31 /* : Bool */;
short int var33 /* : Bool */;
short int var_ /* var : Bool */;
val* var34 /* : null */;
short int var35 /* : Bool */;
short int var36 /* : Bool */;
short int var38 /* : Bool */;
short int var40 /* : Bool */;
static val* varonce41;
val* var42 /* : String */;
char* var43 /* : NativeString */;
long var44 /* : Int */;
val* var45 /* : FlatString */;
val* var46 /* : nullable MClass */;
val* var_mclass /* var mclass: nullable MClass */;
val* var47 /* : null */;
short int var48 /* : Bool */;
short int var49 /* : Bool */;
short int var51 /* : Bool */;
short int var53 /* : Bool */;
short int var54 /* : Bool */;
val* var55 /* : Array[MType] */;
long var56 /* : Int */;
val* var_57 /* var : Array[MType] */;
val* var58 /* : MClassType */;
val* var_mtype /* var mtype: nullable Object */;
short int var59 /* : Bool */;
val* var60 /* : Array[MType] */;
long var61 /* : Int */;
val* var_62 /* var : Array[MType] */;
val* var63 /* : MClassType */;
static val* varonce64;
val* var65 /* : String */;
char* var66 /* : NativeString */;
long var67 /* : Int */;
val* var68 /* : FlatString */;
static val* varonce69;
val* var70 /* : String */;
char* var71 /* : NativeString */;
long var72 /* : Int */;
val* var73 /* : FlatString */;
val* var74 /* : Array[Object] */;
long var75 /* : Int */;
val* var76 /* : NativeArray[Object] */;
val* var77 /* : String */;
short int var79 /* : Bool */;
int cltype;
int idtype;
static val* varonce80;
val* var81 /* : String */;
char* var82 /* : NativeString */;
long var83 /* : Int */;
val* var84 /* : FlatString */;
short int var85 /* : Bool */;
val* var86 /* : nullable CallSite */;
val* var_callsite /* var callsite: nullable Object */;
short int var87 /* : Bool */;
int cltype88;
int idtype89;
static val* varonce90;
val* var91 /* : String */;
char* var92 /* : NativeString */;
long var93 /* : Int */;
val* var94 /* : FlatString */;
short int var95 /* : Bool */;
val* var96 /* : nullable CallSite */;
var_v = p0;
if (varonce) {
var = varonce;
} else {
var1 = "Discrete";
var2 = 8;
var3 = string__NativeString__to_s_with_length(var1, var2);
var = var3;
varonce = var;
}
{
var4 = typing__TypeVisitor__get_mclass(var_v, self, var);
}
var_discrete_class = var4;
var5 = NULL;
if (var_discrete_class == NULL) {
var6 = 1; /* is null */
} else {
var6 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_discrete_class,var5) on <var_discrete_class:nullable MClass> */
var_other = var5;
{
{ /* Inline kernel#Object#is_same_instance (var_discrete_class,var_other) on <var_discrete_class:nullable MClass(MClass)> */
var11 = var_discrete_class == var_other;
var9 = var11;
goto RET_LABEL10;
RET_LABEL10:(void)0;
}
}
var7 = var9;
goto RET_LABEL8;
RET_LABEL8:(void)0;
}
var6 = var7;
}
if (var6){
goto RET_LABEL;
} else {
}
{
{ /* Inline model#MClass#intro (var_discrete_class) on <var_discrete_class:nullable MClass(MClass)> */
var14 = var_discrete_class->attrs[COLOR_model__MClass___intro].val; /* _intro on <var_discrete_class:nullable MClass(MClass)> */
if (unlikely(var14 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _intro");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 420);
show_backtrace(1);
}
var12 = var14;
RET_LABEL13:(void)0;
}
}
{
{ /* Inline model#MClassDef#bound_mtype (var12) on <var12:MClassDef> */
var17 = var12->attrs[COLOR_model__MClassDef___bound_mtype].val; /* _bound_mtype on <var12:MClassDef> */
if (unlikely(var17 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _bound_mtype");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 495);
show_backtrace(1);
}
var15 = var17;
RET_LABEL16:(void)0;
}
}
var_discrete_type = var15;
{
{ /* Inline parser_nodes#ARangeExpr#n_expr (self) on <self:ARangeExpr> */
var20 = self->attrs[COLOR_parser_nodes__ARangeExpr___n_expr].val; /* _n_expr on <self:ARangeExpr> */
if (unlikely(var20 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1754);
show_backtrace(1);
}
var18 = var20;
RET_LABEL19:(void)0;
}
}
{
var21 = typing__TypeVisitor__visit_expr_subtype(var_v, var18, var_discrete_type);
}
var_t1 = var21;
{
{ /* Inline parser_nodes#ARangeExpr#n_expr2 (self) on <self:ARangeExpr> */
var24 = self->attrs[COLOR_parser_nodes__ARangeExpr___n_expr2].val; /* _n_expr2 on <self:ARangeExpr> */
if (unlikely(var24 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr2");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1755);
show_backtrace(1);
}
var22 = var24;
RET_LABEL23:(void)0;
}
}
{
var25 = typing__TypeVisitor__visit_expr_subtype(var_v, var22, var_discrete_type);
}
var_t2 = var25;
var27 = NULL;
if (var_t1 == NULL) {
var28 = 1; /* is null */
} else {
var28 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_t1,var27) on <var_t1:nullable MType> */
var_other = var27;
{
{ /* Inline kernel#Object#is_same_instance (var_t1,var_other) on <var_t1:nullable MType(MType)> */
var33 = var_t1 == var_other;
var31 = var33;
goto RET_LABEL32;
RET_LABEL32:(void)0;
}
}
var29 = var31;
goto RET_LABEL30;
RET_LABEL30:(void)0;
}
var28 = var29;
}
var_ = var28;
if (var28){
var26 = var_;
} else {
var34 = NULL;
if (var_t2 == NULL) {
var35 = 1; /* is null */
} else {
var35 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_t2,var34) on <var_t2:nullable MType> */
var_other = var34;
{
{ /* Inline kernel#Object#is_same_instance (var_t2,var_other) on <var_t2:nullable MType(MType)> */
var40 = var_t2 == var_other;
var38 = var40;
goto RET_LABEL39;
RET_LABEL39:(void)0;
}
}
var36 = var38;
goto RET_LABEL37;
RET_LABEL37:(void)0;
}
var35 = var36;
}
var26 = var35;
}
if (var26){
goto RET_LABEL;
} else {
}
if (varonce41) {
var42 = varonce41;
} else {
var43 = "Range";
var44 = 5;
var45 = string__NativeString__to_s_with_length(var43, var44);
var42 = var45;
varonce41 = var42;
}
{
var46 = typing__TypeVisitor__get_mclass(var_v, self, var42);
}
var_mclass = var46;
var47 = NULL;
if (var_mclass == NULL) {
var48 = 1; /* is null */
} else {
var48 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_mclass,var47) on <var_mclass:nullable MClass> */
var_other = var47;
{
{ /* Inline kernel#Object#is_same_instance (var_mclass,var_other) on <var_mclass:nullable MClass(MClass)> */
var53 = var_mclass == var_other;
var51 = var53;
goto RET_LABEL52;
RET_LABEL52:(void)0;
}
}
var49 = var51;
goto RET_LABEL50;
RET_LABEL50:(void)0;
}
var48 = var49;
}
if (var48){
goto RET_LABEL;
} else {
}
{
var54 = typing__TypeVisitor__is_subtype(var_v, var_t1, var_t2);
}
if (var54){
var55 = NEW_array__Array(&type_array__Arraymodel__MType);
var56 = 1;
{
array__Array__with_capacity(var55, var56); /* Direct call array#Array#with_capacity on <var55:Array[MType]>*/
}
var_57 = var55;
{
array__AbstractArray__push(var_57, var_t2); /* Direct call array#AbstractArray#push on <var_57:Array[MType]>*/
}
{
var58 = model__MClass__get_mtype(var_mclass, var_57);
}
var_mtype = var58;
} else {
{
var59 = typing__TypeVisitor__is_subtype(var_v, var_t2, var_t1);
}
if (var59){
var60 = NEW_array__Array(&type_array__Arraymodel__MType);
var61 = 1;
{
array__Array__with_capacity(var60, var61); /* Direct call array#Array#with_capacity on <var60:Array[MType]>*/
}
var_62 = var60;
{
array__AbstractArray__push(var_62, var_t1); /* Direct call array#AbstractArray#push on <var_62:Array[MType]>*/
}
{
var63 = model__MClass__get_mtype(var_mclass, var_62);
}
var_mtype = var63;
} else {
if (varonce64) {
var65 = varonce64;
} else {
var66 = "Type Error: Cannot create range: ";
var67 = 33;
var68 = string__NativeString__to_s_with_length(var66, var67);
var65 = var68;
varonce64 = var65;
}
if (varonce69) {
var70 = varonce69;
} else {
var71 = " vs ";
var72 = 4;
var73 = string__NativeString__to_s_with_length(var71, var72);
var70 = var73;
varonce69 = var70;
}
var74 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var74 = array_instance Array[Object] */
var75 = 4;
var76 = NEW_array__NativeArray(var75, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var76)->values[0] = (val*) var65;
((struct instance_array__NativeArray*)var76)->values[1] = (val*) var_t1;
((struct instance_array__NativeArray*)var76)->values[2] = (val*) var70;
((struct instance_array__NativeArray*)var76)->values[3] = (val*) var_t2;
{
((void (*)(val*, val*, long))(var74->class->vft[COLOR_array__Array__with_native]))(var74, var76, var75) /* with_native on <var74:Array[Object]>*/;
}
}
{
var77 = ((val* (*)(val*))(var74->class->vft[COLOR_string__Object__to_s]))(var74) /* to_s on <var74:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var77); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
}
}
{
{ /* Inline typing#AExpr#mtype= (self,var_mtype) on <self:ARangeExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var_mtype; /* _mtype on <self:ARangeExpr> */
RET_LABEL78:(void)0;
}
}
/* <self:ARangeExpr> isa ACrangeExpr */
cltype = type_parser_nodes__ACrangeExpr.color;
idtype = type_parser_nodes__ACrangeExpr.id;
if(cltype >= self->type->table_size) {
var79 = 0;
} else {
var79 = self->type->type_table[cltype] == idtype;
}
if (var79){
if (varonce80) {
var81 = varonce80;
} else {
var82 = "init";
var83 = 4;
var84 = string__NativeString__to_s_with_length(var82, var83);
var81 = var84;
varonce80 = var81;
}
var85 = 0;
{
var86 = typing__TypeVisitor__get_method(var_v, self, var_mtype, var81, var85);
}
var_callsite = var86;
} else {
/* <self:ARangeExpr> isa AOrangeExpr */
cltype88 = type_parser_nodes__AOrangeExpr.color;
idtype89 = type_parser_nodes__AOrangeExpr.id;
if(cltype88 >= self->type->table_size) {
var87 = 0;
} else {
var87 = self->type->type_table[cltype88] == idtype89;
}
if (var87){
if (varonce90) {
var91 = varonce90;
} else {
var92 = "without_last";
var93 = 12;
var94 = string__NativeString__to_s_with_length(var92, var93);
var91 = var94;
varonce90 = var91;
}
var95 = 0;
{
var96 = typing__TypeVisitor__get_method(var_v, self, var_mtype, var91, var95);
}
var_callsite = var96;
} else {
PRINT_ERROR("Runtime error: %s", "Aborted");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1259);
show_backtrace(1);
}
}
{
{ /* Inline typing#ARangeExpr#init_callsite= (self,var_callsite) on <self:ARangeExpr> */
self->attrs[COLOR_typing__ARangeExpr___init_callsite].val = var_callsite; /* _init_callsite on <self:ARangeExpr> */
RET_LABEL97:(void)0;
}
}
RET_LABEL:;
}
/* method typing#ARangeExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__ARangeExpr__accept_typing(val* self, val* p0) {
typing__ARangeExpr__accept_typing(self, p0); /* Direct call typing#ARangeExpr#accept_typing on <self:Object(ARangeExpr)>*/
RET_LABEL:;
}
/* method typing#ANullExpr#accept_typing for (self: ANullExpr, TypeVisitor) */
void typing__ANullExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : MModule */;
val* var2 /* : MModule */;
val* var3 /* : Model */;
val* var5 /* : Model */;
val* var6 /* : MNullType */;
val* var8 /* : MNullType */;
var_v = p0;
{
{ /* Inline typing#TypeVisitor#mmodule (var_v) on <var_v:TypeVisitor> */
var2 = var_v->attrs[COLOR_typing__TypeVisitor___mmodule].val; /* _mmodule on <var_v:TypeVisitor> */
if (unlikely(var2 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mmodule");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 36);
show_backtrace(1);
}
var = var2;
RET_LABEL1:(void)0;
}
}
{
{ /* Inline mmodule#MModule#model (var) on <var:MModule> */
var5 = var->attrs[COLOR_mmodule__MModule___model].val; /* _model on <var:MModule> */
if (unlikely(var5 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _model");
PRINT_ERROR(" (%s:%d)\n", "model/mmodule.nit", 72);
show_backtrace(1);
}
var3 = var5;
RET_LABEL4:(void)0;
}
}
{
{ /* Inline model#Model#null_type (var3) on <var3:Model> */
var8 = var3->attrs[COLOR_model__Model___null_type].val; /* _null_type on <var3:Model> */
if (unlikely(var8 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _null_type");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 102);
show_backtrace(1);
}
var6 = var8;
RET_LABEL7:(void)0;
}
}
{
{ /* Inline typing#AExpr#mtype= (self,var6) on <self:ANullExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var6; /* _mtype on <self:ANullExpr> */
RET_LABEL9:(void)0;
}
}
RET_LABEL:;
}
/* method typing#ANullExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__ANullExpr__accept_typing(val* self, val* p0) {
typing__ANullExpr__accept_typing(self, p0); /* Direct call typing#ANullExpr#accept_typing on <self:Object(ANullExpr)>*/
RET_LABEL:;
}
/* method typing#AIsaExpr#cast_type for (self: AIsaExpr): nullable MType */
val* typing__AIsaExpr__cast_type(val* self) {
val* var /* : nullable MType */;
val* var1 /* : nullable MType */;
var1 = self->attrs[COLOR_typing__AIsaExpr___cast_type].val; /* _cast_type on <self:AIsaExpr> */
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AIsaExpr#cast_type for (self: Object): nullable MType */
val* VIRTUAL_typing__AIsaExpr__cast_type(val* self) {
val* var /* : nullable MType */;
val* var1 /* : nullable MType */;
val* var3 /* : nullable MType */;
{ /* Inline typing#AIsaExpr#cast_type (self) on <self:Object(AIsaExpr)> */
var3 = self->attrs[COLOR_typing__AIsaExpr___cast_type].val; /* _cast_type on <self:Object(AIsaExpr)> */
var1 = var3;
RET_LABEL2:(void)0;
}
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AIsaExpr#cast_type= for (self: AIsaExpr, nullable MType) */
void typing__AIsaExpr__cast_type_61d(val* self, val* p0) {
self->attrs[COLOR_typing__AIsaExpr___cast_type].val = p0; /* _cast_type on <self:AIsaExpr> */
RET_LABEL:;
}
/* method typing#AIsaExpr#cast_type= for (self: Object, nullable MType) */
void VIRTUAL_typing__AIsaExpr__cast_type_61d(val* self, val* p0) {
{ /* Inline typing#AIsaExpr#cast_type= (self,p0) on <self:Object(AIsaExpr)> */
self->attrs[COLOR_typing__AIsaExpr___cast_type].val = p0; /* _cast_type on <self:Object(AIsaExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
/* method typing#AIsaExpr#accept_typing for (self: AIsaExpr, TypeVisitor) */
void typing__AIsaExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : AExpr */;
val* var2 /* : AExpr */;
val* var3 /* : AType */;
val* var5 /* : AType */;
val* var6 /* : nullable MType */;
val* var_mtype /* var mtype: nullable MType */;
val* var8 /* : AExpr */;
val* var10 /* : AExpr */;
val* var11 /* : nullable Variable */;
val* var_variable /* var variable: nullable Variable */;
val* var12 /* : null */;
short int var13 /* : Bool */;
short int var14 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var16 /* : Bool */;
short int var17 /* : Bool */;
short int var18 /* : Bool */;
val* var19 /* : nullable FlowContext */;
val* var21 /* : nullable FlowContext */;
val* var22 /* : FlowContext */;
val* var24 /* : FlowContext */;
val* var25 /* : nullable MType */;
var_v = p0;
{
{ /* Inline parser_nodes#AIsaExpr#n_expr (self) on <self:AIsaExpr> */
var2 = self->attrs[COLOR_parser_nodes__AIsaExpr___n_expr].val; /* _n_expr on <self:AIsaExpr> */
if (unlikely(var2 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1561);
show_backtrace(1);
}
var = var2;
RET_LABEL1:(void)0;
}
}
{
{ /* Inline parser_nodes#AIsaExpr#n_type (self) on <self:AIsaExpr> */
var5 = self->attrs[COLOR_parser_nodes__AIsaExpr___n_type].val; /* _n_type on <self:AIsaExpr> */
if (unlikely(var5 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_type");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1562);
show_backtrace(1);
}
var3 = var5;
RET_LABEL4:(void)0;
}
}
{
var6 = typing__TypeVisitor__visit_expr_cast(var_v, self, var, var3);
}
var_mtype = var6;
{
{ /* Inline typing#AIsaExpr#cast_type= (self,var_mtype) on <self:AIsaExpr> */
self->attrs[COLOR_typing__AIsaExpr___cast_type].val = var_mtype; /* _cast_type on <self:AIsaExpr> */
RET_LABEL7:(void)0;
}
}
{
{ /* Inline parser_nodes#AIsaExpr#n_expr (self) on <self:AIsaExpr> */
var10 = self->attrs[COLOR_parser_nodes__AIsaExpr___n_expr].val; /* _n_expr on <self:AIsaExpr> */
if (unlikely(var10 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1561);
show_backtrace(1);
}
var8 = var10;
RET_LABEL9:(void)0;
}
}
{
var11 = ((val* (*)(val*))(var8->class->vft[COLOR_typing__AExpr__its_variable]))(var8) /* its_variable on <var8:AExpr>*/;
}
var_variable = var11;
var12 = NULL;
if (var_variable == NULL) {
var13 = 0; /* is null */
} else {
var13 = 1; /* arg is null and recv is not */
}
if (0) {
{ /* Inline kernel#Object#!= (var_variable,var12) on <var_variable:nullable Variable> */
var_other = var12;
{
var17 = ((short int (*)(val*, val*))(var_variable->class->vft[COLOR_kernel__Object___61d_61d]))(var_variable, var_other) /* == on <var_variable:nullable Variable(Variable)>*/;
var16 = var17;
}
var18 = !var16;
var14 = var18;
goto RET_LABEL15;
RET_LABEL15:(void)0;
}
var13 = var14;
}
if (var13){
{
{ /* Inline flow#AExpr#after_flow_context (self) on <self:AIsaExpr> */
var21 = self->attrs[COLOR_flow__AExpr___after_flow_context].val; /* _after_flow_context on <self:AIsaExpr> */
var19 = var21;
RET_LABEL20:(void)0;
}
}
if (var19 == NULL) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1287);
show_backtrace(1);
} else {
{ /* Inline flow#FlowContext#when_true (var19) on <var19:nullable FlowContext> */
if (unlikely(var19 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "semantize/flow.nit", 225);
show_backtrace(1);
}
var24 = var19->attrs[COLOR_flow__FlowContext___when_true].val; /* _when_true on <var19:nullable FlowContext> */
if (unlikely(var24 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _when_true");
PRINT_ERROR(" (%s:%d)\n", "semantize/flow.nit", 225);
show_backtrace(1);
}
var22 = var24;
RET_LABEL23:(void)0;
}
}
{
typing__FlowContext__set_var(var22, var_variable, var_mtype); /* Direct call typing#FlowContext#set_var on <var22:FlowContext>*/
}
} else {
}
{
var25 = typing__TypeVisitor__type_bool(var_v, self);
}
{
{ /* Inline typing#AExpr#mtype= (self,var25) on <self:AIsaExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var25; /* _mtype on <self:AIsaExpr> */
RET_LABEL26:(void)0;
}
}
RET_LABEL:;
}
/* method typing#AIsaExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AIsaExpr__accept_typing(val* self, val* p0) {
typing__AIsaExpr__accept_typing(self, p0); /* Direct call typing#AIsaExpr#accept_typing on <self:Object(AIsaExpr)>*/
RET_LABEL:;
}
/* method typing#AAsCastExpr#accept_typing for (self: AAsCastExpr, TypeVisitor) */
void typing__AAsCastExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : AExpr */;
val* var2 /* : AExpr */;
val* var3 /* : AType */;
val* var5 /* : AType */;
val* var6 /* : nullable MType */;
var_v = p0;
{
{ /* Inline parser_nodes#AAsCastExpr#n_expr (self) on <self:AAsCastExpr> */
var2 = self->attrs[COLOR_parser_nodes__AAsCastExpr___n_expr].val; /* _n_expr on <self:AAsCastExpr> */
if (unlikely(var2 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1875);
show_backtrace(1);
}
var = var2;
RET_LABEL1:(void)0;
}
}
{
{ /* Inline parser_nodes#AAsCastExpr#n_type (self) on <self:AAsCastExpr> */
var5 = self->attrs[COLOR_parser_nodes__AAsCastExpr___n_type].val; /* _n_type on <self:AAsCastExpr> */
if (unlikely(var5 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_type");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1878);
show_backtrace(1);
}
var3 = var5;
RET_LABEL4:(void)0;
}
}
{
var6 = typing__TypeVisitor__visit_expr_cast(var_v, self, var, var3);
}
{
{ /* Inline typing#AExpr#mtype= (self,var6) on <self:AAsCastExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var6; /* _mtype on <self:AAsCastExpr> */
RET_LABEL7:(void)0;
}
}
RET_LABEL:;
}
/* method typing#AAsCastExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AAsCastExpr__accept_typing(val* self, val* p0) {
typing__AAsCastExpr__accept_typing(self, p0); /* Direct call typing#AAsCastExpr#accept_typing on <self:Object(AAsCastExpr)>*/
RET_LABEL:;
}
/* method typing#AAsNotnullExpr#accept_typing for (self: AAsNotnullExpr, TypeVisitor) */
void typing__AAsNotnullExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : AExpr */;
val* var2 /* : AExpr */;
val* var3 /* : nullable MType */;
val* var_mtype /* var mtype: nullable MType */;
val* var4 /* : null */;
short int var5 /* : Bool */;
short int var6 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var8 /* : Bool */;
short int var10 /* : Bool */;
short int var11 /* : Bool */;
int cltype;
int idtype;
static val* varonce;
val* var12 /* : String */;
char* var13 /* : NativeString */;
long var14 /* : Int */;
val* var15 /* : FlatString */;
short int var16 /* : Bool */;
int cltype17;
int idtype18;
val* var19 /* : MType */;
val* var21 /* : MType */;
short int var24 /* : Bool */;
int cltype25;
int idtype26;
val* var27 /* : ModelBuilder */;
val* var29 /* : ModelBuilder */;
static val* varonce30;
val* var31 /* : String */;
char* var32 /* : NativeString */;
long var33 /* : Int */;
val* var34 /* : FlatString */;
static val* varonce35;
val* var36 /* : String */;
char* var37 /* : NativeString */;
long var38 /* : Int */;
val* var39 /* : FlatString */;
static val* varonce40;
val* var41 /* : String */;
char* var42 /* : NativeString */;
long var43 /* : Int */;
val* var44 /* : FlatString */;
val* var45 /* : Array[Object] */;
long var46 /* : Int */;
val* var47 /* : NativeArray[Object] */;
val* var48 /* : String */;
short int var49 /* : Bool */;
val* var50 /* : MType */;
val* var_u /* var u: MType */;
short int var51 /* : Bool */;
int cltype52;
int idtype53;
short int var54 /* : Bool */;
val* var55 /* : ModelBuilder */;
val* var57 /* : ModelBuilder */;
static val* varonce58;
val* var59 /* : String */;
char* var60 /* : NativeString */;
long var61 /* : Int */;
val* var62 /* : FlatString */;
static val* varonce63;
val* var64 /* : String */;
char* var65 /* : NativeString */;
long var66 /* : Int */;
val* var67 /* : FlatString */;
static val* varonce68;
val* var69 /* : String */;
char* var70 /* : NativeString */;
long var71 /* : Int */;
val* var72 /* : FlatString */;
static val* varonce73;
val* var74 /* : String */;
char* var75 /* : NativeString */;
long var76 /* : Int */;
val* var77 /* : FlatString */;
val* var78 /* : Array[Object] */;
long var79 /* : Int */;
val* var80 /* : NativeArray[Object] */;
val* var81 /* : String */;
var_v = p0;
{
{ /* Inline parser_nodes#AAsNotnullExpr#n_expr (self) on <self:AAsNotnullExpr> */
var2 = self->attrs[COLOR_parser_nodes__AAsNotnullExpr___n_expr].val; /* _n_expr on <self:AAsNotnullExpr> */
if (unlikely(var2 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1885);
show_backtrace(1);
}
var = var2;
RET_LABEL1:(void)0;
}
}
{
var3 = typing__TypeVisitor__visit_expr(var_v, var);
}
var_mtype = var3;
var4 = NULL;
if (var_mtype == NULL) {
var5 = 1; /* is null */
} else {
var5 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_mtype,var4) on <var_mtype:nullable MType> */
var_other = var4;
{
{ /* Inline kernel#Object#is_same_instance (var_mtype,var_other) on <var_mtype:nullable MType(MType)> */
var10 = var_mtype == var_other;
var8 = var10;
goto RET_LABEL9;
RET_LABEL9:(void)0;
}
}
var6 = var8;
goto RET_LABEL7;
RET_LABEL7:(void)0;
}
var5 = var6;
}
if (var5){
goto RET_LABEL;
} else {
}
/* <var_mtype:nullable MType(MType)> isa MNullType */
cltype = type_model__MNullType.color;
idtype = type_model__MNullType.id;
if(cltype >= var_mtype->type->table_size) {
var11 = 0;
} else {
var11 = var_mtype->type->type_table[cltype] == idtype;
}
if (var11){
if (varonce) {
var12 = varonce;
} else {
var13 = "Type error: as(not null) on null";
var14 = 32;
var15 = string__NativeString__to_s_with_length(var13, var14);
var12 = var15;
varonce = var12;
}
{
typing__TypeVisitor__error(var_v, self, var12); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
/* <var_mtype:nullable MType(MType)> isa MNullableType */
cltype17 = type_model__MNullableType.color;
idtype18 = type_model__MNullableType.id;
if(cltype17 >= var_mtype->type->table_size) {
var16 = 0;
} else {
var16 = var_mtype->type->type_table[cltype17] == idtype18;
}
if (var16){
{
{ /* Inline model#MNullableType#mtype (var_mtype) on <var_mtype:nullable MType(MNullableType)> */
var21 = var_mtype->attrs[COLOR_model__MNullableType___mtype].val; /* _mtype on <var_mtype:nullable MType(MNullableType)> */
if (unlikely(var21 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mtype");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1388);
show_backtrace(1);
}
var19 = var21;
RET_LABEL20:(void)0;
}
}
{
{ /* Inline typing#AExpr#mtype= (self,var19) on <self:AAsNotnullExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var19; /* _mtype on <self:AAsNotnullExpr> */
RET_LABEL22:(void)0;
}
}
goto RET_LABEL;
} else {
}
{
{ /* Inline typing#AExpr#mtype= (self,var_mtype) on <self:AAsNotnullExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var_mtype; /* _mtype on <self:AAsNotnullExpr> */
RET_LABEL23:(void)0;
}
}
/* <var_mtype:nullable MType(MType)> isa MClassType */
cltype25 = type_model__MClassType.color;
idtype26 = type_model__MClassType.id;
if(cltype25 >= var_mtype->type->table_size) {
var24 = 0;
} else {
var24 = var_mtype->type->type_table[cltype25] == idtype26;
}
if (var24){
{
{ /* Inline typing#TypeVisitor#modelbuilder (var_v) on <var_v:TypeVisitor> */
var29 = var_v->attrs[COLOR_typing__TypeVisitor___modelbuilder].val; /* _modelbuilder on <var_v:TypeVisitor> */
if (unlikely(var29 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _modelbuilder");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 34);
show_backtrace(1);
}
var27 = var29;
RET_LABEL28:(void)0;
}
}
if (varonce30) {
var31 = varonce30;
} else {
var32 = "useless-type-test";
var33 = 17;
var34 = string__NativeString__to_s_with_length(var32, var33);
var31 = var34;
varonce30 = var31;
}
if (varonce35) {
var36 = varonce35;
} else {
var37 = "Warning: expression is already not null, since it is a `";
var38 = 56;
var39 = string__NativeString__to_s_with_length(var37, var38);
var36 = var39;
varonce35 = var36;
}
if (varonce40) {
var41 = varonce40;
} else {
var42 = "`.";
var43 = 2;
var44 = string__NativeString__to_s_with_length(var42, var43);
var41 = var44;
varonce40 = var41;
}
var45 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var45 = array_instance Array[Object] */
var46 = 3;
var47 = NEW_array__NativeArray(var46, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var47)->values[0] = (val*) var36;
((struct instance_array__NativeArray*)var47)->values[1] = (val*) var_mtype;
((struct instance_array__NativeArray*)var47)->values[2] = (val*) var41;
{
((void (*)(val*, val*, long))(var45->class->vft[COLOR_array__Array__with_native]))(var45, var47, var46) /* with_native on <var45:Array[Object]>*/;
}
}
{
var48 = ((val* (*)(val*))(var45->class->vft[COLOR_string__Object__to_s]))(var45) /* to_s on <var45:Array[Object]>*/;
}
{
modelbuilder__ModelBuilder__warning(var27, self, var31, var48); /* Direct call modelbuilder#ModelBuilder#warning on <var27:ModelBuilder>*/
}
goto RET_LABEL;
} else {
}
{
var49 = ((short int (*)(val*))(var_mtype->class->vft[COLOR_model__MType__need_anchor]))(var_mtype) /* need_anchor on <var_mtype:nullable MType(MType)>*/;
}
if (unlikely(!var49)) {
PRINT_ERROR("Runtime error: %s", "Assert failed");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1321);
show_backtrace(1);
}
{
var50 = typing__TypeVisitor__anchor_to(var_v, var_mtype);
}
var_u = var50;
/* <var_u:MType> isa MNullableType */
cltype52 = type_model__MNullableType.color;
idtype53 = type_model__MNullableType.id;
if(cltype52 >= var_u->type->table_size) {
var51 = 0;
} else {
var51 = var_u->type->type_table[cltype52] == idtype53;
}
var54 = !var51;
if (var54){
{
{ /* Inline typing#TypeVisitor#modelbuilder (var_v) on <var_v:TypeVisitor> */
var57 = var_v->attrs[COLOR_typing__TypeVisitor___modelbuilder].val; /* _modelbuilder on <var_v:TypeVisitor> */
if (unlikely(var57 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _modelbuilder");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 34);
show_backtrace(1);
}
var55 = var57;
RET_LABEL56:(void)0;
}
}
if (varonce58) {
var59 = varonce58;
} else {
var60 = "useless-type-test";
var61 = 17;
var62 = string__NativeString__to_s_with_length(var60, var61);
var59 = var62;
varonce58 = var59;
}
if (varonce63) {
var64 = varonce63;
} else {
var65 = "Warning: expression is already not null, since it is a `";
var66 = 56;
var67 = string__NativeString__to_s_with_length(var65, var66);
var64 = var67;
varonce63 = var64;
}
if (varonce68) {
var69 = varonce68;
} else {
var70 = ": ";
var71 = 2;
var72 = string__NativeString__to_s_with_length(var70, var71);
var69 = var72;
varonce68 = var69;
}
if (varonce73) {
var74 = varonce73;
} else {
var75 = "`.";
var76 = 2;
var77 = string__NativeString__to_s_with_length(var75, var76);
var74 = var77;
varonce73 = var74;
}
var78 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var78 = array_instance Array[Object] */
var79 = 5;
var80 = NEW_array__NativeArray(var79, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var80)->values[0] = (val*) var64;
((struct instance_array__NativeArray*)var80)->values[1] = (val*) var_mtype;
((struct instance_array__NativeArray*)var80)->values[2] = (val*) var69;
((struct instance_array__NativeArray*)var80)->values[3] = (val*) var_u;
((struct instance_array__NativeArray*)var80)->values[4] = (val*) var74;
{
((void (*)(val*, val*, long))(var78->class->vft[COLOR_array__Array__with_native]))(var78, var80, var79) /* with_native on <var78:Array[Object]>*/;
}
}
{
var81 = ((val* (*)(val*))(var78->class->vft[COLOR_string__Object__to_s]))(var78) /* to_s on <var78:Array[Object]>*/;
}
{
modelbuilder__ModelBuilder__warning(var55, self, var59, var81); /* Direct call modelbuilder#ModelBuilder#warning on <var55:ModelBuilder>*/
}
goto RET_LABEL;
} else {
}
RET_LABEL:;
}
/* method typing#AAsNotnullExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AAsNotnullExpr__accept_typing(val* self, val* p0) {
typing__AAsNotnullExpr__accept_typing(self, p0); /* Direct call typing#AAsNotnullExpr#accept_typing on <self:Object(AAsNotnullExpr)>*/
RET_LABEL:;
}
/* method typing#AParExpr#accept_typing for (self: AParExpr, TypeVisitor) */
void typing__AParExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : AExpr */;
val* var2 /* : AExpr */;
val* var3 /* : nullable MType */;
var_v = p0;
{
{ /* Inline parser_nodes#AParExpr#n_expr (self) on <self:AParExpr> */
var2 = self->attrs[COLOR_parser_nodes__AParExpr___n_expr].val; /* _n_expr on <self:AParExpr> */
if (unlikely(var2 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1868);
show_backtrace(1);
}
var = var2;
RET_LABEL1:(void)0;
}
}
{
var3 = typing__TypeVisitor__visit_expr(var_v, var);
}
{
{ /* Inline typing#AExpr#mtype= (self,var3) on <self:AParExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var3; /* _mtype on <self:AParExpr> */
RET_LABEL4:(void)0;
}
}
RET_LABEL:;
}
/* method typing#AParExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AParExpr__accept_typing(val* self, val* p0) {
typing__AParExpr__accept_typing(self, p0); /* Direct call typing#AParExpr#accept_typing on <self:Object(AParExpr)>*/
RET_LABEL:;
}
/* method typing#AOnceExpr#accept_typing for (self: AOnceExpr, TypeVisitor) */
void typing__AOnceExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : AExpr */;
val* var2 /* : AExpr */;
val* var3 /* : nullable MType */;
var_v = p0;
{
{ /* Inline parser_nodes#AOnceExpr#n_expr (self) on <self:AOnceExpr> */
var2 = self->attrs[COLOR_parser_nodes__AOnceExpr___n_expr].val; /* _n_expr on <self:AOnceExpr> */
if (unlikely(var2 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1459);
show_backtrace(1);
}
var = var2;
RET_LABEL1:(void)0;
}
}
{
var3 = typing__TypeVisitor__visit_expr(var_v, var);
}
{
{ /* Inline typing#AExpr#mtype= (self,var3) on <self:AOnceExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var3; /* _mtype on <self:AOnceExpr> */
RET_LABEL4:(void)0;
}
}
RET_LABEL:;
}
/* method typing#AOnceExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AOnceExpr__accept_typing(val* self, val* p0) {
typing__AOnceExpr__accept_typing(self, p0); /* Direct call typing#AOnceExpr#accept_typing on <self:Object(AOnceExpr)>*/
RET_LABEL:;
}
/* method typing#ASelfExpr#its_variable for (self: ASelfExpr): nullable Variable */
val* typing__ASelfExpr__its_variable(val* self) {
val* var /* : nullable Variable */;
val* var1 /* : nullable Variable */;
var1 = self->attrs[COLOR_typing__ASelfExpr___its_variable].val; /* _its_variable on <self:ASelfExpr> */
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ASelfExpr#its_variable for (self: Object): nullable Variable */
val* VIRTUAL_typing__ASelfExpr__its_variable(val* self) {
val* var /* : nullable Variable */;
val* var1 /* : nullable Variable */;
val* var3 /* : nullable Variable */;
{ /* Inline typing#ASelfExpr#its_variable (self) on <self:Object(ASelfExpr)> */
var3 = self->attrs[COLOR_typing__ASelfExpr___its_variable].val; /* _its_variable on <self:Object(ASelfExpr)> */
var1 = var3;
RET_LABEL2:(void)0;
}
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ASelfExpr#its_variable= for (self: ASelfExpr, nullable Variable) */
void typing__ASelfExpr__its_variable_61d(val* self, val* p0) {
self->attrs[COLOR_typing__ASelfExpr___its_variable].val = p0; /* _its_variable on <self:ASelfExpr> */
RET_LABEL:;
}
/* method typing#ASelfExpr#its_variable= for (self: Object, nullable Variable) */
void VIRTUAL_typing__ASelfExpr__its_variable_61d(val* self, val* p0) {
{ /* Inline typing#ASelfExpr#its_variable= (self,p0) on <self:Object(ASelfExpr)> */
self->attrs[COLOR_typing__ASelfExpr___its_variable].val = p0; /* _its_variable on <self:Object(ASelfExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
/* method typing#ASelfExpr#accept_typing for (self: ASelfExpr, TypeVisitor) */
void typing__ASelfExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
short int var /* : Bool */;
short int var1 /* : Bool */;
short int var3 /* : Bool */;
short int var_ /* var : Bool */;
short int var4 /* : Bool */;
int cltype;
int idtype;
short int var5 /* : Bool */;
static val* varonce;
val* var6 /* : String */;
char* var7 /* : NativeString */;
long var8 /* : Int */;
val* var9 /* : FlatString */;
val* var10 /* : Variable */;
val* var12 /* : Variable */;
val* var_variable /* var variable: Variable */;
val* var14 /* : nullable MType */;
var_v = p0;
{
{ /* Inline typing#TypeVisitor#is_toplevel_context (var_v) on <var_v:TypeVisitor> */
var3 = var_v->attrs[COLOR_typing__TypeVisitor___is_toplevel_context].s; /* _is_toplevel_context on <var_v:TypeVisitor> */
var1 = var3;
RET_LABEL2:(void)0;
}
}
var_ = var1;
if (var1){
/* <self:ASelfExpr> isa AImplicitSelfExpr */
cltype = type_parser_nodes__AImplicitSelfExpr.color;
idtype = type_parser_nodes__AImplicitSelfExpr.id;
if(cltype >= self->type->table_size) {
var4 = 0;
} else {
var4 = self->type->type_table[cltype] == idtype;
}
var5 = !var4;
var = var5;
} else {
var = var_;
}
if (var){
if (varonce) {
var6 = varonce;
} else {
var7 = "Error: self cannot be used in top-level method.";
var8 = 47;
var9 = string__NativeString__to_s_with_length(var7, var8);
var6 = var9;
varonce = var6;
}
{
typing__TypeVisitor__error(var_v, self, var6); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
} else {
}
{
{ /* Inline typing#TypeVisitor#selfvariable (var_v) on <var_v:TypeVisitor> */
var12 = var_v->attrs[COLOR_typing__TypeVisitor___selfvariable].val; /* _selfvariable on <var_v:TypeVisitor> */
if (unlikely(var12 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _selfvariable");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 50);
show_backtrace(1);
}
var10 = var12;
RET_LABEL11:(void)0;
}
}
var_variable = var10;
{
{ /* Inline typing#ASelfExpr#its_variable= (self,var_variable) on <self:ASelfExpr> */
self->attrs[COLOR_typing__ASelfExpr___its_variable].val = var_variable; /* _its_variable on <self:ASelfExpr> */
RET_LABEL13:(void)0;
}
}
{
var14 = typing__TypeVisitor__get_variable(var_v, self, var_variable);
}
{
{ /* Inline typing#AExpr#mtype= (self,var14) on <self:ASelfExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var14; /* _mtype on <self:ASelfExpr> */
RET_LABEL15:(void)0;
}
}
RET_LABEL:;
}
/* method typing#ASelfExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__ASelfExpr__accept_typing(val* self, val* p0) {
typing__ASelfExpr__accept_typing(self, p0); /* Direct call typing#ASelfExpr#accept_typing on <self:Object(ASelfExpr)>*/
RET_LABEL:;
}
/* method typing#ASendExpr#callsite for (self: ASendExpr): nullable CallSite */
val* typing__ASendExpr__callsite(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
var1 = self->attrs[COLOR_typing__ASendExpr___callsite].val; /* _callsite on <self:ASendExpr> */
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ASendExpr#callsite for (self: Object): nullable CallSite */
val* VIRTUAL_typing__ASendExpr__callsite(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
val* var3 /* : nullable CallSite */;
{ /* Inline typing#ASendExpr#callsite (self) on <self:Object(ASendExpr)> */
var3 = self->attrs[COLOR_typing__ASendExpr___callsite].val; /* _callsite on <self:Object(ASendExpr)> */
var1 = var3;
RET_LABEL2:(void)0;
}
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ASendExpr#callsite= for (self: ASendExpr, nullable CallSite) */
void typing__ASendExpr__callsite_61d(val* self, val* p0) {
self->attrs[COLOR_typing__ASendExpr___callsite].val = p0; /* _callsite on <self:ASendExpr> */
RET_LABEL:;
}
/* method typing#ASendExpr#callsite= for (self: Object, nullable CallSite) */
void VIRTUAL_typing__ASendExpr__callsite_61d(val* self, val* p0) {
{ /* Inline typing#ASendExpr#callsite= (self,p0) on <self:Object(ASendExpr)> */
self->attrs[COLOR_typing__ASendExpr___callsite].val = p0; /* _callsite on <self:Object(ASendExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
/* method typing#ASendExpr#accept_typing for (self: ASendExpr, TypeVisitor) */
void typing__ASendExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : AExpr */;
val* var2 /* : AExpr */;
val* var3 /* : nullable MType */;
val* var_recvtype /* var recvtype: nullable MType */;
val* var4 /* : String */;
val* var_name /* var name: String */;
val* var5 /* : null */;
short int var6 /* : Bool */;
short int var7 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var9 /* : Bool */;
short int var11 /* : Bool */;
short int var12 /* : Bool */;
int cltype;
int idtype;
static val* varonce;
val* var13 /* : String */;
char* var14 /* : NativeString */;
long var15 /* : Int */;
val* var16 /* : FlatString */;
static val* varonce17;
val* var18 /* : String */;
char* var19 /* : NativeString */;
long var20 /* : Int */;
val* var21 /* : FlatString */;
val* var22 /* : Array[Object] */;
long var23 /* : Int */;
val* var24 /* : NativeArray[Object] */;
val* var25 /* : String */;
val* var26 /* : AExpr */;
val* var28 /* : AExpr */;
short int var29 /* : Bool */;
int cltype30;
int idtype31;
val* var32 /* : nullable CallSite */;
val* var_callsite /* var callsite: nullable CallSite */;
val* var33 /* : null */;
short int var34 /* : Bool */;
short int var35 /* : Bool */;
short int var37 /* : Bool */;
short int var39 /* : Bool */;
val* var41 /* : MSignature */;
val* var43 /* : MSignature */;
val* var_msignature /* var msignature: MSignature */;
val* var44 /* : Array[AExpr] */;
val* var_args /* var args: Array[AExpr] */;
short int var45 /* : Bool */;
val* var46 /* : MMethod */;
val* var48 /* : MMethod */;
short int var49 /* : Bool */;
short int var51 /* : Bool */;
val* var52 /* : nullable MPropDef */;
val* var54 /* : nullable MPropDef */;
val* var_vmpropdef /* var vmpropdef: nullable MPropDef */;
short int var55 /* : Bool */;
short int var56 /* : Bool */;
int cltype57;
int idtype58;
short int var_ /* var : Bool */;
val* var59 /* : MProperty */;
val* var61 /* : MProperty */;
short int var62 /* : Bool */;
short int var64 /* : Bool */;
short int var65 /* : Bool */;
static val* varonce66;
val* var67 /* : String */;
char* var68 /* : NativeString */;
long var69 /* : Int */;
val* var70 /* : FlatString */;
short int var71 /* : Bool */;
short int var72 /* : Bool */;
short int var73 /* : Bool */;
int cltype74;
int idtype75;
short int var_76 /* var : Bool */;
val* var77 /* : MProperty */;
val* var79 /* : MProperty */;
short int var80 /* : Bool */;
short int var82 /* : Bool */;
short int var_83 /* var : Bool */;
val* var84 /* : MMethod */;
val* var86 /* : MMethod */;
short int var87 /* : Bool */;
short int var89 /* : Bool */;
short int var90 /* : Bool */;
static val* varonce91;
val* var92 /* : String */;
char* var93 /* : NativeString */;
long var94 /* : Int */;
val* var95 /* : FlatString */;
static val* varonce96;
val* var97 /* : String */;
char* var98 /* : NativeString */;
long var99 /* : Int */;
val* var100 /* : FlatString */;
val* var101 /* : MMethod */;
val* var103 /* : MMethod */;
val* var104 /* : Array[Object] */;
long var105 /* : Int */;
val* var106 /* : NativeArray[Object] */;
val* var107 /* : String */;
val* var108 /* : nullable MType */;
val* var110 /* : nullable MType */;
val* var_ret /* var ret: nullable MType */;
val* var111 /* : null */;
short int var112 /* : Bool */;
short int var113 /* : Bool */;
val* var_other115 /* var other: nullable Object */;
short int var116 /* : Bool */;
short int var117 /* : Bool */;
short int var118 /* : Bool */;
short int var120 /* : Bool */;
var_v = p0;
{
{ /* Inline parser_nodes#ASendExpr#n_expr (self) on <self:ASendExpr> */
var2 = self->attrs[COLOR_parser_nodes__ASendExpr___n_expr].val; /* _n_expr on <self:ASendExpr> */
if (unlikely(var2 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1466);
show_backtrace(1);
}
var = var2;
RET_LABEL1:(void)0;
}
}
{
var3 = typing__TypeVisitor__visit_expr(var_v, var);
}
var_recvtype = var3;
{
var4 = ((val* (*)(val*))(self->class->vft[COLOR_typing__ASendExpr__property_name]))(self) /* property_name on <self:ASendExpr>*/;
}
var_name = var4;
var5 = NULL;
if (var_recvtype == NULL) {
var6 = 1; /* is null */
} else {
var6 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_recvtype,var5) on <var_recvtype:nullable MType> */
var_other = var5;
{
{ /* Inline kernel#Object#is_same_instance (var_recvtype,var_other) on <var_recvtype:nullable MType(MType)> */
var11 = var_recvtype == var_other;
var9 = var11;
goto RET_LABEL10;
RET_LABEL10:(void)0;
}
}
var7 = var9;
goto RET_LABEL8;
RET_LABEL8:(void)0;
}
var6 = var7;
}
if (var6){
goto RET_LABEL;
} else {
}
/* <var_recvtype:nullable MType(MType)> isa MNullType */
cltype = type_model__MNullType.color;
idtype = type_model__MNullType.id;
if(cltype >= var_recvtype->type->table_size) {
var12 = 0;
} else {
var12 = var_recvtype->type->type_table[cltype] == idtype;
}
if (var12){
if (varonce) {
var13 = varonce;
} else {
var14 = "Error: Method \'";
var15 = 15;
var16 = string__NativeString__to_s_with_length(var14, var15);
var13 = var16;
varonce = var13;
}
if (varonce17) {
var18 = varonce17;
} else {
var19 = "\' call on \'null\'.";
var20 = 17;
var21 = string__NativeString__to_s_with_length(var19, var20);
var18 = var21;
varonce17 = var18;
}
var22 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var22 = array_instance Array[Object] */
var23 = 3;
var24 = NEW_array__NativeArray(var23, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var24)->values[0] = (val*) var13;
((struct instance_array__NativeArray*)var24)->values[1] = (val*) var_name;
((struct instance_array__NativeArray*)var24)->values[2] = (val*) var18;
{
((void (*)(val*, val*, long))(var22->class->vft[COLOR_array__Array__with_native]))(var22, var24, var23) /* with_native on <var22:Array[Object]>*/;
}
}
{
var25 = ((val* (*)(val*))(var22->class->vft[COLOR_string__Object__to_s]))(var22) /* to_s on <var22:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var25); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
{
{ /* Inline parser_nodes#ASendExpr#n_expr (self) on <self:ASendExpr> */
var28 = self->attrs[COLOR_parser_nodes__ASendExpr___n_expr].val; /* _n_expr on <self:ASendExpr> */
if (unlikely(var28 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1466);
show_backtrace(1);
}
var26 = var28;
RET_LABEL27:(void)0;
}
}
/* <var26:AExpr> isa ASelfExpr */
cltype30 = type_parser_nodes__ASelfExpr.color;
idtype31 = type_parser_nodes__ASelfExpr.id;
if(cltype30 >= var26->type->table_size) {
var29 = 0;
} else {
var29 = var26->type->type_table[cltype30] == idtype31;
}
{
var32 = typing__TypeVisitor__get_method(var_v, self, var_recvtype, var_name, var29);
}
var_callsite = var32;
var33 = NULL;
if (var_callsite == NULL) {
var34 = 1; /* is null */
} else {
var34 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_callsite,var33) on <var_callsite:nullable CallSite> */
var_other = var33;
{
{ /* Inline kernel#Object#is_same_instance (var_callsite,var_other) on <var_callsite:nullable CallSite(CallSite)> */
var39 = var_callsite == var_other;
var37 = var39;
goto RET_LABEL38;
RET_LABEL38:(void)0;
}
}
var35 = var37;
goto RET_LABEL36;
RET_LABEL36:(void)0;
}
var34 = var35;
}
if (var34){
goto RET_LABEL;
} else {
}
{
{ /* Inline typing#ASendExpr#callsite= (self,var_callsite) on <self:ASendExpr> */
self->attrs[COLOR_typing__ASendExpr___callsite].val = var_callsite; /* _callsite on <self:ASendExpr> */
RET_LABEL40:(void)0;
}
}
{
{ /* Inline typing#CallSite#msignature (var_callsite) on <var_callsite:nullable CallSite(CallSite)> */
var43 = var_callsite->attrs[COLOR_typing__CallSite___msignature].val; /* _msignature on <var_callsite:nullable CallSite(CallSite)> */
if (unlikely(var43 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _msignature");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 490);
show_backtrace(1);
}
var41 = var43;
RET_LABEL42:(void)0;
}
}
var_msignature = var41;
{
var44 = ((val* (*)(val*))(self->class->vft[COLOR_typing__ASendExpr__compute_raw_arguments]))(self) /* compute_raw_arguments on <self:ASendExpr>*/;
}
var_args = var44;
{
var45 = typing__CallSite__check_signature(var_callsite, var_v, var_args);
}
{
{ /* Inline typing#CallSite#mproperty (var_callsite) on <var_callsite:nullable CallSite(CallSite)> */
var48 = var_callsite->attrs[COLOR_typing__CallSite___mproperty].val; /* _mproperty on <var_callsite:nullable CallSite(CallSite)> */
if (unlikely(var48 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mproperty");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 483);
show_backtrace(1);
}
var46 = var48;
RET_LABEL47:(void)0;
}
}
{
{ /* Inline model#MMethod#is_init (var46) on <var46:MMethod> */
var51 = var46->attrs[COLOR_model__MMethod___is_init].s; /* _is_init on <var46:MMethod> */
var49 = var51;
RET_LABEL50:(void)0;
}
}
if (var49){
{
{ /* Inline typing#TypeVisitor#mpropdef (var_v) on <var_v:TypeVisitor> */
var54 = var_v->attrs[COLOR_typing__TypeVisitor___mpropdef].val; /* _mpropdef on <var_v:TypeVisitor> */
var52 = var54;
RET_LABEL53:(void)0;
}
}
var_vmpropdef = var52;
/* <var_vmpropdef:nullable MPropDef> isa MMethodDef */
cltype57 = type_model__MMethodDef.color;
idtype58 = type_model__MMethodDef.id;
if(var_vmpropdef == NULL) {
var56 = 0;
} else {
if(cltype57 >= var_vmpropdef->type->table_size) {
var56 = 0;
} else {
var56 = var_vmpropdef->type->type_table[cltype57] == idtype58;
}
}
var_ = var56;
if (var56){
{
{ /* Inline model#MPropDef#mproperty (var_vmpropdef) on <var_vmpropdef:nullable MPropDef(MMethodDef)> */
var61 = var_vmpropdef->attrs[COLOR_model__MPropDef___mproperty].val; /* _mproperty on <var_vmpropdef:nullable MPropDef(MMethodDef)> */
if (unlikely(var61 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mproperty");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1898);
show_backtrace(1);
}
var59 = var61;
RET_LABEL60:(void)0;
}
}
{
{ /* Inline model#MMethod#is_init (var59) on <var59:MProperty(MMethod)> */
var64 = var59->attrs[COLOR_model__MMethod___is_init].s; /* _is_init on <var59:MProperty(MMethod)> */
var62 = var64;
RET_LABEL63:(void)0;
}
}
var55 = var62;
} else {
var55 = var_;
}
var65 = !var55;
if (var65){
if (varonce66) {
var67 = varonce66;
} else {
var68 = "Can call a init only in another init";
var69 = 36;
var70 = string__NativeString__to_s_with_length(var68, var69);
var67 = var70;
varonce66 = var67;
}
{
typing__TypeVisitor__error(var_v, self, var67); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
} else {
}
/* <var_vmpropdef:nullable MPropDef> isa MMethodDef */
cltype74 = type_model__MMethodDef.color;
idtype75 = type_model__MMethodDef.id;
if(var_vmpropdef == NULL) {
var73 = 0;
} else {
if(cltype74 >= var_vmpropdef->type->table_size) {
var73 = 0;
} else {
var73 = var_vmpropdef->type->type_table[cltype74] == idtype75;
}
}
var_76 = var73;
if (var73){
{
{ /* Inline model#MPropDef#mproperty (var_vmpropdef) on <var_vmpropdef:nullable MPropDef(MMethodDef)> */
var79 = var_vmpropdef->attrs[COLOR_model__MPropDef___mproperty].val; /* _mproperty on <var_vmpropdef:nullable MPropDef(MMethodDef)> */
if (unlikely(var79 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mproperty");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1898);
show_backtrace(1);
}
var77 = var79;
RET_LABEL78:(void)0;
}
}
{
{ /* Inline model#MMethod#is_root_init (var77) on <var77:MProperty(MMethod)> */
var82 = var77->attrs[COLOR_model__MMethod___is_root_init].s; /* _is_root_init on <var77:MProperty(MMethod)> */
var80 = var82;
RET_LABEL81:(void)0;
}
}
var72 = var80;
} else {
var72 = var_76;
}
var_83 = var72;
if (var72){
{
{ /* Inline typing#CallSite#mproperty (var_callsite) on <var_callsite:nullable CallSite(CallSite)> */
var86 = var_callsite->attrs[COLOR_typing__CallSite___mproperty].val; /* _mproperty on <var_callsite:nullable CallSite(CallSite)> */
if (unlikely(var86 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mproperty");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 483);
show_backtrace(1);
}
var84 = var86;
RET_LABEL85:(void)0;
}
}
{
{ /* Inline model#MMethod#is_root_init (var84) on <var84:MMethod> */
var89 = var84->attrs[COLOR_model__MMethod___is_root_init].s; /* _is_root_init on <var84:MMethod> */
var87 = var89;
RET_LABEL88:(void)0;
}
}
var90 = !var87;
var71 = var90;
} else {
var71 = var_83;
}
if (var71){
if (varonce91) {
var92 = varonce91;
} else {
var93 = "Error: ";
var94 = 7;
var95 = string__NativeString__to_s_with_length(var93, var94);
var92 = var95;
varonce91 = var92;
}
if (varonce96) {
var97 = varonce96;
} else {
var98 = " cannot call a factory ";
var99 = 23;
var100 = string__NativeString__to_s_with_length(var98, var99);
var97 = var100;
varonce96 = var97;
}
{
{ /* Inline typing#CallSite#mproperty (var_callsite) on <var_callsite:nullable CallSite(CallSite)> */
var103 = var_callsite->attrs[COLOR_typing__CallSite___mproperty].val; /* _mproperty on <var_callsite:nullable CallSite(CallSite)> */
if (unlikely(var103 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mproperty");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 483);
show_backtrace(1);
}
var101 = var103;
RET_LABEL102:(void)0;
}
}
var104 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var104 = array_instance Array[Object] */
var105 = 4;
var106 = NEW_array__NativeArray(var105, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var106)->values[0] = (val*) var92;
((struct instance_array__NativeArray*)var106)->values[1] = (val*) var_vmpropdef;
((struct instance_array__NativeArray*)var106)->values[2] = (val*) var97;
((struct instance_array__NativeArray*)var106)->values[3] = (val*) var101;
{
((void (*)(val*, val*, long))(var104->class->vft[COLOR_array__Array__with_native]))(var104, var106, var105) /* with_native on <var104:Array[Object]>*/;
}
}
{
var107 = ((val* (*)(val*))(var104->class->vft[COLOR_string__Object__to_s]))(var104) /* to_s on <var104:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var107); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
} else {
}
} else {
}
{
{ /* Inline model#MSignature#return_mtype (var_msignature) on <var_msignature:MSignature> */
var110 = var_msignature->attrs[COLOR_model__MSignature___return_mtype].val; /* _return_mtype on <var_msignature:MSignature> */
var108 = var110;
RET_LABEL109:(void)0;
}
}
var_ret = var108;
var111 = NULL;
if (var_ret == NULL) {
var112 = 0; /* is null */
} else {
var112 = 1; /* arg is null and recv is not */
}
if (0) {
{ /* Inline kernel#Object#!= (var_ret,var111) on <var_ret:nullable MType> */
var_other115 = var111;
{
var117 = ((short int (*)(val*, val*))(var_ret->class->vft[COLOR_kernel__Object___61d_61d]))(var_ret, var_other115) /* == on <var_ret:nullable MType(MType)>*/;
var116 = var117;
}
var118 = !var116;
var113 = var118;
goto RET_LABEL114;
RET_LABEL114:(void)0;
}
var112 = var113;
}
if (var112){
{
{ /* Inline typing#AExpr#mtype= (self,var_ret) on <self:ASendExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var_ret; /* _mtype on <self:ASendExpr> */
RET_LABEL119:(void)0;
}
}
} else {
var120 = 1;
{
{ /* Inline typing#AExpr#is_typed= (self,var120) on <self:ASendExpr> */
self->attrs[COLOR_typing__AExpr___is_typed].s = var120; /* _is_typed on <self:ASendExpr> */
RET_LABEL121:(void)0;
}
}
}
RET_LABEL:;
}
/* method typing#ASendExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__ASendExpr__accept_typing(val* self, val* p0) {
typing__ASendExpr__accept_typing(self, p0); /* Direct call typing#ASendExpr#accept_typing on <self:Object(ASendExpr)>*/
RET_LABEL:;
}
/* method typing#ASendExpr#raw_arguments for (self: ASendExpr): Array[AExpr] */
val* typing__ASendExpr__raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : Array[AExpr] */;
{
var1 = ((val* (*)(val*))(self->class->vft[COLOR_typing__ASendExpr__compute_raw_arguments]))(self) /* compute_raw_arguments on <self:ASendExpr>*/;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ASendExpr#raw_arguments for (self: Object): Array[AExpr] */
val* VIRTUAL_typing__ASendExpr__raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : Array[AExpr] */;
var1 = typing__ASendExpr__raw_arguments(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ABinopExpr#compute_raw_arguments for (self: ABinopExpr): Array[AExpr] */
val* typing__ABinopExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : Array[AExpr] */;
long var2 /* : Int */;
val* var_ /* var : Array[AExpr] */;
val* var3 /* : AExpr */;
val* var5 /* : AExpr */;
var1 = NEW_array__Array(&type_array__Arrayparser_nodes__AExpr);
var2 = 1;
{
array__Array__with_capacity(var1, var2); /* Direct call array#Array#with_capacity on <var1:Array[AExpr]>*/
}
var_ = var1;
{
{ /* Inline parser_nodes#ABinopExpr#n_expr2 (self) on <self:ABinopExpr> */
var5 = self->attrs[COLOR_parser_nodes__ABinopExpr___n_expr2].val; /* _n_expr2 on <self:ABinopExpr> */
if (unlikely(var5 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr2");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1473);
show_backtrace(1);
}
var3 = var5;
RET_LABEL4:(void)0;
}
}
{
array__AbstractArray__push(var_, var3); /* Direct call array#AbstractArray#push on <var_:Array[AExpr]>*/
}
var = var_;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ABinopExpr#compute_raw_arguments for (self: Object): Array[AExpr] */
val* VIRTUAL_typing__ABinopExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : Array[AExpr] */;
var1 = typing__ABinopExpr__compute_raw_arguments(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AEqExpr#property_name for (self: AEqExpr): String */
val* typing__AEqExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "==";
var3 = 2;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#AEqExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__AEqExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__AEqExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AEqExpr#accept_typing for (self: AEqExpr, TypeVisitor) */
void typing__AEqExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
var_v = p0;
{
((void (*)(val*, val*))(self->class->vft[COLOR_typing__AEqExpr__accept_typing]))(self, p0) /* accept_typing on <self:AEqExpr>*/;
}
{
typing__TypeVisitor__null_test(var_v, self); /* Direct call typing#TypeVisitor#null_test on <var_v:TypeVisitor>*/
}
RET_LABEL:;
}
/* method typing#AEqExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__AEqExpr__accept_typing(val* self, val* p0) {
typing__AEqExpr__accept_typing(self, p0); /* Direct call typing#AEqExpr#accept_typing on <self:Object(AEqExpr)>*/
RET_LABEL:;
}
/* method typing#ANeExpr#property_name for (self: ANeExpr): String */
val* typing__ANeExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "!=";
var3 = 2;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ANeExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__ANeExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__ANeExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ANeExpr#accept_typing for (self: ANeExpr, TypeVisitor) */
void typing__ANeExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
var_v = p0;
{
((void (*)(val*, val*))(self->class->vft[COLOR_typing__ANeExpr__accept_typing]))(self, p0) /* accept_typing on <self:ANeExpr>*/;
}
{
typing__TypeVisitor__null_test(var_v, self); /* Direct call typing#TypeVisitor#null_test on <var_v:TypeVisitor>*/
}
RET_LABEL:;
}
/* method typing#ANeExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__ANeExpr__accept_typing(val* self, val* p0) {
typing__ANeExpr__accept_typing(self, p0); /* Direct call typing#ANeExpr#accept_typing on <self:Object(ANeExpr)>*/
RET_LABEL:;
}
/* method typing#ALtExpr#property_name for (self: ALtExpr): String */
val* typing__ALtExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "<";
var3 = 1;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ALtExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__ALtExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__ALtExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ALeExpr#property_name for (self: ALeExpr): String */
val* typing__ALeExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "<=";
var3 = 2;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ALeExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__ALeExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__ALeExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ALlExpr#property_name for (self: ALlExpr): String */
val* typing__ALlExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "<<";
var3 = 2;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ALlExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__ALlExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__ALlExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AGtExpr#property_name for (self: AGtExpr): String */
val* typing__AGtExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = ">";
var3 = 1;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#AGtExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__AGtExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__AGtExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AGeExpr#property_name for (self: AGeExpr): String */
val* typing__AGeExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = ">=";
var3 = 2;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#AGeExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__AGeExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__AGeExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AGgExpr#property_name for (self: AGgExpr): String */
val* typing__AGgExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = ">>";
var3 = 2;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#AGgExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__AGgExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__AGgExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#APlusExpr#property_name for (self: APlusExpr): String */
val* typing__APlusExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "+";
var3 = 1;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#APlusExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__APlusExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__APlusExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AMinusExpr#property_name for (self: AMinusExpr): String */
val* typing__AMinusExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "-";
var3 = 1;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#AMinusExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__AMinusExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__AMinusExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AStarshipExpr#property_name for (self: AStarshipExpr): String */
val* typing__AStarshipExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "<=>";
var3 = 3;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#AStarshipExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__AStarshipExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__AStarshipExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AStarExpr#property_name for (self: AStarExpr): String */
val* typing__AStarExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "*";
var3 = 1;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#AStarExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__AStarExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__AStarExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AStarstarExpr#property_name for (self: AStarstarExpr): String */
val* typing__AStarstarExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "**";
var3 = 2;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#AStarstarExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__AStarstarExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__AStarstarExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ASlashExpr#property_name for (self: ASlashExpr): String */
val* typing__ASlashExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "/";
var3 = 1;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ASlashExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__ASlashExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__ASlashExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#APercentExpr#property_name for (self: APercentExpr): String */
val* typing__APercentExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "%";
var3 = 1;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#APercentExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__APercentExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__APercentExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AUminusExpr#property_name for (self: AUminusExpr): String */
val* typing__AUminusExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "unary -";
var3 = 7;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#AUminusExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__AUminusExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__AUminusExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AUminusExpr#compute_raw_arguments for (self: AUminusExpr): Array[AExpr] */
val* typing__AUminusExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : Array[AExpr] */;
var1 = NEW_array__Array(&type_array__Arrayparser_nodes__AExpr);
{
((void (*)(val*))(var1->class->vft[COLOR_kernel__Object__init]))(var1) /* init on <var1:Array[AExpr]>*/;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#AUminusExpr#compute_raw_arguments for (self: Object): Array[AExpr] */
val* VIRTUAL_typing__AUminusExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : Array[AExpr] */;
var1 = typing__AUminusExpr__compute_raw_arguments(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ACallExpr#property_name for (self: ACallExpr): String */
val* typing__ACallExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : TId */;
val* var3 /* : TId */;
val* var4 /* : String */;
{
{ /* Inline parser_nodes#ACallFormExpr#n_id (self) on <self:ACallExpr> */
var3 = self->attrs[COLOR_parser_nodes__ACallFormExpr___n_id].val; /* _n_id on <self:ACallExpr> */
if (unlikely(var3 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_id");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1644);
show_backtrace(1);
}
var1 = var3;
RET_LABEL2:(void)0;
}
}
{
var4 = lexer_work__Token__text(var1);
}
var = var4;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ACallExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__ACallExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__ACallExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ACallExpr#compute_raw_arguments for (self: ACallExpr): Array[AExpr] */
val* typing__ACallExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : AExprs */;
val* var3 /* : AExprs */;
val* var4 /* : Array[AExpr] */;
{
{ /* Inline parser_nodes#ACallFormExpr#n_args (self) on <self:ACallExpr> */
var3 = self->attrs[COLOR_parser_nodes__ACallFormExpr___n_args].val; /* _n_args on <self:ACallExpr> */
if (unlikely(var3 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_args");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1647);
show_backtrace(1);
}
var1 = var3;
RET_LABEL2:(void)0;
}
}
{
var4 = typing__AExprs__to_a(var1);
}
var = var4;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ACallExpr#compute_raw_arguments for (self: Object): Array[AExpr] */
val* VIRTUAL_typing__ACallExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : Array[AExpr] */;
var1 = typing__ACallExpr__compute_raw_arguments(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ACallAssignExpr#property_name for (self: ACallAssignExpr): String */
val* typing__ACallAssignExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : TId */;
val* var3 /* : TId */;
val* var4 /* : String */;
static val* varonce;
val* var5 /* : String */;
char* var6 /* : NativeString */;
long var7 /* : Int */;
val* var8 /* : FlatString */;
val* var9 /* : String */;
{
{ /* Inline parser_nodes#ACallFormExpr#n_id (self) on <self:ACallAssignExpr> */
var3 = self->attrs[COLOR_parser_nodes__ACallFormExpr___n_id].val; /* _n_id on <self:ACallAssignExpr> */
if (unlikely(var3 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_id");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1644);
show_backtrace(1);
}
var1 = var3;
RET_LABEL2:(void)0;
}
}
{
var4 = lexer_work__Token__text(var1);
}
if (varonce) {
var5 = varonce;
} else {
var6 = "=";
var7 = 1;
var8 = string__NativeString__to_s_with_length(var6, var7);
var5 = var8;
varonce = var5;
}
{
var9 = string__FlatString___43d(var4, var5);
}
var = var9;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ACallAssignExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__ACallAssignExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__ACallAssignExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ACallAssignExpr#compute_raw_arguments for (self: ACallAssignExpr): Array[AExpr] */
val* typing__ACallAssignExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : AExprs */;
val* var3 /* : AExprs */;
val* var4 /* : Array[AExpr] */;
val* var_res /* var res: Array[AExpr] */;
val* var5 /* : AExpr */;
val* var7 /* : AExpr */;
{
{ /* Inline parser_nodes#ACallFormExpr#n_args (self) on <self:ACallAssignExpr> */
var3 = self->attrs[COLOR_parser_nodes__ACallFormExpr___n_args].val; /* _n_args on <self:ACallAssignExpr> */
if (unlikely(var3 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_args");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1647);
show_backtrace(1);
}
var1 = var3;
RET_LABEL2:(void)0;
}
}
{
var4 = typing__AExprs__to_a(var1);
}
var_res = var4;
{
{ /* Inline parser_nodes#AAssignFormExpr#n_value (self) on <self:ACallAssignExpr> */
var7 = self->attrs[COLOR_parser_nodes__AAssignFormExpr___n_value].val; /* _n_value on <self:ACallAssignExpr> */
if (unlikely(var7 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_value");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1445);
show_backtrace(1);
}
var5 = var7;
RET_LABEL6:(void)0;
}
}
{
array__Array__add(var_res, var5); /* Direct call array#Array#add on <var_res:Array[AExpr]>*/
}
var = var_res;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ACallAssignExpr#compute_raw_arguments for (self: Object): Array[AExpr] */
val* VIRTUAL_typing__ACallAssignExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : Array[AExpr] */;
var1 = typing__ACallAssignExpr__compute_raw_arguments(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ABraExpr#property_name for (self: ABraExpr): String */
val* typing__ABraExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "[]";
var3 = 2;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ABraExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__ABraExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__ABraExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ABraExpr#compute_raw_arguments for (self: ABraExpr): Array[AExpr] */
val* typing__ABraExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : AExprs */;
val* var3 /* : AExprs */;
val* var4 /* : Array[AExpr] */;
{
{ /* Inline parser_nodes#ABraFormExpr#n_args (self) on <self:ABraExpr> */
var3 = self->attrs[COLOR_parser_nodes__ABraFormExpr___n_args].val; /* _n_args on <self:ABraExpr> */
if (unlikely(var3 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_args");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1705);
show_backtrace(1);
}
var1 = var3;
RET_LABEL2:(void)0;
}
}
{
var4 = typing__AExprs__to_a(var1);
}
var = var4;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ABraExpr#compute_raw_arguments for (self: Object): Array[AExpr] */
val* VIRTUAL_typing__ABraExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : Array[AExpr] */;
var1 = typing__ABraExpr__compute_raw_arguments(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ABraAssignExpr#property_name for (self: ABraAssignExpr): String */
val* typing__ABraAssignExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "[]=";
var3 = 3;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ABraAssignExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__ABraAssignExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__ABraAssignExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ABraAssignExpr#compute_raw_arguments for (self: ABraAssignExpr): Array[AExpr] */
val* typing__ABraAssignExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : AExprs */;
val* var3 /* : AExprs */;
val* var4 /* : Array[AExpr] */;
val* var_res /* var res: Array[AExpr] */;
val* var5 /* : AExpr */;
val* var7 /* : AExpr */;
{
{ /* Inline parser_nodes#ABraFormExpr#n_args (self) on <self:ABraAssignExpr> */
var3 = self->attrs[COLOR_parser_nodes__ABraFormExpr___n_args].val; /* _n_args on <self:ABraAssignExpr> */
if (unlikely(var3 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_args");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1705);
show_backtrace(1);
}
var1 = var3;
RET_LABEL2:(void)0;
}
}
{
var4 = typing__AExprs__to_a(var1);
}
var_res = var4;
{
{ /* Inline parser_nodes#AAssignFormExpr#n_value (self) on <self:ABraAssignExpr> */
var7 = self->attrs[COLOR_parser_nodes__AAssignFormExpr___n_value].val; /* _n_value on <self:ABraAssignExpr> */
if (unlikely(var7 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_value");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1445);
show_backtrace(1);
}
var5 = var7;
RET_LABEL6:(void)0;
}
}
{
array__Array__add(var_res, var5); /* Direct call array#Array#add on <var_res:Array[AExpr]>*/
}
var = var_res;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ABraAssignExpr#compute_raw_arguments for (self: Object): Array[AExpr] */
val* VIRTUAL_typing__ABraAssignExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : Array[AExpr] */;
var1 = typing__ABraAssignExpr__compute_raw_arguments(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ASendReassignFormExpr#write_callsite for (self: ASendReassignFormExpr): nullable CallSite */
val* typing__ASendReassignFormExpr__write_callsite(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
var1 = self->attrs[COLOR_typing__ASendReassignFormExpr___write_callsite].val; /* _write_callsite on <self:ASendReassignFormExpr> */
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ASendReassignFormExpr#write_callsite for (self: Object): nullable CallSite */
val* VIRTUAL_typing__ASendReassignFormExpr__write_callsite(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
val* var3 /* : nullable CallSite */;
{ /* Inline typing#ASendReassignFormExpr#write_callsite (self) on <self:Object(ASendReassignFormExpr)> */
var3 = self->attrs[COLOR_typing__ASendReassignFormExpr___write_callsite].val; /* _write_callsite on <self:Object(ASendReassignFormExpr)> */
var1 = var3;
RET_LABEL2:(void)0;
}
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ASendReassignFormExpr#write_callsite= for (self: ASendReassignFormExpr, nullable CallSite) */
void typing__ASendReassignFormExpr__write_callsite_61d(val* self, val* p0) {
self->attrs[COLOR_typing__ASendReassignFormExpr___write_callsite].val = p0; /* _write_callsite on <self:ASendReassignFormExpr> */
RET_LABEL:;
}
/* method typing#ASendReassignFormExpr#write_callsite= for (self: Object, nullable CallSite) */
void VIRTUAL_typing__ASendReassignFormExpr__write_callsite_61d(val* self, val* p0) {
{ /* Inline typing#ASendReassignFormExpr#write_callsite= (self,p0) on <self:Object(ASendReassignFormExpr)> */
self->attrs[COLOR_typing__ASendReassignFormExpr___write_callsite].val = p0; /* _write_callsite on <self:Object(ASendReassignFormExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
/* method typing#ASendReassignFormExpr#accept_typing for (self: ASendReassignFormExpr, TypeVisitor) */
void typing__ASendReassignFormExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : AExpr */;
val* var2 /* : AExpr */;
val* var3 /* : nullable MType */;
val* var_recvtype /* var recvtype: nullable MType */;
val* var4 /* : String */;
val* var_name /* var name: String */;
val* var5 /* : null */;
short int var6 /* : Bool */;
short int var7 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var9 /* : Bool */;
short int var11 /* : Bool */;
short int var12 /* : Bool */;
int cltype;
int idtype;
static val* varonce;
val* var13 /* : String */;
char* var14 /* : NativeString */;
long var15 /* : Int */;
val* var16 /* : FlatString */;
static val* varonce17;
val* var18 /* : String */;
char* var19 /* : NativeString */;
long var20 /* : Int */;
val* var21 /* : FlatString */;
val* var22 /* : Array[Object] */;
long var23 /* : Int */;
val* var24 /* : NativeArray[Object] */;
val* var25 /* : String */;
val* var26 /* : AExpr */;
val* var28 /* : AExpr */;
short int var29 /* : Bool */;
int cltype30;
int idtype31;
short int var_for_self /* var for_self: Bool */;
val* var32 /* : nullable CallSite */;
val* var_callsite /* var callsite: nullable CallSite */;
val* var33 /* : null */;
short int var34 /* : Bool */;
short int var35 /* : Bool */;
short int var37 /* : Bool */;
short int var39 /* : Bool */;
val* var41 /* : Array[AExpr] */;
val* var_args /* var args: Array[AExpr] */;
short int var42 /* : Bool */;
val* var43 /* : MSignature */;
val* var45 /* : MSignature */;
val* var46 /* : nullable MType */;
val* var48 /* : nullable MType */;
val* var_readtype /* var readtype: nullable MType */;
val* var49 /* : null */;
short int var50 /* : Bool */;
short int var51 /* : Bool */;
short int var53 /* : Bool */;
short int var55 /* : Bool */;
static val* varonce56;
val* var57 /* : String */;
char* var58 /* : NativeString */;
long var59 /* : Int */;
val* var60 /* : FlatString */;
static val* varonce61;
val* var62 /* : String */;
char* var63 /* : NativeString */;
long var64 /* : Int */;
val* var65 /* : FlatString */;
val* var66 /* : Array[Object] */;
long var67 /* : Int */;
val* var68 /* : NativeArray[Object] */;
val* var69 /* : String */;
static val* varonce70;
val* var71 /* : String */;
char* var72 /* : NativeString */;
long var73 /* : Int */;
val* var74 /* : FlatString */;
val* var75 /* : String */;
val* var76 /* : AExpr */;
val* var78 /* : AExpr */;
short int var79 /* : Bool */;
int cltype80;
int idtype81;
val* var82 /* : nullable CallSite */;
val* var_wcallsite /* var wcallsite: nullable CallSite */;
val* var83 /* : null */;
short int var84 /* : Bool */;
short int var85 /* : Bool */;
short int var87 /* : Bool */;
short int var89 /* : Bool */;
val* var91 /* : MSignature */;
val* var93 /* : MSignature */;
val* var94 /* : Array[MParameter] */;
val* var96 /* : Array[MParameter] */;
val* var97 /* : nullable Object */;
val* var98 /* : MType */;
val* var100 /* : MType */;
val* var101 /* : nullable MType */;
val* var_wtype /* var wtype: nullable MType */;
val* var102 /* : null */;
short int var103 /* : Bool */;
short int var104 /* : Bool */;
short int var106 /* : Bool */;
short int var108 /* : Bool */;
val* var109 /* : Array[nullable Object] */;
val* var110 /* : AExpr */;
val* var112 /* : AExpr */;
short int var113 /* : Bool */;
short int var114 /* : Bool */;
var_v = p0;
{
{ /* Inline parser_nodes#ASendExpr#n_expr (self) on <self:ASendReassignFormExpr> */
var2 = self->attrs[COLOR_parser_nodes__ASendExpr___n_expr].val; /* _n_expr on <self:ASendReassignFormExpr> */
if (unlikely(var2 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1466);
show_backtrace(1);
}
var = var2;
RET_LABEL1:(void)0;
}
}
{
var3 = typing__TypeVisitor__visit_expr(var_v, var);
}
var_recvtype = var3;
{
var4 = ((val* (*)(val*))(self->class->vft[COLOR_typing__ASendExpr__property_name]))(self) /* property_name on <self:ASendReassignFormExpr>*/;
}
var_name = var4;
var5 = NULL;
if (var_recvtype == NULL) {
var6 = 1; /* is null */
} else {
var6 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_recvtype,var5) on <var_recvtype:nullable MType> */
var_other = var5;
{
{ /* Inline kernel#Object#is_same_instance (var_recvtype,var_other) on <var_recvtype:nullable MType(MType)> */
var11 = var_recvtype == var_other;
var9 = var11;
goto RET_LABEL10;
RET_LABEL10:(void)0;
}
}
var7 = var9;
goto RET_LABEL8;
RET_LABEL8:(void)0;
}
var6 = var7;
}
if (var6){
goto RET_LABEL;
} else {
}
/* <var_recvtype:nullable MType(MType)> isa MNullType */
cltype = type_model__MNullType.color;
idtype = type_model__MNullType.id;
if(cltype >= var_recvtype->type->table_size) {
var12 = 0;
} else {
var12 = var_recvtype->type->type_table[cltype] == idtype;
}
if (var12){
if (varonce) {
var13 = varonce;
} else {
var14 = "Error: Method \'";
var15 = 15;
var16 = string__NativeString__to_s_with_length(var14, var15);
var13 = var16;
varonce = var13;
}
if (varonce17) {
var18 = varonce17;
} else {
var19 = "\' call on \'null\'.";
var20 = 17;
var21 = string__NativeString__to_s_with_length(var19, var20);
var18 = var21;
varonce17 = var18;
}
var22 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var22 = array_instance Array[Object] */
var23 = 3;
var24 = NEW_array__NativeArray(var23, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var24)->values[0] = (val*) var13;
((struct instance_array__NativeArray*)var24)->values[1] = (val*) var_name;
((struct instance_array__NativeArray*)var24)->values[2] = (val*) var18;
{
((void (*)(val*, val*, long))(var22->class->vft[COLOR_array__Array__with_native]))(var22, var24, var23) /* with_native on <var22:Array[Object]>*/;
}
}
{
var25 = ((val* (*)(val*))(var22->class->vft[COLOR_string__Object__to_s]))(var22) /* to_s on <var22:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var25); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
{
{ /* Inline parser_nodes#ASendExpr#n_expr (self) on <self:ASendReassignFormExpr> */
var28 = self->attrs[COLOR_parser_nodes__ASendExpr___n_expr].val; /* _n_expr on <self:ASendReassignFormExpr> */
if (unlikely(var28 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1466);
show_backtrace(1);
}
var26 = var28;
RET_LABEL27:(void)0;
}
}
/* <var26:AExpr> isa ASelfExpr */
cltype30 = type_parser_nodes__ASelfExpr.color;
idtype31 = type_parser_nodes__ASelfExpr.id;
if(cltype30 >= var26->type->table_size) {
var29 = 0;
} else {
var29 = var26->type->type_table[cltype30] == idtype31;
}
var_for_self = var29;
{
var32 = typing__TypeVisitor__get_method(var_v, self, var_recvtype, var_name, var_for_self);
}
var_callsite = var32;
var33 = NULL;
if (var_callsite == NULL) {
var34 = 1; /* is null */
} else {
var34 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_callsite,var33) on <var_callsite:nullable CallSite> */
var_other = var33;
{
{ /* Inline kernel#Object#is_same_instance (var_callsite,var_other) on <var_callsite:nullable CallSite(CallSite)> */
var39 = var_callsite == var_other;
var37 = var39;
goto RET_LABEL38;
RET_LABEL38:(void)0;
}
}
var35 = var37;
goto RET_LABEL36;
RET_LABEL36:(void)0;
}
var34 = var35;
}
if (var34){
goto RET_LABEL;
} else {
}
{
{ /* Inline typing#ASendExpr#callsite= (self,var_callsite) on <self:ASendReassignFormExpr> */
self->attrs[COLOR_typing__ASendExpr___callsite].val = var_callsite; /* _callsite on <self:ASendReassignFormExpr> */
RET_LABEL40:(void)0;
}
}
{
var41 = ((val* (*)(val*))(self->class->vft[COLOR_typing__ASendExpr__compute_raw_arguments]))(self) /* compute_raw_arguments on <self:ASendReassignFormExpr>*/;
}
var_args = var41;
{
var42 = typing__CallSite__check_signature(var_callsite, var_v, var_args);
}
{
{ /* Inline typing#CallSite#msignature (var_callsite) on <var_callsite:nullable CallSite(CallSite)> */
var45 = var_callsite->attrs[COLOR_typing__CallSite___msignature].val; /* _msignature on <var_callsite:nullable CallSite(CallSite)> */
if (unlikely(var45 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _msignature");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 490);
show_backtrace(1);
}
var43 = var45;
RET_LABEL44:(void)0;
}
}
{
{ /* Inline model#MSignature#return_mtype (var43) on <var43:MSignature> */
var48 = var43->attrs[COLOR_model__MSignature___return_mtype].val; /* _return_mtype on <var43:MSignature> */
var46 = var48;
RET_LABEL47:(void)0;
}
}
var_readtype = var46;
var49 = NULL;
if (var_readtype == NULL) {
var50 = 1; /* is null */
} else {
var50 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_readtype,var49) on <var_readtype:nullable MType> */
var_other = var49;
{
{ /* Inline kernel#Object#is_same_instance (var_readtype,var_other) on <var_readtype:nullable MType(MType)> */
var55 = var_readtype == var_other;
var53 = var55;
goto RET_LABEL54;
RET_LABEL54:(void)0;
}
}
var51 = var53;
goto RET_LABEL52;
RET_LABEL52:(void)0;
}
var50 = var51;
}
if (var50){
if (varonce56) {
var57 = varonce56;
} else {
var58 = "Error: ";
var59 = 7;
var60 = string__NativeString__to_s_with_length(var58, var59);
var57 = var60;
varonce56 = var57;
}
if (varonce61) {
var62 = varonce61;
} else {
var63 = " is not a function";
var64 = 18;
var65 = string__NativeString__to_s_with_length(var63, var64);
var62 = var65;
varonce61 = var62;
}
var66 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var66 = array_instance Array[Object] */
var67 = 3;
var68 = NEW_array__NativeArray(var67, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var68)->values[0] = (val*) var57;
((struct instance_array__NativeArray*)var68)->values[1] = (val*) var_name;
((struct instance_array__NativeArray*)var68)->values[2] = (val*) var62;
{
((void (*)(val*, val*, long))(var66->class->vft[COLOR_array__Array__with_native]))(var66, var68, var67) /* with_native on <var66:Array[Object]>*/;
}
}
{
var69 = ((val* (*)(val*))(var66->class->vft[COLOR_string__Object__to_s]))(var66) /* to_s on <var66:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var69); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
if (varonce70) {
var71 = varonce70;
} else {
var72 = "=";
var73 = 1;
var74 = string__NativeString__to_s_with_length(var72, var73);
var71 = var74;
varonce70 = var71;
}
{
var75 = string__FlatString___43d(var_name, var71);
}
{
{ /* Inline parser_nodes#ASendExpr#n_expr (self) on <self:ASendReassignFormExpr> */
var78 = self->attrs[COLOR_parser_nodes__ASendExpr___n_expr].val; /* _n_expr on <self:ASendReassignFormExpr> */
if (unlikely(var78 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_expr");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1466);
show_backtrace(1);
}
var76 = var78;
RET_LABEL77:(void)0;
}
}
/* <var76:AExpr> isa ASelfExpr */
cltype80 = type_parser_nodes__ASelfExpr.color;
idtype81 = type_parser_nodes__ASelfExpr.id;
if(cltype80 >= var76->type->table_size) {
var79 = 0;
} else {
var79 = var76->type->type_table[cltype80] == idtype81;
}
{
var82 = typing__TypeVisitor__get_method(var_v, self, var_recvtype, var75, var79);
}
var_wcallsite = var82;
var83 = NULL;
if (var_wcallsite == NULL) {
var84 = 1; /* is null */
} else {
var84 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_wcallsite,var83) on <var_wcallsite:nullable CallSite> */
var_other = var83;
{
{ /* Inline kernel#Object#is_same_instance (var_wcallsite,var_other) on <var_wcallsite:nullable CallSite(CallSite)> */
var89 = var_wcallsite == var_other;
var87 = var89;
goto RET_LABEL88;
RET_LABEL88:(void)0;
}
}
var85 = var87;
goto RET_LABEL86;
RET_LABEL86:(void)0;
}
var84 = var85;
}
if (var84){
goto RET_LABEL;
} else {
}
{
{ /* Inline typing#ASendReassignFormExpr#write_callsite= (self,var_wcallsite) on <self:ASendReassignFormExpr> */
self->attrs[COLOR_typing__ASendReassignFormExpr___write_callsite].val = var_wcallsite; /* _write_callsite on <self:ASendReassignFormExpr> */
RET_LABEL90:(void)0;
}
}
{
{ /* Inline typing#CallSite#msignature (var_wcallsite) on <var_wcallsite:nullable CallSite(CallSite)> */
var93 = var_wcallsite->attrs[COLOR_typing__CallSite___msignature].val; /* _msignature on <var_wcallsite:nullable CallSite(CallSite)> */
if (unlikely(var93 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _msignature");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 490);
show_backtrace(1);
}
var91 = var93;
RET_LABEL92:(void)0;
}
}
{
{ /* Inline model#MSignature#mparameters (var91) on <var91:MSignature> */
var96 = var91->attrs[COLOR_model__MSignature___mparameters].val; /* _mparameters on <var91:MSignature> */
if (unlikely(var96 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mparameters");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1465);
show_backtrace(1);
}
var94 = var96;
RET_LABEL95:(void)0;
}
}
{
var97 = abstract_collection__SequenceRead__last(var94);
}
{
{ /* Inline model#MParameter#mtype (var97) on <var97:nullable Object(MParameter)> */
var100 = var97->attrs[COLOR_model__MParameter___mtype].val; /* _mtype on <var97:nullable Object(MParameter)> */
if (unlikely(var100 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mtype");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1565);
show_backtrace(1);
}
var98 = var100;
RET_LABEL99:(void)0;
}
}
{
var101 = typing__AReassignFormExpr__resolve_reassignment(self, var_v, var_readtype, var98);
}
var_wtype = var101;
var102 = NULL;
if (var_wtype == NULL) {
var103 = 1; /* is null */
} else {
var103 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_wtype,var102) on <var_wtype:nullable MType> */
var_other = var102;
{
{ /* Inline kernel#Object#is_same_instance (var_wtype,var_other) on <var_wtype:nullable MType(MType)> */
var108 = var_wtype == var_other;
var106 = var108;
goto RET_LABEL107;
RET_LABEL107:(void)0;
}
}
var104 = var106;
goto RET_LABEL105;
RET_LABEL105:(void)0;
}
var103 = var104;
}
if (var103){
goto RET_LABEL;
} else {
}
{
var109 = array__Collection__to_a(var_args);
}
var_args = var109;
{
{ /* Inline parser_nodes#AReassignFormExpr#n_value (self) on <self:ASendReassignFormExpr> */
var112 = self->attrs[COLOR_parser_nodes__AReassignFormExpr___n_value].val; /* _n_value on <self:ASendReassignFormExpr> */
if (unlikely(var112 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_value");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1452);
show_backtrace(1);
}
var110 = var112;
RET_LABEL111:(void)0;
}
}
{
array__Array__add(var_args, var110); /* Direct call array#Array#add on <var_args:Array[AExpr]>*/
}
{
var113 = typing__CallSite__check_signature(var_wcallsite, var_v, var_args);
}
var114 = 1;
{
{ /* Inline typing#AExpr#is_typed= (self,var114) on <self:ASendReassignFormExpr> */
self->attrs[COLOR_typing__AExpr___is_typed].s = var114; /* _is_typed on <self:ASendReassignFormExpr> */
RET_LABEL115:(void)0;
}
}
RET_LABEL:;
}
/* method typing#ASendReassignFormExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__ASendReassignFormExpr__accept_typing(val* self, val* p0) {
typing__ASendReassignFormExpr__accept_typing(self, p0); /* Direct call typing#ASendReassignFormExpr#accept_typing on <self:Object(ASendReassignFormExpr)>*/
RET_LABEL:;
}
/* method typing#ACallReassignExpr#property_name for (self: ACallReassignExpr): String */
val* typing__ACallReassignExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : TId */;
val* var3 /* : TId */;
val* var4 /* : String */;
{
{ /* Inline parser_nodes#ACallFormExpr#n_id (self) on <self:ACallReassignExpr> */
var3 = self->attrs[COLOR_parser_nodes__ACallFormExpr___n_id].val; /* _n_id on <self:ACallReassignExpr> */
if (unlikely(var3 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_id");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1644);
show_backtrace(1);
}
var1 = var3;
RET_LABEL2:(void)0;
}
}
{
var4 = lexer_work__Token__text(var1);
}
var = var4;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ACallReassignExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__ACallReassignExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__ACallReassignExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ACallReassignExpr#compute_raw_arguments for (self: ACallReassignExpr): Array[AExpr] */
val* typing__ACallReassignExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : AExprs */;
val* var3 /* : AExprs */;
val* var4 /* : Array[AExpr] */;
{
{ /* Inline parser_nodes#ACallFormExpr#n_args (self) on <self:ACallReassignExpr> */
var3 = self->attrs[COLOR_parser_nodes__ACallFormExpr___n_args].val; /* _n_args on <self:ACallReassignExpr> */
if (unlikely(var3 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_args");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1647);
show_backtrace(1);
}
var1 = var3;
RET_LABEL2:(void)0;
}
}
{
var4 = typing__AExprs__to_a(var1);
}
var = var4;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ACallReassignExpr#compute_raw_arguments for (self: Object): Array[AExpr] */
val* VIRTUAL_typing__ACallReassignExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : Array[AExpr] */;
var1 = typing__ACallReassignExpr__compute_raw_arguments(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ABraReassignExpr#property_name for (self: ABraReassignExpr): String */
val* typing__ABraReassignExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "[]";
var3 = 2;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ABraReassignExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__ABraReassignExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__ABraReassignExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ABraReassignExpr#compute_raw_arguments for (self: ABraReassignExpr): Array[AExpr] */
val* typing__ABraReassignExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : AExprs */;
val* var3 /* : AExprs */;
val* var4 /* : Array[AExpr] */;
{
{ /* Inline parser_nodes#ABraFormExpr#n_args (self) on <self:ABraReassignExpr> */
var3 = self->attrs[COLOR_parser_nodes__ABraFormExpr___n_args].val; /* _n_args on <self:ABraReassignExpr> */
if (unlikely(var3 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_args");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1705);
show_backtrace(1);
}
var1 = var3;
RET_LABEL2:(void)0;
}
}
{
var4 = typing__AExprs__to_a(var1);
}
var = var4;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#ABraReassignExpr#compute_raw_arguments for (self: Object): Array[AExpr] */
val* VIRTUAL_typing__ABraReassignExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : Array[AExpr] */;
var1 = typing__ABraReassignExpr__compute_raw_arguments(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AInitExpr#property_name for (self: AInitExpr): String */
val* typing__AInitExpr__property_name(val* self) {
val* var /* : String */;
static val* varonce;
val* var1 /* : String */;
char* var2 /* : NativeString */;
long var3 /* : Int */;
val* var4 /* : FlatString */;
if (varonce) {
var1 = varonce;
} else {
var2 = "init";
var3 = 4;
var4 = string__NativeString__to_s_with_length(var2, var3);
var1 = var4;
varonce = var1;
}
var = var1;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#AInitExpr#property_name for (self: Object): String */
val* VIRTUAL_typing__AInitExpr__property_name(val* self) {
val* var /* : String */;
val* var1 /* : String */;
var1 = typing__AInitExpr__property_name(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AInitExpr#compute_raw_arguments for (self: AInitExpr): Array[AExpr] */
val* typing__AInitExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : AExprs */;
val* var3 /* : AExprs */;
val* var4 /* : Array[AExpr] */;
{
{ /* Inline parser_nodes#AInitExpr#n_args (self) on <self:AInitExpr> */
var3 = self->attrs[COLOR_parser_nodes__AInitExpr___n_args].val; /* _n_args on <self:AInitExpr> */
if (unlikely(var3 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_args");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1699);
show_backtrace(1);
}
var1 = var3;
RET_LABEL2:(void)0;
}
}
{
var4 = typing__AExprs__to_a(var1);
}
var = var4;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#AInitExpr#compute_raw_arguments for (self: Object): Array[AExpr] */
val* VIRTUAL_typing__AInitExpr__compute_raw_arguments(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : Array[AExpr] */;
var1 = typing__AInitExpr__compute_raw_arguments(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#AExprs#to_a for (self: AExprs): Array[AExpr] */
val* typing__AExprs__to_a(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : ANodes[AExpr] */;
val* var3 /* : ANodes[AExpr] */;
val* var4 /* : Array[nullable Object] */;
{
{ /* Inline parser_nodes#AExprs#n_exprs (self) on <self:AExprs> */
var3 = self->attrs[COLOR_parser_nodes__AExprs___n_exprs].val; /* _n_exprs on <self:AExprs> */
if (unlikely(var3 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_exprs");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1946);
show_backtrace(1);
}
var1 = var3;
RET_LABEL2:(void)0;
}
}
{
var4 = array__Collection__to_a(var1);
}
var = var4;
goto RET_LABEL;
RET_LABEL:;
return var;
}
/* method typing#AExprs#to_a for (self: Object): Array[AExpr] */
val* VIRTUAL_typing__AExprs__to_a(val* self) {
val* var /* : Array[AExpr] */;
val* var1 /* : Array[AExpr] */;
var1 = typing__AExprs__to_a(self);
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ASuperExpr#callsite for (self: ASuperExpr): nullable CallSite */
val* typing__ASuperExpr__callsite(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
var1 = self->attrs[COLOR_typing__ASuperExpr___callsite].val; /* _callsite on <self:ASuperExpr> */
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ASuperExpr#callsite for (self: Object): nullable CallSite */
val* VIRTUAL_typing__ASuperExpr__callsite(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
val* var3 /* : nullable CallSite */;
{ /* Inline typing#ASuperExpr#callsite (self) on <self:Object(ASuperExpr)> */
var3 = self->attrs[COLOR_typing__ASuperExpr___callsite].val; /* _callsite on <self:Object(ASuperExpr)> */
var1 = var3;
RET_LABEL2:(void)0;
}
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ASuperExpr#callsite= for (self: ASuperExpr, nullable CallSite) */
void typing__ASuperExpr__callsite_61d(val* self, val* p0) {
self->attrs[COLOR_typing__ASuperExpr___callsite].val = p0; /* _callsite on <self:ASuperExpr> */
RET_LABEL:;
}
/* method typing#ASuperExpr#callsite= for (self: Object, nullable CallSite) */
void VIRTUAL_typing__ASuperExpr__callsite_61d(val* self, val* p0) {
{ /* Inline typing#ASuperExpr#callsite= (self,p0) on <self:Object(ASuperExpr)> */
self->attrs[COLOR_typing__ASuperExpr___callsite].val = p0; /* _callsite on <self:Object(ASuperExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
/* method typing#ASuperExpr#mpropdef for (self: ASuperExpr): nullable MMethodDef */
val* typing__ASuperExpr__mpropdef(val* self) {
val* var /* : nullable MMethodDef */;
val* var1 /* : nullable MMethodDef */;
var1 = self->attrs[COLOR_typing__ASuperExpr___mpropdef].val; /* _mpropdef on <self:ASuperExpr> */
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ASuperExpr#mpropdef for (self: Object): nullable MMethodDef */
val* VIRTUAL_typing__ASuperExpr__mpropdef(val* self) {
val* var /* : nullable MMethodDef */;
val* var1 /* : nullable MMethodDef */;
val* var3 /* : nullable MMethodDef */;
{ /* Inline typing#ASuperExpr#mpropdef (self) on <self:Object(ASuperExpr)> */
var3 = self->attrs[COLOR_typing__ASuperExpr___mpropdef].val; /* _mpropdef on <self:Object(ASuperExpr)> */
var1 = var3;
RET_LABEL2:(void)0;
}
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ASuperExpr#mpropdef= for (self: ASuperExpr, nullable MMethodDef) */
void typing__ASuperExpr__mpropdef_61d(val* self, val* p0) {
self->attrs[COLOR_typing__ASuperExpr___mpropdef].val = p0; /* _mpropdef on <self:ASuperExpr> */
RET_LABEL:;
}
/* method typing#ASuperExpr#mpropdef= for (self: Object, nullable MMethodDef) */
void VIRTUAL_typing__ASuperExpr__mpropdef_61d(val* self, val* p0) {
{ /* Inline typing#ASuperExpr#mpropdef= (self,p0) on <self:Object(ASuperExpr)> */
self->attrs[COLOR_typing__ASuperExpr___mpropdef].val = p0; /* _mpropdef on <self:Object(ASuperExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
/* method typing#ASuperExpr#accept_typing for (self: ASuperExpr, TypeVisitor) */
void typing__ASuperExpr__accept_typing(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : nullable MClassType */;
val* var2 /* : nullable MClassType */;
val* var_anchor /* var anchor: nullable MClassType */;
val* var3 /* : null */;
short int var4 /* : Bool */;
short int var5 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var7 /* : Bool */;
short int var8 /* : Bool */;
short int var9 /* : Bool */;
val* var10 /* : Variable */;
val* var12 /* : Variable */;
val* var13 /* : nullable MType */;
val* var_recvtype /* var recvtype: nullable MType */;
val* var14 /* : null */;
short int var15 /* : Bool */;
short int var16 /* : Bool */;
short int var18 /* : Bool */;
short int var19 /* : Bool */;
short int var20 /* : Bool */;
val* var21 /* : nullable MPropDef */;
val* var23 /* : nullable MPropDef */;
val* var24 /* : MProperty */;
val* var26 /* : MProperty */;
val* var_mproperty /* var mproperty: MProperty */;
short int var27 /* : Bool */;
int cltype;
int idtype;
short int var28 /* : Bool */;
static val* varonce;
val* var29 /* : String */;
char* var30 /* : NativeString */;
long var31 /* : Int */;
val* var32 /* : FlatString */;
val* var33 /* : MModule */;
val* var35 /* : MModule */;
val* var36 /* : Array[MPropDef] */;
val* var_superprops /* var superprops: Array[MMethodDef] */;
long var37 /* : Int */;
long var39 /* : Int */;
long var40 /* : Int */;
short int var41 /* : Bool */;
short int var42 /* : Bool */;
short int var44 /* : Bool */;
short int var45 /* : Bool */;
short int var46 /* : Bool */;
short int var48 /* : Bool */;
short int var_ /* var : Bool */;
val* var49 /* : nullable MPropDef */;
val* var51 /* : nullable MPropDef */;
short int var52 /* : Bool */;
static val* varonce53;
val* var54 /* : String */;
char* var55 /* : NativeString */;
long var56 /* : Int */;
val* var57 /* : FlatString */;
static val* varonce58;
val* var59 /* : String */;
char* var60 /* : NativeString */;
long var61 /* : Int */;
val* var62 /* : FlatString */;
val* var63 /* : Array[Object] */;
long var64 /* : Int */;
val* var65 /* : NativeArray[Object] */;
val* var66 /* : String */;
val* var67 /* : nullable Object */;
val* var_superprop /* var superprop: MMethodDef */;
val* var68 /* : nullable MSignature */;
val* var70 /* : nullable MSignature */;
val* var_msignature /* var msignature: MSignature */;
short int var71 /* : Bool */;
val* var72 /* : MType */;
short int var73 /* : Bool */;
int cltype74;
int idtype75;
const char* var_class_name;
val* var76 /* : AExprs */;
val* var78 /* : AExprs */;
val* var79 /* : Array[AExpr] */;
val* var_args /* var args: Array[AExpr] */;
long var80 /* : Int */;
long var82 /* : Int */;
long var83 /* : Int */;
short int var84 /* : Bool */;
short int var86 /* : Bool */;
int cltype87;
int idtype88;
const char* var_class_name89;
short int var90 /* : Bool */;
val* var91 /* : String */;
val* var93 /* : String */;
short int var94 /* : Bool */;
val* var95 /* : nullable MType */;
val* var97 /* : nullable MType */;
short int var99 /* : Bool */;
val* var101 /* : nullable MPropDef */;
val* var103 /* : nullable MPropDef */;
short int var104 /* : Bool */;
val* var106 /* : nullable MPropDef */;
val* var108 /* : nullable MPropDef */;
short int var109 /* : Bool */;
int cltype110;
int idtype111;
const char* var_class_name112;
var_v = p0;
{
{ /* Inline typing#TypeVisitor#anchor (var_v) on <var_v:TypeVisitor> */
var2 = var_v->attrs[COLOR_typing__TypeVisitor___anchor].val; /* _anchor on <var_v:TypeVisitor> */
var = var2;
RET_LABEL1:(void)0;
}
}
var_anchor = var;
var3 = NULL;
if (var_anchor == NULL) {
var4 = 0; /* is null */
} else {
var4 = 1; /* arg is null and recv is not */
}
if (0) {
{ /* Inline kernel#Object#!= (var_anchor,var3) on <var_anchor:nullable MClassType> */
var_other = var3;
{
var8 = ((short int (*)(val*, val*))(var_anchor->class->vft[COLOR_kernel__Object___61d_61d]))(var_anchor, var_other) /* == on <var_anchor:nullable MClassType(MClassType)>*/;
var7 = var8;
}
var9 = !var7;
var5 = var9;
goto RET_LABEL6;
RET_LABEL6:(void)0;
}
var4 = var5;
}
if (unlikely(!var4)) {
PRINT_ERROR("Runtime error: %s", "Assert failed");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1585);
show_backtrace(1);
}
{
{ /* Inline typing#TypeVisitor#selfvariable (var_v) on <var_v:TypeVisitor> */
var12 = var_v->attrs[COLOR_typing__TypeVisitor___selfvariable].val; /* _selfvariable on <var_v:TypeVisitor> */
if (unlikely(var12 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _selfvariable");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 50);
show_backtrace(1);
}
var10 = var12;
RET_LABEL11:(void)0;
}
}
{
var13 = typing__TypeVisitor__get_variable(var_v, self, var10);
}
var_recvtype = var13;
var14 = NULL;
if (var_recvtype == NULL) {
var15 = 0; /* is null */
} else {
var15 = 1; /* arg is null and recv is not */
}
if (0) {
{ /* Inline kernel#Object#!= (var_recvtype,var14) on <var_recvtype:nullable MType> */
var_other = var14;
{
var19 = ((short int (*)(val*, val*))(var_recvtype->class->vft[COLOR_kernel__Object___61d_61d]))(var_recvtype, var_other) /* == on <var_recvtype:nullable MType(MType)>*/;
var18 = var19;
}
var20 = !var18;
var16 = var20;
goto RET_LABEL17;
RET_LABEL17:(void)0;
}
var15 = var16;
}
if (unlikely(!var15)) {
PRINT_ERROR("Runtime error: %s", "Assert failed");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1587);
show_backtrace(1);
}
{
{ /* Inline typing#TypeVisitor#mpropdef (var_v) on <var_v:TypeVisitor> */
var23 = var_v->attrs[COLOR_typing__TypeVisitor___mpropdef].val; /* _mpropdef on <var_v:TypeVisitor> */
var21 = var23;
RET_LABEL22:(void)0;
}
}
if (var21 == NULL) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1588);
show_backtrace(1);
} else {
{ /* Inline model#MPropDef#mproperty (var21) on <var21:nullable MPropDef> */
if (unlikely(var21 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1898);
show_backtrace(1);
}
var26 = var21->attrs[COLOR_model__MPropDef___mproperty].val; /* _mproperty on <var21:nullable MPropDef> */
if (unlikely(var26 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mproperty");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1898);
show_backtrace(1);
}
var24 = var26;
RET_LABEL25:(void)0;
}
}
var_mproperty = var24;
/* <var_mproperty:MProperty> isa MMethod */
cltype = type_model__MMethod.color;
idtype = type_model__MMethod.id;
if(cltype >= var_mproperty->type->table_size) {
var27 = 0;
} else {
var27 = var_mproperty->type->type_table[cltype] == idtype;
}
var28 = !var27;
if (var28){
if (varonce) {
var29 = varonce;
} else {
var30 = "Error: super only usable in a method";
var31 = 36;
var32 = string__NativeString__to_s_with_length(var30, var31);
var29 = var32;
varonce = var29;
}
{
typing__TypeVisitor__error(var_v, self, var29); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
{
{ /* Inline typing#TypeVisitor#mmodule (var_v) on <var_v:TypeVisitor> */
var35 = var_v->attrs[COLOR_typing__TypeVisitor___mmodule].val; /* _mmodule on <var_v:TypeVisitor> */
if (unlikely(var35 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mmodule");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 36);
show_backtrace(1);
}
var33 = var35;
RET_LABEL34:(void)0;
}
}
{
var36 = model__MProperty__lookup_super_definitions(var_mproperty, var33, var_anchor);
}
var_superprops = var36;
{
{ /* Inline array#AbstractArrayRead#length (var_superprops) on <var_superprops:Array[MMethodDef]> */
var39 = var_superprops->attrs[COLOR_array__AbstractArrayRead___length].l; /* _length on <var_superprops:Array[MMethodDef]> */
var37 = var39;
RET_LABEL38:(void)0;
}
}
var40 = 0;
{
{ /* Inline kernel#Int#== (var37,var40) on <var37:Int> */
var44 = var37 == var40;
var42 = var44;
goto RET_LABEL43;
RET_LABEL43:(void)0;
}
var41 = var42;
}
if (var41){
{
{ /* Inline model#MMethod#is_init (var_mproperty) on <var_mproperty:MProperty(MMethod)> */
var48 = var_mproperty->attrs[COLOR_model__MMethod___is_init].s; /* _is_init on <var_mproperty:MProperty(MMethod)> */
var46 = var48;
RET_LABEL47:(void)0;
}
}
var_ = var46;
if (var46){
{
{ /* Inline typing#TypeVisitor#mpropdef (var_v) on <var_v:TypeVisitor> */
var51 = var_v->attrs[COLOR_typing__TypeVisitor___mpropdef].val; /* _mpropdef on <var_v:TypeVisitor> */
var49 = var51;
RET_LABEL50:(void)0;
}
}
if (var49 == NULL) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1595);
show_backtrace(1);
} else {
var52 = model__MPropDef__is_intro(var49);
}
var45 = var52;
} else {
var45 = var_;
}
if (var45){
{
typing__ASuperExpr__process_superinit(self, var_v); /* Direct call typing#ASuperExpr#process_superinit on <self:ASuperExpr>*/
}
goto RET_LABEL;
} else {
}
if (varonce53) {
var54 = varonce53;
} else {
var55 = "Error: No super method to call for ";
var56 = 35;
var57 = string__NativeString__to_s_with_length(var55, var56);
var54 = var57;
varonce53 = var54;
}
if (varonce58) {
var59 = varonce58;
} else {
var60 = ".";
var61 = 1;
var62 = string__NativeString__to_s_with_length(var60, var61);
var59 = var62;
varonce58 = var59;
}
var63 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var63 = array_instance Array[Object] */
var64 = 3;
var65 = NEW_array__NativeArray(var64, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var65)->values[0] = (val*) var54;
((struct instance_array__NativeArray*)var65)->values[1] = (val*) var_mproperty;
((struct instance_array__NativeArray*)var65)->values[2] = (val*) var59;
{
((void (*)(val*, val*, long))(var63->class->vft[COLOR_array__Array__with_native]))(var63, var65, var64) /* with_native on <var63:Array[Object]>*/;
}
}
{
var66 = ((val* (*)(val*))(var63->class->vft[COLOR_string__Object__to_s]))(var63) /* to_s on <var63:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var66); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
{
var67 = abstract_collection__SequenceRead__first(var_superprops);
}
var_superprop = var67;
{
{ /* Inline model#MMethodDef#msignature (var_superprop) on <var_superprop:MMethodDef> */
var70 = var_superprop->attrs[COLOR_model__MMethodDef___msignature].val; /* _msignature on <var_superprop:MMethodDef> */
var68 = var70;
RET_LABEL69:(void)0;
}
}
if (unlikely(var68 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Cast failed");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1605);
show_backtrace(1);
}
var_msignature = var68;
var71 = 1;
{
var72 = typing__TypeVisitor__resolve_for(var_v, var_msignature, var_recvtype, var71);
}
/* <var72:MType> isa MSignature */
cltype74 = type_model__MSignature.color;
idtype75 = type_model__MSignature.id;
if(cltype74 >= var72->type->table_size) {
var73 = 0;
} else {
var73 = var72->type->type_table[cltype74] == idtype75;
}
if (unlikely(!var73)) {
var_class_name = var72 == NULL ? "null" : var72->type->name;
PRINT_ERROR("Runtime error: Cast failed. Expected `%s`, got `%s`", "MSignature", var_class_name);
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1606);
show_backtrace(1);
}
var_msignature = var72;
{
{ /* Inline parser_nodes#ASuperExpr#n_args (self) on <self:ASuperExpr> */
var78 = self->attrs[COLOR_parser_nodes__ASuperExpr___n_args].val; /* _n_args on <self:ASuperExpr> */
if (unlikely(var78 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_args");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1691);
show_backtrace(1);
}
var76 = var78;
RET_LABEL77:(void)0;
}
}
{
var79 = typing__AExprs__to_a(var76);
}
var_args = var79;
{
{ /* Inline array#AbstractArrayRead#length (var_args) on <var_args:Array[AExpr]> */
var82 = var_args->attrs[COLOR_array__AbstractArrayRead___length].l; /* _length on <var_args:Array[AExpr]> */
var80 = var82;
RET_LABEL81:(void)0;
}
}
var83 = 0;
{
{ /* Inline kernel#Int#> (var80,var83) on <var80:Int> */
/* Covariant cast for argument 0 (i) <var83:Int> isa OTHER */
/* <var83:Int> isa OTHER */
var86 = 1; /* easy <var83:Int> isa OTHER*/
if (unlikely(!var86)) {
var_class_name89 = type_kernel__Int.name;
PRINT_ERROR("Runtime error: Cast failed. Expected `%s`, got `%s`", "OTHER", var_class_name89);
PRINT_ERROR(" (%s:%d)\n", "../lib/standard/kernel.nit", 373);
show_backtrace(1);
}
var90 = var80 > var83;
var84 = var90;
goto RET_LABEL85;
RET_LABEL85:(void)0;
}
}
if (var84){
{
{ /* Inline model#MProperty#name (var_mproperty) on <var_mproperty:MProperty(MMethod)> */
var93 = var_mproperty->attrs[COLOR_model__MProperty___name].val; /* _name on <var_mproperty:MProperty(MMethod)> */
if (unlikely(var93 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _name");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1620);
show_backtrace(1);
}
var91 = var93;
RET_LABEL92:(void)0;
}
}
{
var94 = typing__TypeVisitor__check_signature(var_v, self, var_args, var91, var_msignature);
}
} else {
}
{
{ /* Inline model#MSignature#return_mtype (var_msignature) on <var_msignature:MSignature> */
var97 = var_msignature->attrs[COLOR_model__MSignature___return_mtype].val; /* _return_mtype on <var_msignature:MSignature> */
var95 = var97;
RET_LABEL96:(void)0;
}
}
{
{ /* Inline typing#AExpr#mtype= (self,var95) on <self:ASuperExpr> */
self->attrs[COLOR_typing__AExpr___mtype].val = var95; /* _mtype on <self:ASuperExpr> */
RET_LABEL98:(void)0;
}
}
var99 = 1;
{
{ /* Inline typing#AExpr#is_typed= (self,var99) on <self:ASuperExpr> */
self->attrs[COLOR_typing__AExpr___is_typed].s = var99; /* _is_typed on <self:ASuperExpr> */
RET_LABEL100:(void)0;
}
}
{
{ /* Inline typing#TypeVisitor#mpropdef (var_v) on <var_v:TypeVisitor> */
var103 = var_v->attrs[COLOR_typing__TypeVisitor___mpropdef].val; /* _mpropdef on <var_v:TypeVisitor> */
var101 = var103;
RET_LABEL102:(void)0;
}
}
var104 = 1;
if (var101 == NULL) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1613);
show_backtrace(1);
} else {
{ /* Inline modelize_property#MPropDef#has_supercall= (var101,var104) on <var101:nullable MPropDef> */
if (unlikely(var101 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "modelize/modelize_property.nit", 288);
show_backtrace(1);
}
var101->attrs[COLOR_modelize_property__MPropDef___has_supercall].s = var104; /* _has_supercall on <var101:nullable MPropDef> */
RET_LABEL105:(void)0;
}
}
{
{ /* Inline typing#TypeVisitor#mpropdef (var_v) on <var_v:TypeVisitor> */
var108 = var_v->attrs[COLOR_typing__TypeVisitor___mpropdef].val; /* _mpropdef on <var_v:TypeVisitor> */
var106 = var108;
RET_LABEL107:(void)0;
}
}
/* <var106:nullable MPropDef> isa MMethodDef */
cltype110 = type_model__MMethodDef.color;
idtype111 = type_model__MMethodDef.id;
if(var106 == NULL) {
var109 = 0;
} else {
if(cltype110 >= var106->type->table_size) {
var109 = 0;
} else {
var109 = var106->type->type_table[cltype110] == idtype111;
}
}
if (unlikely(!var109)) {
var_class_name112 = var106 == NULL ? "null" : var106->type->name;
PRINT_ERROR("Runtime error: Cast failed. Expected `%s`, got `%s`", "MMethodDef", var_class_name112);
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1614);
show_backtrace(1);
}
{
{ /* Inline typing#ASuperExpr#mpropdef= (self,var106) on <self:ASuperExpr> */
self->attrs[COLOR_typing__ASuperExpr___mpropdef].val = var106; /* _mpropdef on <self:ASuperExpr> */
RET_LABEL113:(void)0;
}
}
RET_LABEL:;
}
/* method typing#ASuperExpr#accept_typing for (self: Object, TypeVisitor) */
void VIRTUAL_typing__ASuperExpr__accept_typing(val* self, val* p0) {
typing__ASuperExpr__accept_typing(self, p0); /* Direct call typing#ASuperExpr#accept_typing on <self:Object(ASuperExpr)>*/
RET_LABEL:;
}
/* method typing#ASuperExpr#process_superinit for (self: ASuperExpr, TypeVisitor) */
void typing__ASuperExpr__process_superinit(val* self, val* p0) {
val* var_v /* var v: TypeVisitor */;
val* var /* : nullable MClassType */;
val* var2 /* : nullable MClassType */;
val* var_anchor /* var anchor: nullable MClassType */;
val* var3 /* : null */;
short int var4 /* : Bool */;
short int var5 /* : Bool */;
val* var_other /* var other: nullable Object */;
short int var7 /* : Bool */;
short int var8 /* : Bool */;
short int var9 /* : Bool */;
val* var10 /* : Variable */;
val* var12 /* : Variable */;
val* var13 /* : nullable MType */;
val* var_recvtype /* var recvtype: nullable MType */;
val* var14 /* : null */;
short int var15 /* : Bool */;
short int var16 /* : Bool */;
short int var18 /* : Bool */;
short int var19 /* : Bool */;
short int var20 /* : Bool */;
val* var21 /* : nullable MPropDef */;
val* var23 /* : nullable MPropDef */;
val* var_mpropdef /* var mpropdef: nullable MPropDef */;
short int var24 /* : Bool */;
int cltype;
int idtype;
val* var25 /* : MProperty */;
val* var27 /* : MProperty */;
val* var_mproperty /* var mproperty: MMethod */;
val* var28 /* : null */;
val* var_superprop /* var superprop: nullable MMethodDef */;
val* var29 /* : MClassDef */;
val* var31 /* : MClassDef */;
val* var32 /* : Array[MClassType] */;
val* var34 /* : Array[MClassType] */;
val* var_ /* var : Array[MClassType] */;
val* var35 /* : ArrayIterator[nullable Object] */;
val* var_36 /* var : ArrayIterator[MClassType] */;
short int var37 /* : Bool */;
val* var38 /* : nullable Object */;
val* var_msupertype /* var msupertype: MClassType */;
val* var39 /* : MModule */;
val* var41 /* : MModule */;
val* var42 /* : MClassType */;
val* var43 /* : ModelBuilder */;
val* var45 /* : ModelBuilder */;
val* var46 /* : ToolContext */;
val* var48 /* : ToolContext */;
long var49 /* : Int */;
long var51 /* : Int */;
long var_errcount /* var errcount: Int */;
val* var52 /* : String */;
val* var54 /* : String */;
val* var55 /* : nullable MProperty */;
short int var56 /* : Bool */;
int cltype57;
int idtype58;
const char* var_class_name;
val* var_candidate /* var candidate: nullable MMethod */;
val* var59 /* : null */;
short int var60 /* : Bool */;
short int var61 /* : Bool */;
val* var_other63 /* var other: nullable Object */;
short int var64 /* : Bool */;
short int var66 /* : Bool */;
val* var67 /* : ModelBuilder */;
val* var69 /* : ModelBuilder */;
val* var70 /* : ToolContext */;
val* var72 /* : ToolContext */;
long var73 /* : Int */;
long var75 /* : Int */;
short int var76 /* : Bool */;
short int var78 /* : Bool */;
int cltype79;
int idtype80;
const char* var_class_name81;
short int var82 /* : Bool */;
short int var83 /* : Bool */;
val* var84 /* : null */;
short int var85 /* : Bool */;
short int var86 /* : Bool */;
short int var88 /* : Bool */;
short int var89 /* : Bool */;
short int var90 /* : Bool */;
short int var_91 /* var : Bool */;
short int var92 /* : Bool */;
short int var94 /* : Bool */;
short int var95 /* : Bool */;
short int var96 /* : Bool */;
val* var97 /* : null */;
short int var98 /* : Bool */;
short int var99 /* : Bool */;
short int var101 /* : Bool */;
short int var102 /* : Bool */;
short int var103 /* : Bool */;
short int var_104 /* var : Bool */;
val* var105 /* : MProperty */;
val* var107 /* : MProperty */;
short int var108 /* : Bool */;
short int var109 /* : Bool */;
short int var111 /* : Bool */;
short int var112 /* : Bool */;
short int var113 /* : Bool */;
short int var_114 /* var : Bool */;
val* var115 /* : MProperty */;
val* var117 /* : MProperty */;
short int var118 /* : Bool */;
short int var120 /* : Bool */;
short int var121 /* : Bool */;
static val* varonce;
val* var122 /* : String */;
char* var123 /* : NativeString */;
long var124 /* : Int */;
val* var125 /* : FlatString */;
static val* varonce126;
val* var127 /* : String */;
char* var128 /* : NativeString */;
long var129 /* : Int */;
val* var130 /* : FlatString */;
val* var131 /* : String */;
static val* varonce132;
val* var133 /* : String */;
char* var134 /* : NativeString */;
long var135 /* : Int */;
val* var136 /* : FlatString */;
val* var137 /* : MProperty */;
val* var139 /* : MProperty */;
val* var140 /* : String */;
val* var141 /* : Array[Object] */;
long var142 /* : Int */;
val* var143 /* : NativeArray[Object] */;
val* var144 /* : String */;
val* var145 /* : MModule */;
val* var147 /* : MModule */;
val* var148 /* : Array[MPropDef] */;
val* var_candidatedefs /* var candidatedefs: Array[MMethodDef] */;
short int var149 /* : Bool */;
val* var150 /* : null */;
short int var151 /* : Bool */;
short int var152 /* : Bool */;
short int var154 /* : Bool */;
short int var155 /* : Bool */;
short int var156 /* : Bool */;
short int var_157 /* var : Bool */;
val* var158 /* : MProperty */;
val* var160 /* : MProperty */;
short int var161 /* : Bool */;
short int var162 /* : Bool */;
short int var164 /* : Bool */;
short int var166 /* : Bool */;
val* var167 /* : nullable Object */;
short int var168 /* : Bool */;
short int var169 /* : Bool */;
short int var171 /* : Bool */;
short int var173 /* : Bool */;
long var174 /* : Int */;
long var176 /* : Int */;
long var177 /* : Int */;
short int var178 /* : Bool */;
short int var180 /* : Bool */;
int cltype181;
int idtype182;
const char* var_class_name183;
short int var184 /* : Bool */;
static val* varonce185;
val* var186 /* : String */;
char* var187 /* : NativeString */;
long var188 /* : Int */;
val* var189 /* : FlatString */;
static val* varonce190;
val* var191 /* : String */;
char* var192 /* : NativeString */;
long var193 /* : Int */;
val* var194 /* : FlatString */;
static val* varonce195;
val* var196 /* : String */;
char* var197 /* : NativeString */;
long var198 /* : Int */;
val* var199 /* : FlatString */;
static val* varonce200;
val* var201 /* : String */;
char* var202 /* : NativeString */;
long var203 /* : Int */;
val* var204 /* : FlatString */;
val* var205 /* : String */;
val* var206 /* : Array[Object] */;
long var207 /* : Int */;
val* var208 /* : NativeArray[Object] */;
val* var209 /* : String */;
val* var210 /* : nullable Object */;
val* var213 /* : null */;
short int var214 /* : Bool */;
short int var215 /* : Bool */;
short int var217 /* : Bool */;
short int var219 /* : Bool */;
static val* varonce220;
val* var221 /* : String */;
char* var222 /* : NativeString */;
long var223 /* : Int */;
val* var224 /* : FlatString */;
static val* varonce225;
val* var226 /* : String */;
char* var227 /* : NativeString */;
long var228 /* : Int */;
val* var229 /* : FlatString */;
val* var230 /* : Array[Object] */;
long var231 /* : Int */;
val* var232 /* : NativeArray[Object] */;
val* var233 /* : String */;
val* var234 /* : MSignature */;
val* var235 /* : nullable MSignature */;
val* var237 /* : nullable MSignature */;
val* var238 /* : nullable MSignature */;
val* var240 /* : nullable MSignature */;
val* var_msignature /* var msignature: MSignature */;
short int var241 /* : Bool */;
val* var242 /* : MType */;
short int var243 /* : Bool */;
int cltype244;
int idtype245;
const char* var_class_name246;
val* var247 /* : CallSite */;
val* var248 /* : MModule */;
val* var250 /* : MModule */;
val* var251 /* : nullable MClassType */;
val* var253 /* : nullable MClassType */;
short int var254 /* : Bool */;
val* var255 /* : MProperty */;
val* var257 /* : MProperty */;
short int var258 /* : Bool */;
val* var_callsite /* var callsite: CallSite */;
val* var260 /* : AExprs */;
val* var262 /* : AExprs */;
val* var263 /* : Array[AExpr] */;
val* var_args /* var args: Array[AExpr] */;
long var264 /* : Int */;
long var266 /* : Int */;
long var267 /* : Int */;
short int var268 /* : Bool */;
short int var270 /* : Bool */;
int cltype271;
int idtype272;
const char* var_class_name273;
short int var274 /* : Bool */;
short int var275 /* : Bool */;
val* var276 /* : nullable MSignature */;
val* var278 /* : nullable MSignature */;
long var279 /* : Int */;
long var280 /* : Int */;
short int var281 /* : Bool */;
short int var283 /* : Bool */;
int cltype284;
int idtype285;
const char* var_class_name286;
short int var287 /* : Bool */;
static val* varonce288;
val* var289 /* : String */;
char* var290 /* : NativeString */;
long var291 /* : Int */;
val* var292 /* : FlatString */;
val* var293 /* : nullable MSignature */;
val* var295 /* : nullable MSignature */;
long var296 /* : Int */;
static val* varonce297;
val* var298 /* : String */;
char* var299 /* : NativeString */;
long var300 /* : Int */;
val* var301 /* : FlatString */;
long var302 /* : Int */;
static val* varonce303;
val* var304 /* : String */;
char* var305 /* : NativeString */;
long var306 /* : Int */;
val* var307 /* : FlatString */;
val* var308 /* : Array[Object] */;
long var309 /* : Int */;
val* var310 /* : NativeArray[Object] */;
val* var311 /* : Object */;
val* var312 /* : Object */;
val* var313 /* : String */;
long var314 /* : Int */;
long var_i /* var i: Int */;
val* var315 /* : Array[MParameter] */;
val* var317 /* : Array[MParameter] */;
val* var_318 /* var : Array[MParameter] */;
val* var319 /* : ArrayIterator[nullable Object] */;
val* var_320 /* var : ArrayIterator[MParameter] */;
short int var321 /* : Bool */;
val* var322 /* : nullable Object */;
val* var_sp /* var sp: MParameter */;
val* var323 /* : nullable MSignature */;
val* var325 /* : nullable MSignature */;
val* var326 /* : Array[MParameter] */;
val* var328 /* : Array[MParameter] */;
val* var329 /* : nullable Object */;
val* var_p /* var p: MParameter */;
val* var330 /* : MType */;
val* var332 /* : MType */;
val* var333 /* : MType */;
val* var335 /* : MType */;
short int var336 /* : Bool */;
short int var337 /* : Bool */;
static val* varonce338;
val* var339 /* : String */;
char* var340 /* : NativeString */;
long var341 /* : Int */;
val* var342 /* : FlatString */;
static val* varonce343;
val* var344 /* : String */;
char* var345 /* : NativeString */;
long var346 /* : Int */;
val* var347 /* : FlatString */;
val* var348 /* : MType */;
val* var350 /* : MType */;
static val* varonce351;
val* var352 /* : String */;
char* var353 /* : NativeString */;
long var354 /* : Int */;
val* var355 /* : FlatString */;
val* var356 /* : String */;
val* var358 /* : String */;
static val* varonce359;
val* var360 /* : String */;
char* var361 /* : NativeString */;
long var362 /* : Int */;
val* var363 /* : FlatString */;
val* var364 /* : MType */;
val* var366 /* : MType */;
static val* varonce367;
val* var368 /* : String */;
char* var369 /* : NativeString */;
long var370 /* : Int */;
val* var371 /* : FlatString */;
val* var372 /* : Array[Object] */;
long var373 /* : Int */;
val* var374 /* : NativeArray[Object] */;
val* var375 /* : Object */;
val* var376 /* : String */;
long var377 /* : Int */;
long var378 /* : Int */;
short int var380 /* : Bool */;
int cltype381;
int idtype382;
const char* var_class_name383;
long var384 /* : Int */;
short int var387 /* : Bool */;
var_v = p0;
{
{ /* Inline typing#TypeVisitor#anchor (var_v) on <var_v:TypeVisitor> */
var2 = var_v->attrs[COLOR_typing__TypeVisitor___anchor].val; /* _anchor on <var_v:TypeVisitor> */
var = var2;
RET_LABEL1:(void)0;
}
}
var_anchor = var;
var3 = NULL;
if (var_anchor == NULL) {
var4 = 0; /* is null */
} else {
var4 = 1; /* arg is null and recv is not */
}
if (0) {
{ /* Inline kernel#Object#!= (var_anchor,var3) on <var_anchor:nullable MClassType> */
var_other = var3;
{
var8 = ((short int (*)(val*, val*))(var_anchor->class->vft[COLOR_kernel__Object___61d_61d]))(var_anchor, var_other) /* == on <var_anchor:nullable MClassType(MClassType)>*/;
var7 = var8;
}
var9 = !var7;
var5 = var9;
goto RET_LABEL6;
RET_LABEL6:(void)0;
}
var4 = var5;
}
if (unlikely(!var4)) {
PRINT_ERROR("Runtime error: %s", "Assert failed");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1620);
show_backtrace(1);
}
{
{ /* Inline typing#TypeVisitor#selfvariable (var_v) on <var_v:TypeVisitor> */
var12 = var_v->attrs[COLOR_typing__TypeVisitor___selfvariable].val; /* _selfvariable on <var_v:TypeVisitor> */
if (unlikely(var12 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _selfvariable");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 50);
show_backtrace(1);
}
var10 = var12;
RET_LABEL11:(void)0;
}
}
{
var13 = typing__TypeVisitor__get_variable(var_v, self, var10);
}
var_recvtype = var13;
var14 = NULL;
if (var_recvtype == NULL) {
var15 = 0; /* is null */
} else {
var15 = 1; /* arg is null and recv is not */
}
if (0) {
{ /* Inline kernel#Object#!= (var_recvtype,var14) on <var_recvtype:nullable MType> */
var_other = var14;
{
var19 = ((short int (*)(val*, val*))(var_recvtype->class->vft[COLOR_kernel__Object___61d_61d]))(var_recvtype, var_other) /* == on <var_recvtype:nullable MType(MType)>*/;
var18 = var19;
}
var20 = !var18;
var16 = var20;
goto RET_LABEL17;
RET_LABEL17:(void)0;
}
var15 = var16;
}
if (unlikely(!var15)) {
PRINT_ERROR("Runtime error: %s", "Assert failed");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1622);
show_backtrace(1);
}
{
{ /* Inline typing#TypeVisitor#mpropdef (var_v) on <var_v:TypeVisitor> */
var23 = var_v->attrs[COLOR_typing__TypeVisitor___mpropdef].val; /* _mpropdef on <var_v:TypeVisitor> */
var21 = var23;
RET_LABEL22:(void)0;
}
}
var_mpropdef = var21;
/* <var_mpropdef:nullable MPropDef> isa MMethodDef */
cltype = type_model__MMethodDef.color;
idtype = type_model__MMethodDef.id;
if(var_mpropdef == NULL) {
var24 = 0;
} else {
if(cltype >= var_mpropdef->type->table_size) {
var24 = 0;
} else {
var24 = var_mpropdef->type->type_table[cltype] == idtype;
}
}
if (unlikely(!var24)) {
PRINT_ERROR("Runtime error: %s", "Assert failed");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1624);
show_backtrace(1);
}
{
{ /* Inline model#MPropDef#mproperty (var_mpropdef) on <var_mpropdef:nullable MPropDef(MMethodDef)> */
var27 = var_mpropdef->attrs[COLOR_model__MPropDef___mproperty].val; /* _mproperty on <var_mpropdef:nullable MPropDef(MMethodDef)> */
if (unlikely(var27 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mproperty");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1898);
show_backtrace(1);
}
var25 = var27;
RET_LABEL26:(void)0;
}
}
var_mproperty = var25;
var28 = NULL;
var_superprop = var28;
{
{ /* Inline model#MPropDef#mclassdef (var_mpropdef) on <var_mpropdef:nullable MPropDef(MMethodDef)> */
var31 = var_mpropdef->attrs[COLOR_model__MPropDef___mclassdef].val; /* _mclassdef on <var_mpropdef:nullable MPropDef(MMethodDef)> */
if (unlikely(var31 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mclassdef");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1895);
show_backtrace(1);
}
var29 = var31;
RET_LABEL30:(void)0;
}
}
{
{ /* Inline model#MClassDef#supertypes (var29) on <var29:MClassDef> */
var34 = var29->attrs[COLOR_model__MClassDef___supertypes].val; /* _supertypes on <var29:MClassDef> */
if (unlikely(var34 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _supertypes");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 534);
show_backtrace(1);
}
var32 = var34;
RET_LABEL33:(void)0;
}
}
var_ = var32;
{
var35 = array__AbstractArrayRead__iterator(var_);
}
var_36 = var35;
for(;;) {
{
var37 = array__ArrayIterator__is_ok(var_36);
}
if (var37){
{
var38 = array__ArrayIterator__item(var_36);
}
var_msupertype = var38;
{
{ /* Inline typing#TypeVisitor#mmodule (var_v) on <var_v:TypeVisitor> */
var41 = var_v->attrs[COLOR_typing__TypeVisitor___mmodule].val; /* _mmodule on <var_v:TypeVisitor> */
if (unlikely(var41 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mmodule");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 36);
show_backtrace(1);
}
var39 = var41;
RET_LABEL40:(void)0;
}
}
{
var42 = model__MClassType__anchor_to(var_msupertype, var39, var_anchor);
}
var_msupertype = var42;
{
{ /* Inline typing#TypeVisitor#modelbuilder (var_v) on <var_v:TypeVisitor> */
var45 = var_v->attrs[COLOR_typing__TypeVisitor___modelbuilder].val; /* _modelbuilder on <var_v:TypeVisitor> */
if (unlikely(var45 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _modelbuilder");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 34);
show_backtrace(1);
}
var43 = var45;
RET_LABEL44:(void)0;
}
}
{
{ /* Inline modelbuilder#ModelBuilder#toolcontext (var43) on <var43:ModelBuilder> */
var48 = var43->attrs[COLOR_modelbuilder__ModelBuilder___toolcontext].val; /* _toolcontext on <var43:ModelBuilder> */
if (unlikely(var48 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _toolcontext");
PRINT_ERROR(" (%s:%d)\n", "modelbuilder.nit", 106);
show_backtrace(1);
}
var46 = var48;
RET_LABEL47:(void)0;
}
}
{
{ /* Inline toolcontext#ToolContext#error_count (var46) on <var46:ToolContext> */
var51 = var46->attrs[COLOR_toolcontext__ToolContext___error_count].l; /* _error_count on <var46:ToolContext> */
var49 = var51;
RET_LABEL50:(void)0;
}
}
var_errcount = var49;
{
{ /* Inline model#MProperty#name (var_mproperty) on <var_mproperty:MMethod> */
var54 = var_mproperty->attrs[COLOR_model__MProperty___name].val; /* _name on <var_mproperty:MMethod> */
if (unlikely(var54 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _name");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1620);
show_backtrace(1);
}
var52 = var54;
RET_LABEL53:(void)0;
}
}
{
var55 = typing__TypeVisitor__try_get_mproperty_by_name2(var_v, self, var_msupertype, var52);
}
/* <var55:nullable MProperty> isa nullable MMethod */
cltype57 = type_nullable_model__MMethod.color;
idtype58 = type_nullable_model__MMethod.id;
if(var55 == NULL) {
var56 = 1;
} else {
if(cltype57 >= var55->type->table_size) {
var56 = 0;
} else {
var56 = var55->type->type_table[cltype57] == idtype58;
}
}
if (unlikely(!var56)) {
var_class_name = var55 == NULL ? "null" : var55->type->name;
PRINT_ERROR("Runtime error: Cast failed. Expected `%s`, got `%s`", "nullable MMethod", var_class_name);
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1630);
show_backtrace(1);
}
var_candidate = var55;
var59 = NULL;
if (var_candidate == NULL) {
var60 = 1; /* is null */
} else {
var60 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_candidate,var59) on <var_candidate:nullable MMethod> */
var_other63 = var59;
{
{ /* Inline kernel#Object#is_same_instance (var_candidate,var_other63) on <var_candidate:nullable MMethod(MMethod)> */
var66 = var_candidate == var_other63;
var64 = var66;
goto RET_LABEL65;
RET_LABEL65:(void)0;
}
}
var61 = var64;
goto RET_LABEL62;
RET_LABEL62:(void)0;
}
var60 = var61;
}
if (var60){
{
{ /* Inline typing#TypeVisitor#modelbuilder (var_v) on <var_v:TypeVisitor> */
var69 = var_v->attrs[COLOR_typing__TypeVisitor___modelbuilder].val; /* _modelbuilder on <var_v:TypeVisitor> */
if (unlikely(var69 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _modelbuilder");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 34);
show_backtrace(1);
}
var67 = var69;
RET_LABEL68:(void)0;
}
}
{
{ /* Inline modelbuilder#ModelBuilder#toolcontext (var67) on <var67:ModelBuilder> */
var72 = var67->attrs[COLOR_modelbuilder__ModelBuilder___toolcontext].val; /* _toolcontext on <var67:ModelBuilder> */
if (unlikely(var72 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _toolcontext");
PRINT_ERROR(" (%s:%d)\n", "modelbuilder.nit", 106);
show_backtrace(1);
}
var70 = var72;
RET_LABEL71:(void)0;
}
}
{
{ /* Inline toolcontext#ToolContext#error_count (var70) on <var70:ToolContext> */
var75 = var70->attrs[COLOR_toolcontext__ToolContext___error_count].l; /* _error_count on <var70:ToolContext> */
var73 = var75;
RET_LABEL74:(void)0;
}
}
{
{ /* Inline kernel#Int#> (var73,var_errcount) on <var73:Int> */
/* Covariant cast for argument 0 (i) <var_errcount:Int> isa OTHER */
/* <var_errcount:Int> isa OTHER */
var78 = 1; /* easy <var_errcount:Int> isa OTHER*/
if (unlikely(!var78)) {
var_class_name81 = type_kernel__Int.name;
PRINT_ERROR("Runtime error: Cast failed. Expected `%s`, got `%s`", "OTHER", var_class_name81);
PRINT_ERROR(" (%s:%d)\n", "../lib/standard/kernel.nit", 373);
show_backtrace(1);
}
var82 = var73 > var_errcount;
var76 = var82;
goto RET_LABEL77;
RET_LABEL77:(void)0;
}
}
if (var76){
goto RET_LABEL;
} else {
}
goto BREAK_label;
} else {
}
var84 = NULL;
if (var_superprop == NULL) {
var85 = 0; /* is null */
} else {
var85 = 1; /* arg is null and recv is not */
}
if (0) {
{ /* Inline kernel#Object#!= (var_superprop,var84) on <var_superprop:nullable MMethodDef> */
var_other = var84;
{
var89 = ((short int (*)(val*, val*))(var_superprop->class->vft[COLOR_kernel__Object___61d_61d]))(var_superprop, var_other) /* == on <var_superprop:nullable MMethodDef(MMethodDef)>*/;
var88 = var89;
}
var90 = !var88;
var86 = var90;
goto RET_LABEL87;
RET_LABEL87:(void)0;
}
var85 = var86;
}
var_91 = var85;
if (var85){
{
{ /* Inline model#MMethod#is_root_init (var_candidate) on <var_candidate:nullable MMethod(MMethod)> */
var94 = var_candidate->attrs[COLOR_model__MMethod___is_root_init].s; /* _is_root_init on <var_candidate:nullable MMethod(MMethod)> */
var92 = var94;
RET_LABEL93:(void)0;
}
}
var83 = var92;
} else {
var83 = var_91;
}
if (var83){
goto BREAK_label;
} else {
}
var97 = NULL;
if (var_superprop == NULL) {
var98 = 0; /* is null */
} else {
var98 = 1; /* arg is null and recv is not */
}
if (0) {
{ /* Inline kernel#Object#!= (var_superprop,var97) on <var_superprop:nullable MMethodDef> */
var_other = var97;
{
var102 = ((short int (*)(val*, val*))(var_superprop->class->vft[COLOR_kernel__Object___61d_61d]))(var_superprop, var_other) /* == on <var_superprop:nullable MMethodDef(MMethodDef)>*/;
var101 = var102;
}
var103 = !var101;
var99 = var103;
goto RET_LABEL100;
RET_LABEL100:(void)0;
}
var98 = var99;
}
var_104 = var98;
if (var98){
{
{ /* Inline model#MPropDef#mproperty (var_superprop) on <var_superprop:nullable MMethodDef(MMethodDef)> */
var107 = var_superprop->attrs[COLOR_model__MPropDef___mproperty].val; /* _mproperty on <var_superprop:nullable MMethodDef(MMethodDef)> */
if (unlikely(var107 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mproperty");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1898);
show_backtrace(1);
}
var105 = var107;
RET_LABEL106:(void)0;
}
}
{
{ /* Inline kernel#Object#!= (var105,var_candidate) on <var105:MProperty(MMethod)> */
var_other = var_candidate;
{
var112 = ((short int (*)(val*, val*))(var105->class->vft[COLOR_kernel__Object___61d_61d]))(var105, var_other) /* == on <var105:MProperty(MMethod)>*/;
var111 = var112;
}
var113 = !var111;
var109 = var113;
goto RET_LABEL110;
RET_LABEL110:(void)0;
}
var108 = var109;
}
var96 = var108;
} else {
var96 = var_104;
}
var_114 = var96;
if (var96){
{
{ /* Inline model#MPropDef#mproperty (var_superprop) on <var_superprop:nullable MMethodDef(MMethodDef)> */
var117 = var_superprop->attrs[COLOR_model__MPropDef___mproperty].val; /* _mproperty on <var_superprop:nullable MMethodDef(MMethodDef)> */
if (unlikely(var117 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mproperty");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1898);
show_backtrace(1);
}
var115 = var117;
RET_LABEL116:(void)0;
}
}
{
{ /* Inline model#MMethod#is_root_init (var115) on <var115:MProperty(MMethod)> */
var120 = var115->attrs[COLOR_model__MMethod___is_root_init].s; /* _is_root_init on <var115:MProperty(MMethod)> */
var118 = var120;
RET_LABEL119:(void)0;
}
}
var121 = !var118;
var95 = var121;
} else {
var95 = var_114;
}
if (var95){
if (varonce) {
var122 = varonce;
} else {
var123 = "Error: conflicting super constructor to call for ";
var124 = 49;
var125 = string__NativeString__to_s_with_length(var123, var124);
var122 = var125;
varonce = var122;
}
if (varonce126) {
var127 = varonce126;
} else {
var128 = ": ";
var129 = 2;
var130 = string__NativeString__to_s_with_length(var128, var129);
var127 = var130;
varonce126 = var127;
}
{
var131 = model__MProperty__full_name(var_candidate);
}
if (varonce132) {
var133 = varonce132;
} else {
var134 = ", ";
var135 = 2;
var136 = string__NativeString__to_s_with_length(var134, var135);
var133 = var136;
varonce132 = var133;
}
{
{ /* Inline model#MPropDef#mproperty (var_superprop) on <var_superprop:nullable MMethodDef(MMethodDef)> */
var139 = var_superprop->attrs[COLOR_model__MPropDef___mproperty].val; /* _mproperty on <var_superprop:nullable MMethodDef(MMethodDef)> */
if (unlikely(var139 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mproperty");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1898);
show_backtrace(1);
}
var137 = var139;
RET_LABEL138:(void)0;
}
}
{
var140 = model__MProperty__full_name(var137);
}
var141 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var141 = array_instance Array[Object] */
var142 = 6;
var143 = NEW_array__NativeArray(var142, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var143)->values[0] = (val*) var122;
((struct instance_array__NativeArray*)var143)->values[1] = (val*) var_mproperty;
((struct instance_array__NativeArray*)var143)->values[2] = (val*) var127;
((struct instance_array__NativeArray*)var143)->values[3] = (val*) var131;
((struct instance_array__NativeArray*)var143)->values[4] = (val*) var133;
((struct instance_array__NativeArray*)var143)->values[5] = (val*) var140;
{
((void (*)(val*, val*, long))(var141->class->vft[COLOR_array__Array__with_native]))(var141, var143, var142) /* with_native on <var141:Array[Object]>*/;
}
}
{
var144 = ((val* (*)(val*))(var141->class->vft[COLOR_string__Object__to_s]))(var141) /* to_s on <var141:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var144); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
{
{ /* Inline typing#TypeVisitor#mmodule (var_v) on <var_v:TypeVisitor> */
var147 = var_v->attrs[COLOR_typing__TypeVisitor___mmodule].val; /* _mmodule on <var_v:TypeVisitor> */
if (unlikely(var147 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mmodule");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 36);
show_backtrace(1);
}
var145 = var147;
RET_LABEL146:(void)0;
}
}
{
var148 = model__MProperty__lookup_definitions(var_candidate, var145, var_anchor);
}
var_candidatedefs = var148;
var150 = NULL;
if (var_superprop == NULL) {
var151 = 0; /* is null */
} else {
var151 = 1; /* arg is null and recv is not */
}
if (0) {
{ /* Inline kernel#Object#!= (var_superprop,var150) on <var_superprop:nullable MMethodDef> */
var_other = var150;
{
var155 = ((short int (*)(val*, val*))(var_superprop->class->vft[COLOR_kernel__Object___61d_61d]))(var_superprop, var_other) /* == on <var_superprop:nullable MMethodDef(MMethodDef)>*/;
var154 = var155;
}
var156 = !var154;
var152 = var156;
goto RET_LABEL153;
RET_LABEL153:(void)0;
}
var151 = var152;
}
var_157 = var151;
if (var151){
{
{ /* Inline model#MPropDef#mproperty (var_superprop) on <var_superprop:nullable MMethodDef(MMethodDef)> */
var160 = var_superprop->attrs[COLOR_model__MPropDef___mproperty].val; /* _mproperty on <var_superprop:nullable MMethodDef(MMethodDef)> */
if (unlikely(var160 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mproperty");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1898);
show_backtrace(1);
}
var158 = var160;
RET_LABEL159:(void)0;
}
}
{
{ /* Inline kernel#Object#== (var158,var_candidate) on <var158:MProperty(MMethod)> */
var_other63 = var_candidate;
{
{ /* Inline kernel#Object#is_same_instance (var158,var_other63) on <var158:MProperty(MMethod)> */
var166 = var158 == var_other63;
var164 = var166;
goto RET_LABEL165;
RET_LABEL165:(void)0;
}
}
var162 = var164;
goto RET_LABEL163;
RET_LABEL163:(void)0;
}
var161 = var162;
}
var149 = var161;
} else {
var149 = var_157;
}
if (var149){
{
var167 = abstract_collection__SequenceRead__first(var_candidatedefs);
}
{
{ /* Inline kernel#Object#== (var_superprop,var167) on <var_superprop:nullable MMethodDef(MMethodDef)> */
var_other63 = var167;
{
{ /* Inline kernel#Object#is_same_instance (var_superprop,var_other63) on <var_superprop:nullable MMethodDef(MMethodDef)> */
var173 = var_superprop == var_other63;
var171 = var173;
goto RET_LABEL172;
RET_LABEL172:(void)0;
}
}
var169 = var171;
goto RET_LABEL170;
RET_LABEL170:(void)0;
}
var168 = var169;
}
if (var168){
goto BREAK_label;
} else {
}
{
array__Array__add(var_candidatedefs, var_superprop); /* Direct call array#Array#add on <var_candidatedefs:Array[MMethodDef]>*/
}
} else {
}
{
{ /* Inline array#AbstractArrayRead#length (var_candidatedefs) on <var_candidatedefs:Array[MMethodDef]> */
var176 = var_candidatedefs->attrs[COLOR_array__AbstractArrayRead___length].l; /* _length on <var_candidatedefs:Array[MMethodDef]> */
var174 = var176;
RET_LABEL175:(void)0;
}
}
var177 = 1;
{
{ /* Inline kernel#Int#> (var174,var177) on <var174:Int> */
/* Covariant cast for argument 0 (i) <var177:Int> isa OTHER */
/* <var177:Int> isa OTHER */
var180 = 1; /* easy <var177:Int> isa OTHER*/
if (unlikely(!var180)) {
var_class_name183 = type_kernel__Int.name;
PRINT_ERROR("Runtime error: Cast failed. Expected `%s`, got `%s`", "OTHER", var_class_name183);
PRINT_ERROR(" (%s:%d)\n", "../lib/standard/kernel.nit", 373);
show_backtrace(1);
}
var184 = var174 > var177;
var178 = var184;
goto RET_LABEL179;
RET_LABEL179:(void)0;
}
}
if (var178){
if (varonce185) {
var186 = varonce185;
} else {
var187 = "Error: conflicting property definitions for property ";
var188 = 53;
var189 = string__NativeString__to_s_with_length(var187, var188);
var186 = var189;
varonce185 = var186;
}
if (varonce190) {
var191 = varonce190;
} else {
var192 = " in ";
var193 = 4;
var194 = string__NativeString__to_s_with_length(var192, var193);
var191 = var194;
varonce190 = var191;
}
if (varonce195) {
var196 = varonce195;
} else {
var197 = ": ";
var198 = 2;
var199 = string__NativeString__to_s_with_length(var197, var198);
var196 = var199;
varonce195 = var196;
}
if (varonce200) {
var201 = varonce200;
} else {
var202 = ", ";
var203 = 2;
var204 = string__NativeString__to_s_with_length(var202, var203);
var201 = var204;
varonce200 = var201;
}
{
var205 = string__Collection__join(var_candidatedefs, var201);
}
var206 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var206 = array_instance Array[Object] */
var207 = 6;
var208 = NEW_array__NativeArray(var207, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var208)->values[0] = (val*) var186;
((struct instance_array__NativeArray*)var208)->values[1] = (val*) var_mproperty;
((struct instance_array__NativeArray*)var208)->values[2] = (val*) var191;
((struct instance_array__NativeArray*)var208)->values[3] = (val*) var_recvtype;
((struct instance_array__NativeArray*)var208)->values[4] = (val*) var196;
((struct instance_array__NativeArray*)var208)->values[5] = (val*) var205;
{
((void (*)(val*, val*, long))(var206->class->vft[COLOR_array__Array__with_native]))(var206, var208, var207) /* with_native on <var206:Array[Object]>*/;
}
}
{
var209 = ((val* (*)(val*))(var206->class->vft[COLOR_string__Object__to_s]))(var206) /* to_s on <var206:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var209); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
{
var210 = abstract_collection__SequenceRead__first(var_candidatedefs);
}
var_superprop = var210;
BREAK_label: (void)0;
{
array__ArrayIterator__next(var_36); /* Direct call array#ArrayIterator#next on <var_36:ArrayIterator[MClassType]>*/
}
} else {
goto BREAK_label211;
}
}
BREAK_label211: (void)0;
{
{ /* Inline abstract_collection#Iterator#finish (var_36) on <var_36:ArrayIterator[MClassType]> */
RET_LABEL212:(void)0;
}
}
var213 = NULL;
if (var_superprop == NULL) {
var214 = 1; /* is null */
} else {
var214 = 0; /* arg is null but recv is not */
}
if (0) {
{ /* Inline kernel#Object#== (var_superprop,var213) on <var_superprop:nullable MMethodDef> */
var_other63 = var213;
{
{ /* Inline kernel#Object#is_same_instance (var_superprop,var_other63) on <var_superprop:nullable MMethodDef(MMethodDef)> */
var219 = var_superprop == var_other63;
var217 = var219;
goto RET_LABEL218;
RET_LABEL218:(void)0;
}
}
var215 = var217;
goto RET_LABEL216;
RET_LABEL216:(void)0;
}
var214 = var215;
}
if (var214){
if (varonce220) {
var221 = varonce220;
} else {
var222 = "Error: No super method to call for ";
var223 = 35;
var224 = string__NativeString__to_s_with_length(var222, var223);
var221 = var224;
varonce220 = var221;
}
if (varonce225) {
var226 = varonce225;
} else {
var227 = ".";
var228 = 1;
var229 = string__NativeString__to_s_with_length(var227, var228);
var226 = var229;
varonce225 = var226;
}
var230 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var230 = array_instance Array[Object] */
var231 = 3;
var232 = NEW_array__NativeArray(var231, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var232)->values[0] = (val*) var221;
((struct instance_array__NativeArray*)var232)->values[1] = (val*) var_mproperty;
((struct instance_array__NativeArray*)var232)->values[2] = (val*) var226;
{
((void (*)(val*, val*, long))(var230->class->vft[COLOR_array__Array__with_native]))(var230, var232, var231) /* with_native on <var230:Array[Object]>*/;
}
}
{
var233 = ((val* (*)(val*))(var230->class->vft[COLOR_string__Object__to_s]))(var230) /* to_s on <var230:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var233); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
{
{ /* Inline model#MMethodDef#new_msignature (var_superprop) on <var_superprop:nullable MMethodDef(MMethodDef)> */
var237 = var_superprop->attrs[COLOR_model__MMethodDef___new_msignature].val; /* _new_msignature on <var_superprop:nullable MMethodDef(MMethodDef)> */
var235 = var237;
RET_LABEL236:(void)0;
}
}
if (var235!=NULL) {
var234 = var235;
} else {
{
{ /* Inline model#MMethodDef#msignature (var_superprop) on <var_superprop:nullable MMethodDef(MMethodDef)> */
var240 = var_superprop->attrs[COLOR_model__MMethodDef___msignature].val; /* _msignature on <var_superprop:nullable MMethodDef(MMethodDef)> */
var238 = var240;
RET_LABEL239:(void)0;
}
}
if (unlikely(var238 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Cast failed");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1658);
show_backtrace(1);
}
var234 = var238;
}
var_msignature = var234;
var241 = 1;
{
var242 = typing__TypeVisitor__resolve_for(var_v, var_msignature, var_recvtype, var241);
}
/* <var242:MType> isa MSignature */
cltype244 = type_model__MSignature.color;
idtype245 = type_model__MSignature.id;
if(cltype244 >= var242->type->table_size) {
var243 = 0;
} else {
var243 = var242->type->type_table[cltype244] == idtype245;
}
if (unlikely(!var243)) {
var_class_name246 = var242 == NULL ? "null" : var242->type->name;
PRINT_ERROR("Runtime error: Cast failed. Expected `%s`, got `%s`", "MSignature", var_class_name246);
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1659);
show_backtrace(1);
}
var_msignature = var242;
var247 = NEW_typing__CallSite(&type_typing__CallSite);
{
{ /* Inline typing#TypeVisitor#mmodule (var_v) on <var_v:TypeVisitor> */
var250 = var_v->attrs[COLOR_typing__TypeVisitor___mmodule].val; /* _mmodule on <var_v:TypeVisitor> */
if (unlikely(var250 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mmodule");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 36);
show_backtrace(1);
}
var248 = var250;
RET_LABEL249:(void)0;
}
}
{
{ /* Inline typing#TypeVisitor#anchor (var_v) on <var_v:TypeVisitor> */
var253 = var_v->attrs[COLOR_typing__TypeVisitor___anchor].val; /* _anchor on <var_v:TypeVisitor> */
var251 = var253;
RET_LABEL252:(void)0;
}
}
var254 = 1;
{
{ /* Inline model#MPropDef#mproperty (var_superprop) on <var_superprop:nullable MMethodDef(MMethodDef)> */
var257 = var_superprop->attrs[COLOR_model__MPropDef___mproperty].val; /* _mproperty on <var_superprop:nullable MMethodDef(MMethodDef)> */
if (unlikely(var257 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mproperty");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1898);
show_backtrace(1);
}
var255 = var257;
RET_LABEL256:(void)0;
}
}
var258 = 0;
{
((void (*)(val*, val*))(var247->class->vft[COLOR_typing__CallSite__node_61d]))(var247, self) /* node= on <var247:CallSite>*/;
}
{
((void (*)(val*, val*))(var247->class->vft[COLOR_typing__CallSite__recv_61d]))(var247, var_recvtype) /* recv= on <var247:CallSite>*/;
}
{
((void (*)(val*, val*))(var247->class->vft[COLOR_typing__CallSite__mmodule_61d]))(var247, var248) /* mmodule= on <var247:CallSite>*/;
}
{
((void (*)(val*, val*))(var247->class->vft[COLOR_typing__CallSite__anchor_61d]))(var247, var251) /* anchor= on <var247:CallSite>*/;
}
{
((void (*)(val*, short int))(var247->class->vft[COLOR_typing__CallSite__recv_is_self_61d]))(var247, var254) /* recv_is_self= on <var247:CallSite>*/;
}
{
((void (*)(val*, val*))(var247->class->vft[COLOR_typing__CallSite__mproperty_61d]))(var247, var255) /* mproperty= on <var247:CallSite>*/;
}
{
((void (*)(val*, val*))(var247->class->vft[COLOR_typing__CallSite__mpropdef_61d]))(var247, var_superprop) /* mpropdef= on <var247:CallSite>*/;
}
{
((void (*)(val*, val*))(var247->class->vft[COLOR_typing__CallSite__msignature_61d]))(var247, var_msignature) /* msignature= on <var247:CallSite>*/;
}
{
((void (*)(val*, short int))(var247->class->vft[COLOR_typing__CallSite__erasure_cast_61d]))(var247, var258) /* erasure_cast= on <var247:CallSite>*/;
}
{
((void (*)(val*))(var247->class->vft[COLOR_kernel__Object__init]))(var247) /* init on <var247:CallSite>*/;
}
var_callsite = var247;
{
{ /* Inline typing#ASuperExpr#callsite= (self,var_callsite) on <self:ASuperExpr> */
self->attrs[COLOR_typing__ASuperExpr___callsite].val = var_callsite; /* _callsite on <self:ASuperExpr> */
RET_LABEL259:(void)0;
}
}
{
{ /* Inline parser_nodes#ASuperExpr#n_args (self) on <self:ASuperExpr> */
var262 = self->attrs[COLOR_parser_nodes__ASuperExpr___n_args].val; /* _n_args on <self:ASuperExpr> */
if (unlikely(var262 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _n_args");
PRINT_ERROR(" (%s:%d)\n", "parser/parser_nodes.nit", 1691);
show_backtrace(1);
}
var260 = var262;
RET_LABEL261:(void)0;
}
}
{
var263 = typing__AExprs__to_a(var260);
}
var_args = var263;
{
{ /* Inline array#AbstractArrayRead#length (var_args) on <var_args:Array[AExpr]> */
var266 = var_args->attrs[COLOR_array__AbstractArrayRead___length].l; /* _length on <var_args:Array[AExpr]> */
var264 = var266;
RET_LABEL265:(void)0;
}
}
var267 = 0;
{
{ /* Inline kernel#Int#> (var264,var267) on <var264:Int> */
/* Covariant cast for argument 0 (i) <var267:Int> isa OTHER */
/* <var267:Int> isa OTHER */
var270 = 1; /* easy <var267:Int> isa OTHER*/
if (unlikely(!var270)) {
var_class_name273 = type_kernel__Int.name;
PRINT_ERROR("Runtime error: Cast failed. Expected `%s`, got `%s`", "OTHER", var_class_name273);
PRINT_ERROR(" (%s:%d)\n", "../lib/standard/kernel.nit", 373);
show_backtrace(1);
}
var274 = var264 > var267;
var268 = var274;
goto RET_LABEL269;
RET_LABEL269:(void)0;
}
}
if (var268){
{
var275 = typing__CallSite__check_signature(var_callsite, var_v, var_args);
}
} else {
{
{ /* Inline model#MMethodDef#msignature (var_mpropdef) on <var_mpropdef:nullable MPropDef(MMethodDef)> */
var278 = var_mpropdef->attrs[COLOR_model__MMethodDef___msignature].val; /* _msignature on <var_mpropdef:nullable MPropDef(MMethodDef)> */
var276 = var278;
RET_LABEL277:(void)0;
}
}
if (var276 == NULL) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1669);
show_backtrace(1);
} else {
var279 = model__MSignature__arity(var276);
}
{
var280 = model__MSignature__arity(var_msignature);
}
{
{ /* Inline kernel#Int#< (var279,var280) on <var279:Int> */
/* Covariant cast for argument 0 (i) <var280:Int> isa OTHER */
/* <var280:Int> isa OTHER */
var283 = 1; /* easy <var280:Int> isa OTHER*/
if (unlikely(!var283)) {
var_class_name286 = type_kernel__Int.name;
PRINT_ERROR("Runtime error: Cast failed. Expected `%s`, got `%s`", "OTHER", var_class_name286);
PRINT_ERROR(" (%s:%d)\n", "../lib/standard/kernel.nit", 371);
show_backtrace(1);
}
var287 = var279 < var280;
var281 = var287;
goto RET_LABEL282;
RET_LABEL282:(void)0;
}
}
if (var281){
if (varonce288) {
var289 = varonce288;
} else {
var290 = "Error: Not enough implicit arguments to pass. Got ";
var291 = 50;
var292 = string__NativeString__to_s_with_length(var290, var291);
var289 = var292;
varonce288 = var289;
}
{
{ /* Inline model#MMethodDef#msignature (var_mpropdef) on <var_mpropdef:nullable MPropDef(MMethodDef)> */
var295 = var_mpropdef->attrs[COLOR_model__MMethodDef___msignature].val; /* _msignature on <var_mpropdef:nullable MPropDef(MMethodDef)> */
var293 = var295;
RET_LABEL294:(void)0;
}
}
if (var293 == NULL) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1670);
show_backtrace(1);
} else {
var296 = model__MSignature__arity(var293);
}
if (varonce297) {
var298 = varonce297;
} else {
var299 = ", expected at least ";
var300 = 20;
var301 = string__NativeString__to_s_with_length(var299, var300);
var298 = var301;
varonce297 = var298;
}
{
var302 = model__MSignature__arity(var_msignature);
}
if (varonce303) {
var304 = varonce303;
} else {
var305 = ". Signature is ";
var306 = 15;
var307 = string__NativeString__to_s_with_length(var305, var306);
var304 = var307;
varonce303 = var304;
}
var308 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var308 = array_instance Array[Object] */
var309 = 6;
var310 = NEW_array__NativeArray(var309, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var310)->values[0] = (val*) var289;
var311 = BOX_kernel__Int(var296); /* autobox from Int to Object */
((struct instance_array__NativeArray*)var310)->values[1] = (val*) var311;
((struct instance_array__NativeArray*)var310)->values[2] = (val*) var298;
var312 = BOX_kernel__Int(var302); /* autobox from Int to Object */
((struct instance_array__NativeArray*)var310)->values[3] = (val*) var312;
((struct instance_array__NativeArray*)var310)->values[4] = (val*) var304;
((struct instance_array__NativeArray*)var310)->values[5] = (val*) var_msignature;
{
((void (*)(val*, val*, long))(var308->class->vft[COLOR_array__Array__with_native]))(var308, var310, var309) /* with_native on <var308:Array[Object]>*/;
}
}
{
var313 = ((val* (*)(val*))(var308->class->vft[COLOR_string__Object__to_s]))(var308) /* to_s on <var308:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var313); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
var314 = 0;
var_i = var314;
{
{ /* Inline model#MSignature#mparameters (var_msignature) on <var_msignature:MSignature> */
var317 = var_msignature->attrs[COLOR_model__MSignature___mparameters].val; /* _mparameters on <var_msignature:MSignature> */
if (unlikely(var317 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mparameters");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1465);
show_backtrace(1);
}
var315 = var317;
RET_LABEL316:(void)0;
}
}
var_318 = var315;
{
var319 = array__AbstractArrayRead__iterator(var_318);
}
var_320 = var319;
for(;;) {
{
var321 = array__ArrayIterator__is_ok(var_320);
}
if (var321){
{
var322 = array__ArrayIterator__item(var_320);
}
var_sp = var322;
{
{ /* Inline model#MMethodDef#msignature (var_mpropdef) on <var_mpropdef:nullable MPropDef(MMethodDef)> */
var325 = var_mpropdef->attrs[COLOR_model__MMethodDef___msignature].val; /* _msignature on <var_mpropdef:nullable MPropDef(MMethodDef)> */
var323 = var325;
RET_LABEL324:(void)0;
}
}
if (var323 == NULL) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "semantize/typing.nit", 1676);
show_backtrace(1);
} else {
{ /* Inline model#MSignature#mparameters (var323) on <var323:nullable MSignature> */
if (unlikely(var323 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Receiver is null");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1465);
show_backtrace(1);
}
var328 = var323->attrs[COLOR_model__MSignature___mparameters].val; /* _mparameters on <var323:nullable MSignature> */
if (unlikely(var328 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mparameters");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1465);
show_backtrace(1);
}
var326 = var328;
RET_LABEL327:(void)0;
}
}
{
var329 = array__Array___91d_93d(var326, var_i);
}
var_p = var329;
{
{ /* Inline model#MParameter#mtype (var_p) on <var_p:MParameter> */
var332 = var_p->attrs[COLOR_model__MParameter___mtype].val; /* _mtype on <var_p:MParameter> */
if (unlikely(var332 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mtype");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1565);
show_backtrace(1);
}
var330 = var332;
RET_LABEL331:(void)0;
}
}
{
{ /* Inline model#MParameter#mtype (var_sp) on <var_sp:MParameter> */
var335 = var_sp->attrs[COLOR_model__MParameter___mtype].val; /* _mtype on <var_sp:MParameter> */
if (unlikely(var335 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mtype");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1565);
show_backtrace(1);
}
var333 = var335;
RET_LABEL334:(void)0;
}
}
{
var336 = typing__TypeVisitor__is_subtype(var_v, var330, var333);
}
var337 = !var336;
if (var337){
if (varonce338) {
var339 = varonce338;
} else {
var340 = "Type error: expected argument #";
var341 = 31;
var342 = string__NativeString__to_s_with_length(var340, var341);
var339 = var342;
varonce338 = var339;
}
if (varonce343) {
var344 = varonce343;
} else {
var345 = " of type ";
var346 = 9;
var347 = string__NativeString__to_s_with_length(var345, var346);
var344 = var347;
varonce343 = var344;
}
{
{ /* Inline model#MParameter#mtype (var_sp) on <var_sp:MParameter> */
var350 = var_sp->attrs[COLOR_model__MParameter___mtype].val; /* _mtype on <var_sp:MParameter> */
if (unlikely(var350 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mtype");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1565);
show_backtrace(1);
}
var348 = var350;
RET_LABEL349:(void)0;
}
}
if (varonce351) {
var352 = varonce351;
} else {
var353 = ", got implicit argument ";
var354 = 24;
var355 = string__NativeString__to_s_with_length(var353, var354);
var352 = var355;
varonce351 = var352;
}
{
{ /* Inline model#MParameter#name (var_p) on <var_p:MParameter> */
var358 = var_p->attrs[COLOR_model__MParameter___name].val; /* _name on <var_p:MParameter> */
if (unlikely(var358 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _name");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1562);
show_backtrace(1);
}
var356 = var358;
RET_LABEL357:(void)0;
}
}
if (varonce359) {
var360 = varonce359;
} else {
var361 = " of type ";
var362 = 9;
var363 = string__NativeString__to_s_with_length(var361, var362);
var360 = var363;
varonce359 = var360;
}
{
{ /* Inline model#MParameter#mtype (var_p) on <var_p:MParameter> */
var366 = var_p->attrs[COLOR_model__MParameter___mtype].val; /* _mtype on <var_p:MParameter> */
if (unlikely(var366 == NULL)) {
PRINT_ERROR("Runtime error: %s", "Uninitialized attribute _mtype");
PRINT_ERROR(" (%s:%d)\n", "model/model.nit", 1565);
show_backtrace(1);
}
var364 = var366;
RET_LABEL365:(void)0;
}
}
if (varonce367) {
var368 = varonce367;
} else {
var369 = ". Signature is ";
var370 = 15;
var371 = string__NativeString__to_s_with_length(var369, var370);
var368 = var371;
varonce367 = var368;
}
var372 = NEW_array__Array(&type_array__Arraykernel__Object);
{ /* var372 = array_instance Array[Object] */
var373 = 10;
var374 = NEW_array__NativeArray(var373, &type_array__NativeArraykernel__Object);
((struct instance_array__NativeArray*)var374)->values[0] = (val*) var339;
var375 = BOX_kernel__Int(var_i); /* autobox from Int to Object */
((struct instance_array__NativeArray*)var374)->values[1] = (val*) var375;
((struct instance_array__NativeArray*)var374)->values[2] = (val*) var344;
((struct instance_array__NativeArray*)var374)->values[3] = (val*) var348;
((struct instance_array__NativeArray*)var374)->values[4] = (val*) var352;
((struct instance_array__NativeArray*)var374)->values[5] = (val*) var356;
((struct instance_array__NativeArray*)var374)->values[6] = (val*) var360;
((struct instance_array__NativeArray*)var374)->values[7] = (val*) var364;
((struct instance_array__NativeArray*)var374)->values[8] = (val*) var368;
((struct instance_array__NativeArray*)var374)->values[9] = (val*) var_msignature;
{
((void (*)(val*, val*, long))(var372->class->vft[COLOR_array__Array__with_native]))(var372, var374, var373) /* with_native on <var372:Array[Object]>*/;
}
}
{
var376 = ((val* (*)(val*))(var372->class->vft[COLOR_string__Object__to_s]))(var372) /* to_s on <var372:Array[Object]>*/;
}
{
typing__TypeVisitor__error(var_v, self, var376); /* Direct call typing#TypeVisitor#error on <var_v:TypeVisitor>*/
}
goto RET_LABEL;
} else {
}
var377 = 1;
{
{ /* Inline kernel#Int#+ (var_i,var377) on <var_i:Int> */
/* Covariant cast for argument 0 (i) <var377:Int> isa OTHER */
/* <var377:Int> isa OTHER */
var380 = 1; /* easy <var377:Int> isa OTHER*/
if (unlikely(!var380)) {
var_class_name383 = type_kernel__Int.name;
PRINT_ERROR("Runtime error: Cast failed. Expected `%s`, got `%s`", "OTHER", var_class_name383);
PRINT_ERROR(" (%s:%d)\n", "../lib/standard/kernel.nit", 374);
show_backtrace(1);
}
var384 = var_i + var377;
var378 = var384;
goto RET_LABEL379;
RET_LABEL379:(void)0;
}
}
var_i = var378;
{
array__ArrayIterator__next(var_320); /* Direct call array#ArrayIterator#next on <var_320:ArrayIterator[MParameter]>*/
}
} else {
goto BREAK_label385;
}
}
BREAK_label385: (void)0;
{
{ /* Inline abstract_collection#Iterator#finish (var_320) on <var_320:ArrayIterator[MParameter]> */
RET_LABEL386:(void)0;
}
}
}
var387 = 1;
{
{ /* Inline typing#AExpr#is_typed= (self,var387) on <self:ASuperExpr> */
self->attrs[COLOR_typing__AExpr___is_typed].s = var387; /* _is_typed on <self:ASuperExpr> */
RET_LABEL388:(void)0;
}
}
RET_LABEL:;
}
/* method typing#ASuperExpr#process_superinit for (self: Object, TypeVisitor) */
void VIRTUAL_typing__ASuperExpr__process_superinit(val* self, val* p0) {
typing__ASuperExpr__process_superinit(self, p0); /* Direct call typing#ASuperExpr#process_superinit on <self:Object(ASuperExpr)>*/
RET_LABEL:;
}
/* method typing#ANewExpr#callsite for (self: ANewExpr): nullable CallSite */
val* typing__ANewExpr__callsite(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
var1 = self->attrs[COLOR_typing__ANewExpr___callsite].val; /* _callsite on <self:ANewExpr> */
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ANewExpr#callsite for (self: Object): nullable CallSite */
val* VIRTUAL_typing__ANewExpr__callsite(val* self) {
val* var /* : nullable CallSite */;
val* var1 /* : nullable CallSite */;
val* var3 /* : nullable CallSite */;
{ /* Inline typing#ANewExpr#callsite (self) on <self:Object(ANewExpr)> */
var3 = self->attrs[COLOR_typing__ANewExpr___callsite].val; /* _callsite on <self:Object(ANewExpr)> */
var1 = var3;
RET_LABEL2:(void)0;
}
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ANewExpr#callsite= for (self: ANewExpr, nullable CallSite) */
void typing__ANewExpr__callsite_61d(val* self, val* p0) {
self->attrs[COLOR_typing__ANewExpr___callsite].val = p0; /* _callsite on <self:ANewExpr> */
RET_LABEL:;
}
/* method typing#ANewExpr#callsite= for (self: Object, nullable CallSite) */
void VIRTUAL_typing__ANewExpr__callsite_61d(val* self, val* p0) {
{ /* Inline typing#ANewExpr#callsite= (self,p0) on <self:Object(ANewExpr)> */
self->attrs[COLOR_typing__ANewExpr___callsite].val = p0; /* _callsite on <self:Object(ANewExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
/* method typing#ANewExpr#recvtype for (self: ANewExpr): nullable MClassType */
val* typing__ANewExpr__recvtype(val* self) {
val* var /* : nullable MClassType */;
val* var1 /* : nullable MClassType */;
var1 = self->attrs[COLOR_typing__ANewExpr___recvtype].val; /* _recvtype on <self:ANewExpr> */
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ANewExpr#recvtype for (self: Object): nullable MClassType */
val* VIRTUAL_typing__ANewExpr__recvtype(val* self) {
val* var /* : nullable MClassType */;
val* var1 /* : nullable MClassType */;
val* var3 /* : nullable MClassType */;
{ /* Inline typing#ANewExpr#recvtype (self) on <self:Object(ANewExpr)> */
var3 = self->attrs[COLOR_typing__ANewExpr___recvtype].val; /* _recvtype on <self:Object(ANewExpr)> */
var1 = var3;
RET_LABEL2:(void)0;
}
var = var1;
RET_LABEL:;
return var;
}
/* method typing#ANewExpr#recvtype= for (self: ANewExpr, nullable MClassType) */
void typing__ANewExpr__recvtype_61d(val* self, val* p0) {
self->attrs[COLOR_typing__ANewExpr___recvtype].val = p0; /* _recvtype on <self:ANewExpr> */
RET_LABEL:;
}
/* method typing#ANewExpr#recvtype= for (self: Object, nullable MClassType) */
void VIRTUAL_typing__ANewExpr__recvtype_61d(val* self, val* p0) {
{ /* Inline typing#ANewExpr#recvtype= (self,p0) on <self:Object(ANewExpr)> */
self->attrs[COLOR_typing__ANewExpr___recvtype].val = p0; /* _recvtype on <self:Object(ANewExpr)> */
RET_LABEL1:(void)0;
}
RET_LABEL:;
}
